AIS5 Trade Machine


Номер выпуска: 50003
Дата  выпуска: 2010.03.31


Руководство пользователя


Содержание

1. Введение
2. Свойства
3. Установка, часть 1
4. Установка, часть 2
5. Подготовка к работе
6. Управление
7. Заключение


1. Введение

1.1. AIS5 Trade Machine представляет собой MQL4 программу для терминала MetaTrader 4.
1.2. Основные свойства AIS5 Trade Machine:
     1.2.1. отображает на рабочем графике построенные по тиковым объемам "профили рынка";
     1.2.2. отображает в реальном времени данные о тиковых объемах потока цен рабочего символа.
1.3. Основными задачами AIS5 Trade Machine являются:
     1.3.1. выявление "сильных" и "слабых" ценовых уровней;
     1.3.2. выявление точек входа в рынок.
1.4. Основные предположения:
     1.4.1. "сильными" являются уровни с наибольшими тиковыми объемами;
     1.4.2. "слабыми" являются уровни с наименьшими тиковыми объемами;
     1.4.3. "сильные" уровни являются более устойчивыми, "слабые" уровни являются менее устойчивыми;
     1.4.4. большие пакеты приходящих тиков могут отражать большие объемы текущих сделок и являться точками входа.
1.5. Правильная работа AIS5 Trade Machine в общем случае достигается при соблюдении следующих условий:
     1.5.1. в одном терминале работает только один экземпляр AIS5 Trade Machine;
     1.5.2. в терминале должны отсутствовать программы, способные удалять чужие глобальные переменные;
     1.5.3. на рабочем графике должны отсутствовать индикаторы, способные удалять чужие графические объекты.
1.6. AIS5 Trade Machine произведена из AIS4 Trade Machine.
1.7. AIS5 Trade Machine имеет следующие общие с AIS4 Trade Machine свойства:
     1.7.1. встроенные торговые функции с автоматическим управлением рисками;
     1.7.2. первая панель мониторинга, расположенная в левой части графика.
1.8. Все указанные выше свойства описаны в Руководстве пользователя AIS4 Trade Machine.
1.9. AIS5 Trade Machine имеет следующие отличия от AIS4 Trade Machine:
     1.9.1. дополнительный блок обработки данных;
     1.9.2. блок построения профилей рынка;
     1.9.3. вторая панель мониторинга, расположенная в правой части графика;
     1.9.4. AIS5 Trade Machine использует внешний файл, подготавливаемый до начала работы отдельной программой;
     1.9.5. возможность работы в тестере стратегий отсутствует.
1.10. Далее описываются свойства только AIS5 Trade Machine.


2. Свойства

2.1. Принятые обозначения и соглашения:
     2.1.1. "M1" = фреймы минутного периода PERIOD_M1;
     2.1.2. "фрейм", "фрейм данных" = бар;
     2.1.3. "нулевой фрейм" = фрейм номер "0", текущий формирующийся фрейм;
     2.1.4. "фрейм номер 1" = самый последний по времени полный фрейм;
     2.1.5. "объем" = тиковый объем;
     2.1.6. "профиль" = распределение тиковых объемов по всему диапазону цен на заданном промежутке времени;
     2.1.7. в общем случае показатели перечисляются слева направо и сверху вниз.
2.2. Дополнительный блок обработки данных работает только с фреймами M1, поэтому далее "фрейм" означает фрейм M1.
2.3. Дополнительный блок обработки данных:
     2.3.1. считывает при рестарте данные, подготовленные программой A Tool: Market Profile Generator;
     2.3.2. вычисляет 3 профиля рынка P1, P2, P3  на 3 различных промежутках времени:
            2.3.2.1. P1 вычисляется однократно от самого старого фрейма до даты A Tool: Market Profile Generator;
            2.3.2.2. P2 вычисляется однократно от даты A Tool: Market Profile Generator до даты фрейма номер 1;
            2.3.2.3. P3 перевычисляется от даты фрейма номер 0 при рестарте программы и до текущего времени;
     2.3.3. разбивает профили рынка на зоны с шагом "ZoneStepPoints" и начальным смещением "ZoneBasePoints";
     2.3.4. вычисляет 2 зонных массива Z1 и Z0, отображаемые блоком построения профилей рынка на рабочем графике;
     2.3.5. вычисляет данные об объемах текущей зоны, а также 4 зон вверх и 4 зон вниз от текущей;
     2.3.6. вычисляет данные о последних 9 поступивших пакетах тиков;
     2.3.7. вычисляет данные о распределении объемов всех поступивших пакетах тиков по размерам этих пакетов.
2.4. Зонный массив Z1 представляет собой разбитую на равномерные ценовые промежутки сумму профилей P1 и P2.
2.5. Зонный массив Z1 представлен на графике левой гистограммой.
2.6. Зонный массив Z0 представляет собой разбитый на такие же равномерные ценовые промежутки профиль P2.
2.7. Зонный массив Z0 представлен на графике правой гистограммой.
2.8. Текущий профиль P3 может быть включен в профиль P2 командой "ProfileReset".
2.9. Профиль P2 при этом пересчитывается, конечным фреймом профиля P2 становится фрейм номер 1.
2.10. Профиль P3 при этом обнуляется, начальным фреймом профиля P3 становится фрейм номер 0.
2.11. Профиль P1 при этом остается без изменений.
2.12. Зонные массивы Z1 и Z0, точнее их шаг и смещение, могут быть одновременно изменены командой "ZoneReset".
2.13. Профили P1, P2, P3 при этом остаются без изменений.
2.14. Вторая панель мониторинга отображает на графике данные дополнительного блока обработки данных.
2.15. Вторая панель мониторинга состоит из следующих частей:
      2.15.1. заголовок;
      2.15.2. 4 кластера данных:
              2.15.2.1. кластер регистров профилей рынка;
              2.15.2.2. кластер бегущих строк;
              2.15.2.3. кластер распределения тиковых объемов профиля P3 по размерам пакетов тиков;
              2.15.2.4. кластер распределения тиковых объемов массивов Z1 и Z0 по ближним ценовым зонам.
2.16. Заголовок содержит два показателя в миллисекундах:
      2.16.1. время работы дополнительного блока обработки данных;
      2.16.2. время, затраченное на мониторинг, то есть сумма времени работы следующих блоков:
              2.16.2.1. блока построения профилей рынка;
              2.16.2.2. блока построения первой панели мониторинга;
              2.16.2.3. блока построения второй панели мониторинга.
2.17. Кластер регистров профилей рынка состоит из 4 частей:
      2.17.1. регистр профиля P1 со следующими 4 показателями:
              2.17.1.1. количество фреймов, использованных для вычисления профиля P1;
              2.17.1.2. суммарный тиковый объем профиля P1;
              2.17.1.3. время открытия начального фрейма профиля P1;
              2.17.1.4. время открытия конечного фрейма профиля P1;
      2.17.2. регистр профиля P2 со следующими 4 показателями:
              2.17.2.1. количество фреймов, использованных для вычисления профиля P2;
              2.17.2.2. суммарный тиковый объем профиля P2;
              2.17.2.3. время открытия начального фрейма профиля P2;
              2.17.2.4. время открытия конечного фрейма профиля P2;
      2.17.3. регистр профиля P3 со следующими 7 показателями, сверху вниз:
              2.17.3.1. слева - количество фреймов, использованных для вычисления профиля P3;
              2.17.3.2. слева - суммарный тиковый объем профиля P3;
              2.17.3.3. время открытия начального фрейма профиля P3;
              2.17.3.4. время открытия конечного фрейма профиля P3;
              2.17.3.5. справа - проверочное число фреймов, использованных для вычисления профиля P3;
              2.17.3.6. справа - проверочный суммарный тиковый объем профиля P3;
              2.17.3.7. в центре - номер ближайшего фрейма с ценами полностью ниже "+"/выше "-" текущей цены.
      2.17.4. сводная метрика профилей из 3 показателей и метрика нулевого фрейма из 3 показателей:
              2.17.4.1. наибольшая цена профилей в пунктах;
              2.17.4.2. диапазон цен профилей в пунктах;
              2.17.4.3. наименьшая цена профилей в пунктах;
              2.17.4.4. длительность нулевого фрейма в секундах;
              2.17.4.5. длительность полного фрейма в секундах, всегда 60;
              2.17.4.6. длительность нулевого фрейма в процентах от длительности полного фрейма.
2.18. Кластер бегущих строк состоит из 2 частей:
      2.18.1. строки мониторинга нулевого фрейма 2 штуки:
              2.18.1.1. первая строка содержит 4 группы по 3 показателя волатильности в пунктах на фрейм:
                        2.18.1.1.1. первый показатель в каждой группе - это ценовой диапазон нулевого фрейма;
                        2.18.1.1.2. второй - ценовой диапазон, наибольший в профилях P1, P2, P3, и фрейма номер 1;
                        2.18.1.1.3. третьий - отношение первого показателя ко второму в процентах;
              2.18.1.2. вторая строка содержит 4 группы по 3 показателя объемов в тиках на фрейм:
                        2.18.1.2.1. первый показатель в каждой группе - это тиковый объем нулевого фрейма;
                        2.18.1.2.2. второй - тиковый объем, наибольший в профилях P1, P2, P3, и фрейма номер 1;
                        2.18.1.2.3. третьий - отношение первого показателя ко второму в процентах;
      2.18.2. бегущие строки 6 штук по 9 столбцов, каждый столбец содержит показатели одного пакета тиков:
              2.18.2.1. первая строка - размер пакета в тиках;
              2.18.2.2. вторая - временной интервал между пакетами в секундах;
              2.18.2.3. третья - флуктуация цены "Bid" в пунктах;
              2.18.2.4. червертая - то же, что и третья, нарастающим итогом;
              2.18.2.5. пятая - то же, что и вторая, нарастающим итогом;
              2.18.2.6. шестая - то же, что и первая, нарастающим итогом.
2.19. Кластер распределения тиковых объемов профиля P3 по размерам пакетов тиков состоит из 2 частей:
      2.19.1. заголовок из 5 показателей:
              2.19.1.1. полный тиковый объем профиля P3 плюс объем нулевого фрейма;
              2.19.1.2. тиковый объем пакетов с положительной флуктуацией цены "Bid";
              2.19.1.3. тиковый объем пакетов с отрицательной флуктуацией цены "Bid";
              2.19.1.4. тиковый объем пакетов с нулевой флуктуацией цены "Bid";
              2.19.1.5. тиковый объем пакетов, учтенных как "потерянные";
      2.19.2. таблица из 11 строк по 5 столбцов:
              2.19.2.1. первый столбец обозначает размер пакета тиков;
              2.19.2.2. второй - общий тиковый объем пакетов данного размера в профиле P3;
              2.19.2.3. третий - задержку, предшествующую приходу последнего пакета данного объема в секундах;
              2.19.2.4. четвертый - интервал между приходом последнего пакета данного объема и текущим временем;
              2.19.2.5. пятый - время прихода последнего пакета данного объема.
2.20. Кластер распределения тиковых объемов профилей рынка по ближним ценовым зонам состоит из 2 частей:
      2.20.1. заголовок из 5 показателей:
              2.20.1.1. наибольший объем зоны массива Z1;
              2.20.1.2. средний объем зоны массива Z1;
              2.20.1.3. полный объем массива Z1;
              2.20.1.4. средний объем зоны видимой части массива Z0;
              2.20.1.5. полный объем массива Z0;
      2.20.2. таблица из 9 строк по 7 столбцов:
              2.20.2.1. первый столбец обозначает номер зоны относительно нулевой, содержащей текущую цену Bid;
              2.20.2.2. второй - ближающую к нулевой зоне границу зоны;
              2.20.2.3. третий - объем зоны массива Z1 в процентах к наибольшему объему зоны массива Z1;
              2.20.2.4. четвертый - объем зоны массива Z1 в тиках;
              2.20.2.5. пятый - то же нарастающим итогом от нулевой зоны массива Z1;
              2.20.2.6. шестой - объем зоны массива Z0 в тиках;
              2.20.2.7. седьмой - то же нарастающим итогом от нулевой зоны массива Z0.
2.21. В нулевой зоне пятого столбца указана разность между итоговыми суммами 4 верхних зон и 4 нижних зон массива Z1.
2.22. В нулевой зоне седьмого столбца указана разность между итоговыми суммами 4 верхних зон и 4 нижних зон массива Z0.
2.23. Вертикальная сплошная линия на графике между гистограммами означает линию нулевых объемов для обеих гистограмм.
2.24. Наиболее удаленные от нулевой линии пунктирные линии означают линии наибольших объемов массивов Z1 и Z0.
2.25. Пунктирные линии между нулевой линией и линиями наибольших объемов означают линии средних объемов.


3. Установка, часть 1

3.1. AIS5 Trade Machine это:
     3.1.1. "AIS5TM.MQ4" - файл с MQL4 кодом;
     3.1.2. "AIS5TM.EX4" - исполняемый файл.
3.2. Скачайте файл "AIS5TM.MQ4".
3.3. Найдите папку терминала MetaTrader 4, далее называемую "%MT4%".
3.4. В большинстве случаев терминал MetaTrader 4 находится в папке "C:/Program Files/MetaTrader 4".
3.5. Переместите файл "AIS5TM.MQ4" в папку "%MT4%/experts".
3.6. Запустите терминал MetaTrader 4, далее называемый "MetaTrader".
3.7. Нажмите <F4> для запуска MetaEditor.
3.8. В MetaEditor нажмите <Ctrl-O> для вызова окна "Открыть".
3.9. Откройте файл "AIS5TM.MQ4" в папке "%MT4%/experts".
3.10. Проверьте в строке 7 номер модификации.
3.11. Проверьте в строке 8 дату выпуска.
3.12. Проверьте в строке 106 название рабочего символа "EURUSD" и в случае надобности измените его.
3.13. Нажмите <F5> для компиляции кода.
3.14. Нажмите <F4> для возврата в MetaTrader.
3.15. В MetaTrader нажмите <Ctrl-O> для вызова окна "Настройки".
3.16. На вкладке "Советника" окна "Настройки":
      3.16.1. поставьте галочку "Включить советники"="+";
      3.16.2. "Отключить советники при смене счета" оставьте без изменений;
      3.16.3. "Отключить советники при смене счета" оставьте без изменений;
      3.16.4. поставьте галочку "Разрешить советнику торговать"="+";
      3.16.5. снимите галочку с "Ручное подтверждение";
      3.16.6. остальные настройки оставьте без изменений.
3.17. Нажмите кнопку [OK] окна "Настройки".
3.18. Нажмите <Ctrl-N> для вызова окна "Навигатор".
3.19. Перейдите на вкладку "Общие" окна "Навигатор".
3.20. Откройте список "Советники".
3.21. Найдите "AIS5TM".
3.22. "AIS5TM" - это сокращенное имя исполняемого файла "AIS5TM.EX4".
3.23. Первая часть установки завершена.


4. Установка, часть 2

4.1. Перед началом работы AIS5 Trade Machine требуется подготовить вспомогательный файл, содержащий профиль P1.
4.2. Данный файл создается скриптом A Tool: Market Profile Generator.
4.3. A Tool: Market Profile Generator это:
     4.3.1. "AT5.MQ4" - файл с MQL4 кодом;
     4.3.2. "AT5.EX4" - исполняемый файл.
4.4. Скачайте файл "AT5.MQ4".
4.5. Переместите файл "AT5.MQ4" в папку "%MT4%/experts/scripts".
4.6. Нажмите <F4> для запуска MetaEditor.
4.7. В MetaEditor нажмите <Ctrl-O> для вызова окна "Открыть".
4.8. Откройте файл "AT5.MQ4" в папке "%MT4%/experts/scripts".
4.9. Проверьте в строке 7 номер модификации.
4.10. Проверьте в строке 8 дату выпуска.
4.11. Нажмите <F5> для компиляции кода.
4.12. Нажмите <F4> для возврата в MetaTrader.
4.13. Нажмите <Ctrl-N> для вызова окна "Навигатор".
4.14. Перейдите на вкладку "Общие" окна "Навигатор".
4.15. Откройте список "Скрипты".
4.16. Найдите "AT5".
4.17. "AT5" - это сокращенное имя исполняемого файла "AT5.EX4".
4.18. Вторая часть установки завершена.


5. Подготовка к работе

5.1. Установите в окне "Сервис/Настройки/Графики":
     5.1.1. "Макс. баров в истории" больше предельного ожидаемого размера профиля P1, например 10000000;
     5.1.2. "Макс. баров в окне" такое же число, 10000000 в данном случае.
5.2. Закройте и снова запустите терминал.
5.3. Закачайте историю по требуемому торговому символу через меню "Сервис/Архив котировок".
5.4. Откройте график с требуемым торговым символом.
5.5. Откройте файл "AT5.MQ4" в папке "%MT4%/experts/scripts".
5.6. В строке 37 установите конечную дату сжатой истории, например "#define aci.DateEnd D'2010.01.01 00:00'".
5.7. Ближайший фрейм с датой открытия, предшествующей данной дате, будет являться конечным фреймом профиля P1.
5.8. Ближайший фрейм с датой открытия, последующей за данной датой, будет являться начальным фреймом профиля P2.
5.9. Нажмите <F5> для компиляции кода.
5.10. Нажмите <F4> для возврата в MetaTrader.
5.11. Запустите скрипт "AT5.MQ4".
5.12. По завершении работы AT5 создается вспомогательный файл "XXXXXX.CSV", где "XXXXXX" - название торгового символа.
5.13. Данный файл содержит профиль P1 данного торгового символа и находится в папке "%MT4%/experts/files".
5.14. Установите в окне "Сервис/Настройки/Графики":
      5.14.1. "Макс. баров в истории" больше предельного ожидаемого количества фреймов в профиле P2, например, 500000;
      5.14.2. "Макс. баров в окне" такое же число, 500000 в данном случае.
5.15. Закройте и снова запустите терминал.
5.16. Наложите значок "AIS5TM" на график.
5.17. Появится окно "AIS5TM" с вкладками "Общие" и "Входные параметры".
5.18. На вкладке "Общие" окна "AIS5TM":
      5.18.1. в группе "Общие":
              5.18.1.1. выберите "позиции"="Long & Short",
              5.18.1.1. остальные настройки оставьте без изменений;
      5.18.2. в группе "Автоматическая торговля":
              5.18.2.1. поставьте галочку "Разрешить советнику торговать"="+",
              5.18.2.2. снимите галочку с "Ручное подтверждение";
      5.18.3. в группе "Безопасность" оставьте все без изменений.
5.19. На вкладке "Входные параметры" окна "AIS5TM":
      5.19.1. проверьте, что значение переменной "aes.Symbol" совпадает с символом графика;
      5.19.2. проверьте значения других переменных.
5.20. Нажмите кнопку [OK] окна "AIS5TM".
5.21. В правом верхнем углу экрана появится улыбающийся значок "AIS5TM".
5.22. AIS5 Trade Machine работает.
5.23. Для отображения профилей рынка установите в окне свойств графика "Смещение графика = Вкл".
5.24. Видимая ширина рыночных профилей зависит от размера смещения. 
5.25. Подготовка к работе завершена.


6. Управление

6.1. Нажмите <F3> для вызова окна "Глобальные переменные".
6.2. В окне появятся множество элементов управления с префиксом "AIS50003.Setup.".
6.3. Значения "AIS50003.Setup.5.3.PlotTimeBorders"="+1/-1" разрешают/запрещают построение временных границ профилей.
6.4. Значения "AIS50003.Setup.5.4.PlotZoneLevels"="+1/-1" разрешают/запрещают построение ценовых границ зон.
6.5. Значения "AIS50003.Setup.5.5.PlotProfiles"="+1/-1" разрешают/запрещают построение профилей.
6.6. Для пересчета и перестроения рыночных профилей установите "AIS50003.Setup.6.1.ProfileReset" = "1".
6.7. Для изменения начального смещения от нуля и шага зон:
     6.7.1. установите требуемое значение "AIS50003.Setup.7.1.ZoneBasePoints" для изменения начального смещения;
     6.7.2. установите требуемое значение "AIS50003.Setup.7.2.ZoneStepPoints" для изменения шага зон;
     6.7.3. установите значение "AIS50003.Setup.6.2.ZoneReset" = "1" для перестроения зон.


7. Заключение

7.1. Всегда проверяйте, что Вы используете новейшую модификацию AIS5 Trade Machine.
7.2. Новейшие модификации находятся по ссылке http://codebase.mql4.com/ru/6162.

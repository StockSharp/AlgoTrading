AIS4 Trade Machine


Номер выпуска: 40000
Дата  выпуска: 2009.04.07


Руководство пользователя


Содержание

1. Введение
2. Установка
3. Управление
4. Свойства
5. Заключение
Приложение 1


1. Введение

1.1. AIS4 Trade Machine представляет собой MQL4 программу для терминала MetaTrader 4.
1.2. Основные свойства:
     1.2.1. ручная торговля в реальном времени с автоматическим управлением рисками;
     1.2.2. ручная торговля в Тестере терминала MetaTrader 4.
1.3. Правильная работа AIS4 Trade Machine достигается при соблюдении следующих условий:
     1.3.1. в одном терминале допускается работа только одного экземпляра AIS4 Trade Machine;
     1.3.2. в терминале должны отсутствовать программы, способные удалять чужие глобальные переменные;
     1.3.3. на рабочем графике должны отсутствовать индикаторы, способные удалять чужие графические объекты.
1.4. AIS4 Trade Machine произведена из AIS3 Trading Robot Template.


2. Установка

2.1. AIS4 Trade Machine это:
     2.1.1. "AIS4TM.MQ4" - файл с MQL4 кодом;
     2.1.2. "AIS4TM.EX4" - исполняемый файл.
2.2. Скачайте файл "AIS4TM.MQ4".
2.3. Найдите папку терминала MetaTrader 4, далее называемую "%MT4%".
2.4. В большинстве случаев терминал MetaTrader 4 находится в папке "C:/Program Files/MetaTrader 4".
2.5. Переместите файл "AIS4TM.MQ4" в папку "%MT4%/experts".
2.6. Запустите терминал MetaTrader 4, далее называемый "MetaTrader".
2.7. Нажмите <F4> для запуска MetaEditor.
2.8. В MetaEditor нажмите <Ctrl-O> для вызова окна "Открыть".
2.9. Откройте файл "AIS4TM.MQ4" в папке "%MT4%/experts".
2.10. Проверьте в строке 7 номер модификации.
2.11. Проверьте в строке 8 дату выпуска.
2.12. Нажмите <F5> для компиляции кода.
2.13. Нажмите <F4> для возврата в MetaTrader.
2.14. В MetaTrader нажмите <Ctrl-O> для вызова окна "Настройки".
2.15. На вкладке "Советника" окна "Настройки":
      2.15.1. поставьте галочку "Включить советники"="+";
      2.15.2. "Отключить советники при смене счета" оставьте без изменений;
      2.15.3. "Отключить советники при смене счета" оставьте без изменений;
      2.15.4. поставьте галочку "Разрешить советнику торговать"="+";
      2.15.5. снимите галочку с "Ручное подтверждение";
      2.15.6. остальные настройки оставьте без изменений.
2.16. Нажмите кнопку [OK] окна "Настройки".
2.17. Нажмите <Ctrl-N> для вызова окна "Навигатор".
2.18. Перейдите на вкладку "Общие" окна "Навигатор".
2.19. Откройте список "Советники".
2.20. Найдите "AIS4TM".
2.21. "AIS4TM" - это сокращенное имя исполняемого файла "AIS4TM.EX4".
2.22. Наложите ярлык "AIS4TM" на график "EURUSD".
2.23. Появится окно "AIS4TM" с вкладками "Общие" и "Входные параметры".
2.24. На вкладке "Общие" окна "AIS4TM":
      2.24.1. в группе "Общие":
              2.24.1.1. выберите "позиции"="Long & Short",
              2.24.1.1. остальные настройки оставьте без изменений;
      2.24.2. в группе "Автоматическая торговля":
              2.24.2.1. поставьте галочку "Разрешить советнику торговать"="+",
              2.24.2.2. снимите галочку с "Ручное подтверждение";
      2.24.3. в группе "Безопасность" оставьте все без изменений.
2.25. На вкладке "Входные параметры" окна "AIS4TM":
      2.25.1. проверьте, что значение переменной "aes.Symbol" совпадает с символом графика;
      2.25.2. проверьте значения других переменных.
2.26. Нажмите кнопку [OK] окна "AIS4TM".
2.27. В правом верхнем углу экрана появится улыбающийся значок "AIS4TM".
2.28. AIS4 Trade Machine работает.
2.29. Установка завершена.


3. Управление

3.1. Нажмите <F3> для вызова окна "Глобальные переменные".
3.2. В окне появятся 18 элементов управления:
     3.2.1. "AIS40000.Setup.1.1.AccountReserve" управляет размером резерва депозита;
     3.2.2. "AIS40000.Setup.1.2.OrderReserve" управляет размером резерва на сделку;
     3.2.3. "AIS40000.Setup.2.1.Trading" разрешает и запрещает торговые функции:
             3.2.3.1. значение "1" разрешает торговые функции,
             3.2.3.2. значение "0" запрещает торговые функции;
     3.2.4. "AIS40000.Setup.2.2.Timeframe.1" зарезервировано;
     3.2.5. "AIS40000.Setup.2.3.Timeframe.2" зарезервировано;
     3.2.6. "AIS40000.Setup.2.4.Parameter.1" зарезервировано;
     3.2.7. "AIS40000.Setup.2.5.Parameter.2" зарезервировано;
     3.2.8. "AIS40000.Setup.2.6.Parameter.3" зарезервировано;
     3.2.9. "AIS40000.Setup.3.1.Monitor" разрешает и запрещает Функцию мониторинга;
             3.2.7.1. значение "1" разрешает Функцию мониторинга,
             3.2.7.2. значение "0" запрещает Функцию мониторинга;
     3.2.10. "AIS40000.Setup.3.2.FontSize" управляет размером шрифта панели мониторинга;
     3.2.11. "AIS40000.Setup.3.3.FontColor" управляет цветом шрифта панели мониторинга;
     3.2.12. "AIS40000.Setup.3.4.LineSpace" управляет межстрочным интервалом панели мониторинга;
     3.2.13. "AIS40000.Setup.3.5.PositionX" управляет положением панели мониторинга по горизонтали;
     3.2.14. "AIS40000.Setup.3.6.PositionY" управляет положением панели мониторинга по вертикали.
     3.2.15. "AIS40000.Setup.4.1.OrderSelect" управляет выбором ордера для отображения в панели мониторинга:
             3.2.15.1. значение "0" устанавливает выбор по "magic" номеру "aei.OrderID = 40000",
             3.2.15.2. другие значения устанавливают выбор по номеру в списке открытых ордеров;
     3.2.16. "AIS40000.Setup.5.1.Command" управляет торговыми функциями:
             3.2.16.1. значение "0" является командой "Buy",
             3.2.16.2. значение "1" является командой "Sell",
             3.2.16.3. значение "6" является командой "Modify",
             3.2.16.4. значение "7" является командой "Close",
             3.2.16.5. значение "-1" является командой "Wait",
             3.2.16.6. после выполнения любой команды устанавливается значение "-1";
     3.2.17. "AIS40000.Setup.5.2.Take" управляет уровнем "Take Profit":
             3.2.17.1. положительные значения используются при попытках установки или модификации ордеров,
             3.2.17.2. значение "-1" при модификации оставляет текущий уровень "Take Profit" без изменения;
     3.2.18. "AIS40000.Setup.5.3.Stop" управляет уровнем "Stop Loss" :
             3.2.18.1. положительные значения используются при попыткaх установки или модификации ордеров,
             3.2.18.2. значение "-1" при модификации оставляет текущий уровень "Stop Loss" без изменения.


4. Свойства

4.1. Торговля:
     4.1.1. торговля ведется только по одному заданному торговому символу;
     4.1.2. рабочий торговый символ задается на вкладке "Входные параметры" окна "AIS4TM";
     4.1.3. AIS4 Trade Machine работает только с одним ордером;
     4.1.4. опознавательный номер ордера совпадает с номером модификации AIS4 Trade Machine;
     4.1.5. опознавательный номер ордера "aei.OrderID" можно изменить на вкладке "Входные параметры" окна "AIS4TM";
     4.1.6. наличие на счете других ордеров с другими опознавательными номерами допускается;
     4.1.7. команды "Buy" и "Sell":
            4.1.7.1. нажмите <F3> для вызова окна глобальных переменных с меню управления;
            4.1.7.2. нажмите <End> для перемещения в конец меню;
            4.1.7.3. нажмите <Up> для перемещения на строку "AIS40000.Setup.5.3.Stop";
            4.1.7.4. нажмите <F3> для ввода значения "AIS40000.Setup.5.3.Stop";
            4.1.7.5. введите цену "Stop Loss";
            4.1.7.6. нажмите <Enter> для завершения ввода значения "AIS40000.Setup.5.3.Stop"
            4.1.7.7. нажмите <Up> для перемещения на строку "AIS40000.Setup.5.2.Take";
            4.1.7.8. нажмите <F3> для ввода значения "AIS40000.Setup.5.2.Take;
            4.1.7.9. введите цену "Take Profit;
            4.1.7.10. нажмите <Enter> для завершения ввода значения "AIS40000.Setup.5.2.Take";
            4.1.7.11. нажмите <Up> для перемещения на строку "AIS40000.Setup.5.1.Command;
            4.1.7.12. нажмите <F3> для ввода значения "AIS40000.Setup.5.1.Command";
            4.1.7.13. введите значение "0" для команды "Buy" или "1" для команды "Sell";
            4.1.8.14. нажмите <Enter> для завершения ввода значения "AIS40000.Setup.5.1.Command";
            4.1.7.15. произойдет попытка отправки ордера;
            4.1.7.16. произойдет оповещение о попытке отправки ордера:
                      4.1.7.16.1. в строке заголовка AIS4 Trade Machine,
                      4.1.7.16.2. в окне "Alert",
                      4.1.7.16.3. на вкладках "Journal" Терминала или Тестера;
            4.1.7.17. размер операции вычисляется автоматически исходя из:
                      4.1.7.17.1. размера резерва на сделку,
                      4.1.7.17.2. дистанции между ценой открытия ордера и уровня "Stop Loss";
     4.1.8. команда "Modify":
            4.1.8.1. нажмите <F3> для вызова окна глобальных переменных с меню управления;
            4.1.8.2. нажмите <End> для перемещения в конец меню;
            4.1.8.3. нажмите <Up> для перемещения на строку "AIS40000.Setup.5.3.Stop";
            4.1.8.4. нажмите <F3> для ввода значения "AIS40000.Setup.5.3.Stop";
            4.1.8.5. введите цену "Stop Loss";
            4.1.8.6. нажмите <Enter> для завершения ввода значения "AIS40000.Setup.5.3.Stop"
            4.1.8.7. нажмите <Up> для перемещения на строку "AIS40000.Setup.5.2.Take";
            4.1.8.8. нажмите <F3> для ввода значения "AIS40000.Setup.5.2.Take;
            4.1.8.9. введите цену "Take Profit";
            4.1.8.10. нажмите <Enter> для завершения ввода значения "AIS40000.Setup.5.2.Take";
            4.1.8.11. нажмите <Up> для перемещения на строку "AIS40000.Setup.5.1.Command;
            4.1.8.12. нажмите <F3> для ввода значения "AIS40000.Setup.5.1.Command";
            4.1.8.13. введите значение "6" для команды "Modify";
            4.1.8.14. нажмите <Enter> для завершения ввода значения "AIS40000.Setup.5.1.Command";
            4.1.8.15. произойдет попытка модификации ордера;
            4.1.8.16. произойдет оповещение о попытке модификации ордера согласно п.4.1.7.16;
            4.1.8.17. значения "-1" для уровней "Stop Loss" и "Take Profit" оставляют их без изменения;
     4.1.9. команда "Close":
            4.1.9.1. нажмите <F3> для вызова окна глобальных переменных с меню управления;
            4.1.9.2. переместитесь на строку "AIS40000.Setup.5.1.Command;
            4.1.9.3. нажмите <F3> для ввода значения "AIS40000.Setup.5.1.Command";
            4.1.9.4. введите значение "7" для команды "Close";
            4.1.8.5. нажмите <Enter> для завершения ввода значения "AIS40000.Setup.5.1.Command";
            4.1.9.6. произойдет попытка закрытия ордера;
            4.1.9.7. произойдет оповещение о попытке закрытия ордера согласно п.4.1.7.16.
4.2. Автоматическое управление рисками:
     4.2.1. автоматическое управление рисками защищает капитал инвестора от возможных потерь;
     4.2.2. настройка управления рисками заключается в определении значений набора двух следующих переменных:
            4.2.2.1. "aed.AccountReserve" - размер резерва депозита, строка 36 файла "AIS4TM.MQ4";
            4.2.2.1. "aed.OrderReserve"   - размер резерва на сделку, строка 37 файла "AIS4TM.MQ4";
     4.2.3. изменение настроек управления рисками производится тремя способами:
            4.2.3.1. на вкладке "Входные параметры" окна "AIS4TM" при первом запуске AIS4 Trade Machine,
            4.2.3.2. на той же вкладке при нажатии <F7> с последующей переинициализацией,
            4.2.3.3. посредством элементов управления из окна "Глобальные переменные" без переинициализации;
     4.2.4. переменная "aed.AccountReserve" означает размер резерва депозита на возможные потери;
     4.2.5. переменная "aed.AccountReserve" определяет предел снижения депозита "Relative drawdon";
     4.2.6. резерв депозита служит защитой капитала инвестора от рыночных рисков;
     4.2.7. переменная "aed.OrderReserve" означает размер резерва на возможные потери, выделяемого на каждую сделку;
     4.2.8. переменная "aed.OrderReserve" ограничивает размер принимаемых рыночных рисков на сделку;
     4.2.9. резерв на сделку служит защитой резерва депозита от рыночных рисков;
     4.2.10. назначение и порядок выбора размеров вышеуказанных резервов более подробно раскрывается в Приложении 1;
     4.2.11. стандартные настройки управления рисками:
             4.2.11.1. резерв депозита 20%,
             4.2.11.2. резерв на сделку 4%.
4.3. Режим "SuperTrainer":
     4.3.1. сохраните окно с требуемыми индикаторами как шаблон "AIS4TM.TPL";
     4.3.2. нажмите <Ctrl-R> для вызова окна Тестера;
     4.3.3. в строке "Expert Advisers" выберите "AIS4TM";
     4.3.4. установите режим "Visual mode";
     4.3.5. установите требуемый диапазон дат;
     4.3.6. установите желаемый рабочий таймфрейм;
     4.3.7. в окне "Expert properties" установите требуемые настройки тестера;
     4.3.8. в окне "Expert properties" установите требуемые значения входных параметров AIS4 Trade Machine;
     4.3.9. проверьте соответствие рабочего символа Тестера и AIS4 Trade Machine;
     4.3.10. проверьте наличие и полноту истории по данному рабочему символу;
     4.3.11. нажмите кнопку "Start" Тестера;
     4.3.12. торгуйте в Тестера так же, как и в реальном времени.
4.4. Функция мониторинга:
     4.4.1. функция мониторинга обеспечивает отображение показателей работы AIS4 Trade Machine;
     4.4.2. панель мониторинга состоит из следующих частей:
            4.4.2.1. заголовок с номером модификации AIS4 Trade Machine;
            4.4.2.2. строка сообщений AIS4 Trade Machine в строке с заголовком;
            4.4.2.3. 5 кластеров данных:
                     4.4.2.3.1. кластер "Client-Server",
                     4.4.2.3.2. кластер "Balance",
                     4.4.2.3.3. кластер "Open Position",
                     4.4.2.3.4. кластер "Leverage/Contract";
                     4.4.2.3.5. резервный,
     4.4.3. данные кластера "Client-Server":
            4.4.3.1. "Client Time":
                     4.4.3.1.1. локальное время AIS4 Trade Machine,
                     4.4.3.1.2. продолжительность работы AIS4 Trade Machine после последней инициализации,
                     4.4.3.1.3. количество открытых ордеров за период работы в формате "Buy+Sell=Total",
                     4.4.3.1.4. количество трейлинг-стопов за период работы;
            4.4.3.2. "Client Name" - имя владельца счета;
            4.4.3.3. "Server Name" - название сервера, на котором открыт счет;
            4.4.3.4. "Server Time":
                     4.4.3.4.1. время сервера,
                     4.4.3.4.2. длительность ожидания последнего прихода котировок,
                     4.4.3.4.3. количество запусков главной программы AIS4 Trade Machine,
                     4.4.3.4.4. количество попыток отправки ордера,
                     4.4.3.4.5. количество попыток трейлинга;
     4.4.4. данные кластера "Balance":
            4.4.4.1. "Capital":
                     4.4.4.1.1. величина капитала в валюте депозита,
                     4.4.4.1.2. величина капитала в процентах от пиковой величины средств на счете,
                     4.4.4.1.3. чистый прирост капитала за промежуток времени после последней инициализации,
                     4.4.4.1.4. относительный прирост капитала за промежуток времени после последней инициализации;
            4.4.4.2. "Reserve" - величина резерва депозита:
                     4.4.4.2.1. в валюте депозита,
                     4.4.4.2.2. в процентах от пикового значения резерва депозита;
            4.4.4.3. "Peak Equity" - пиковая величина средств на счете:
                     4.4.4.3.1. в валюте депозита,
                     4.4.4.3.2. всегда 100%,
                     4.4.4.3.3. интервал времени после последнего изменения пиковой величины средств на счете;
            4.4.4.4. "Drawdown" - текущее снижение средств на счете от пиковой величины средств на счете:
                     4.4.4.4.1. в валюте депозита,
                     4.4.4.4.2. в процентах от пиковой величины средств на счете;
            4.4.4.5. "Account Equity" - текущее значение суммы средств на счете:
                     4.4.4.5.1. в валюте депозита,
                     4.4.4.5.2. в процентах от пиковой величины средств на счете,
                     4.4.4.5.3. чистый прирост средств на счете за промежуток времени после последней инициализации,
                     4.4.4.5.4. относительный прирост средств на счете за промежуток времени после последней инициализации;
            4.4.4.6. "Free margin" - сведения о состоянии свободных средств:
                     4.4.4.6.1. текущее значение свободных от залога средств,
                     4.4.4.6.2. текущий уровень залога,
                     4.4.4.6.3. уровень "Stop Out" в денежных единицах,
                     4.4.4.6.4. уровень "Stop Out" в относительных единицах;
     4.4.5. данные кластера "Open Position":
            4.4.5.1. первая строка содержит данные об открытой позиции:
                     4.4.5.1.1. опознавательный номер ордера "magic number",
                     4.4.5.1.2. номер тикета,
                     4.4.5.1.3. тип ордера,
                     4.4.5.1.4. размер позиции в лотах,
                     4.4.5.1.5. стандартный размер лота,
                     4.4.5.1.6. размер залога в пунктах,
                     4.4.5.1.7	цена одного пункта котировки,
                     4.4.5.1.8. интервал времени после открытия ордера;
            4.4.5.2. "Profit" - прибыль ордера:
                     4.4.5.2.1. в валюте депозита,
                     4.4.5.2.2. в пунктах,
                     4.4.5.2.3. в процентах от величины средств на счете,
                     4.4.5.2.4. цена открытия ордера;
            4.4.5.3. "Target" - дистанция от цены открытия до цены TakeProfit:
                     4.4.5.3.1. в валюте депозита,
                     4.4.5.3.2. в пунктах,
                     4.4.5.3.3. в процентах от величины средств на счете,
                     4.4.5.3.4. цена "Take Profit";
            4.4.5.4. "VAR" - дистанция от цены открытия до цены StopLoss:
                     4.4.5.4.1. в валюте депозита,
                     4.4.5.4.2. в пунктах,
                     4.4.5.4.3. в процентах от величины средств на счете,
                     4.4.5.4.4. цена "Stop Loss";
            4.4.5.5. "Limit"  - текущая величина резерва на сделку:
                     4.4.5.5.1. в валюте депозита,
                     4.4.5.5.2. в пунктах,
                     4.4.5.5.3. в процентах от величины средств на счете;
     4.4.6. данные кластерa "Leverage/Contract":
            4.4.6.1. первая строка "Leverage":
                     4.4.6.1.1. размер кредитного плеча,
                     4.4.6.1.2. размер залога для стандартого контракта размером 1 лот,
                     4.4.6.1.3. размер залога в пунктах,
                     4.4.6.1.4. цена одного пункта для стандартого контракта размером 1 лот;
            4.4.6.2. вторая строка "Contract":
                     4.4.6.2.1. стандартный размер лота,
                     4.4.6.2.2. минимальный размер контракта в лотах,
                     4.4.6.2.3. шак размера контракта в лотах,
                     4.4.6.2.4. максимальный размер контракта в лотах;
     4.4.7. резервный кластер предназначен для наполнения показателями встраиваемой торговой стратегии.


5. Заключение

5.1. Всегда проверяйте, что Вы используете новейшую модификацию AIS4 Trade Machine.
5.2. Новейшие модификации находятся по ссылке http://codebase.mql4.com/5479.




Приложение 1. Пример переговоров с инвестором

1. Управляющий. Имеются две системы А1, А2. Вот их характеристики, вот демо-отчеты, вот отчеты реалов.
2. Инвестор. Ознакомился. Выбираю А1.
3. Управляющий. Выберите: 1) размер резерва депозита; 2) размер резерва на сделку.
4. Инвестор. Поясните.
5. Управляющий.
   5.1. Размеры резервов измеряются в процентах от размера депозита.
   5.2. Пусть Вы открываете депозит на $100000.
   5.3. Пусть Вы устанавливаете резерв депозита в размере 20%.
   5.4. Следовательно, Ваш капитал равен $80000, резерв депозита $20000.
   5.5. Пусть открыта торговая позиция.
   5.6. Пусть депозит вырос до $110000.
   5.7. Тогда Ваш капитал равен $88000, резерв депозита $22000.
   5.8. Пусть депозит снизился до $105000.
   5.9. Тогда Ваш капитал равен $88000, резерв депозита $17000.
   5.10. Пусть депозит вырос до $200000.
   5.11. Тогда Ваш капитал равен $160000, резерв депозита $40000.
   5.12. Пусть далее депозит только снижался.
   5.13. При сумме депозита $180000 Ваш капитал равен $160000, резерв депозита $20000.
   5.14. При сумме депозита $170000 Ваш капитал равен $160000, резерв депозита $10000.
   5.15. При сумме депозита $160000 Ваш капитал равен $160000, резерв депозита исчерпан, торговля остановлена.
   5.16. При остановке торговли по Вашему приказу резерв депозита восстанавливается.
   5.17. Сумма депозита при остановке становится Вашим капиталом.
   5.18. Пусть торговля остановлена при сумме депозита $170000, тогда Ваш капитал равен $170000.
   5.19. Таким образом, резерв депозита защищает Ваш капитал от возможных потерь.
   5.20. Все наши системы управляют резервами автоматически.
6. Инвестор. Понятно.
7. Управляющий.
   7.1. Резерв сделки защищает резерв депозита по вышеуказанной схеме.
   7.2. От размера резерва на сделку зависит ожидаемая продолжительность работы системы.
   7.3. Пусть Вы устанавливаете резерв на сделку 10% и резерв депозита в размере 20%.
   7.4. Тогда система А1 может выдержать последовательность примерно 2 убыточных сделок подряд.
   7.5. Из отчетов видно, что для системы А1 более длинные последовательности возникают примерно 4 раза в год.
   7.6. Пусть Вы устанавливаете резерв на сделку  5% и резерв депозита в размере 20%.
   7.7. Тогда система А1 может выдержать последовательность примерно 4 убыточных сделок подряд.
   7.8. Из отчетов видно, что для системы А1 более длинные последовательности возникают примерно 1 раз в год.
   7.9. От размера резерва сделки также зависят размеры сделок и, следовательно, суммы ожидаемых доходов от них.
   7.10. Порядок расчета размера сделки можно посмотреть здесь в строках 192-216.
8. Инвестор. Понятно. Я устанавливаю резерв депозита 20% и резерв на сделку 4%.
9. Управляющий. При данном размере резерва на сделку для системы А1 требуется депозит в размере от $50000.
10. Инвестор. Сервер *******, логин *******, пароль *******, сумма $100000, с другими условиями договора согласен.
11. Управляющий. Мастер-пароль будет изменен, Ваш инвест-пароль А1234.

//@version=5
strategy("Tri-Monthly BTC Swing Strategy", overlay=true, default_qty_type=strategy.percent_of_equity, default_qty_value=100)

// === Indicators ===
ema200 = ta.ema(close, 200)
macdLine = ta.ema(close, 12) - ta.ema(close, 26)
signal = ta.ema(macdLine, 9)
rsi = ta.rsi(close, 14)

// === Time Filter (1 trade per 3 months) ===
var float last_trade_time = na
trade_interval = 90 * 24 * 60 * 60 * 1000  // 90 days in ms

// === Entry Condition ===
can_trade = (na(last_trade_time) or (time - last_trade_time > trade_interval))
long_condition = close > ema200 and macdLine > signal and rsi > 50 and can_trade

// === Exit Condition ===
exit_condition = macdLine < signal or rsi < 50

// === Execute Trades ===
if (long_condition)
    strategy.entry("Long", strategy.long)
    last_trade_time := time

if (exit_condition)
    strategy.close("Long")

// === Plotting ===
plot(ema200, title="EMA 200", color=color.orange)
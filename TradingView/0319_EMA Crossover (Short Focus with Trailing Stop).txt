//@version=6
strategy("EMA Crossover (Short Focus with Trailing Stop)", overlay=true, default_qty_type=strategy.percent_of_equity, default_qty_value=20)

// Define EMA and SMA lengths
shortEMALength = 13
midEMALength = 25
longEMALength = 33
sma100Length = 100
sma200Length = 200

// Calculate EMAs
shortEMA = ta.ema(close, shortEMALength)
midEMA = ta.ema(close, midEMALength)
longEMA = ta.ema(close, longEMALength)

// Calculate SMAs
sma100 = ta.sma(close, sma100Length)
sma200 = ta.sma(close, sma200Length)

// Plot EMAs and SMAs
plot(shortEMA, title="13 EMA", color=color.blue)
plot(midEMA, title="25 EMA", color=color.red)
plot(longEMA, title="33 EMA", color=color.green)
plot(sma100, title="100 SMA", color=color.purple)
plot(sma200, title="200 SMA", color=color.orange)

// ENTRY CONDITIONS (Fast & Real-Time Execution)
longCondition  = shortEMA >= longEMA and strategy.position_size <= 0
shortCondition = shortEMA <= longEMA and strategy.position_size >= 0

// EXIT CONDITIONS
exitLong  = shortEMA < longEMA  // Exit long when 13 EMA falls below 33 EMA
exitShort = shortEMA > midEMA   // Exit short when 13 EMA rises above 25 EMA

// EXECUTE LONG
if (longCondition)
    strategy.close("Short", comment="Close Short for Long Entry")
    strategy.entry("Long", strategy.long, alert_message="FAST Long Entry: 13 EMA >= 33 EMA")

// EXECUTE SHORT
if (shortCondition)
    strategy.close("Long", comment="Close Long for Short Entry")
    strategy.entry("Short", strategy.short, alert_message="FAST Short Entry: 13 EMA <= 33 EMA")

// Trailing Stop Parameters
trailOffsetPts = 2
trail = 10

// Trailing Stop for Longs
if (strategy.position_size > 0)
    strategy.exit("Long Trail Exit", from_entry="Long", trail_offset=trailOffsetPts, trail_price=high - trail, comment="Long Trailing Stop")

// Trailing Stop for Shorts
if (strategy.position_size < 0)
    strategy.exit("Short Trail Exit", from_entry="Short", trail_offset=trailOffsetPts, trail_price=low + trail, comment="Short Trailing Stop")

// EXIT STRATEGY
if (exitLong)
    strategy.close("Long", comment="Exit Long: 13 EMA < 33 EMA")

if (exitShort)
    strategy.close("Short", comment="Exit Short: 13 EMA > 25 EMA")
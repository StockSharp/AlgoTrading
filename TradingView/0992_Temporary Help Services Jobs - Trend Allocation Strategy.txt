//@version=6
strategy("Temporary Help Services Jobs - Trend Allocation Strategy", overlay=false, initial_capital=30000, pyramiding=0, commission_type=strategy.commission.cash_per_contract, commission_value=0.05, slippage=1)

// --- Request FRED Data ---
temphelps = request.security("FRED:TEMPHELPS", "M", close, lookahead=barmerge.lookahead_off)

// Skip further calculations if data is missing
if not na(temphelps)
    // --- Calculate Trend ---
    is_trend_up = temphelps > temphelps[1]  // TEMPHELPS is higher than the previous month
    is_trend_down = temphelps < temphelps[1]  // TEMPHELPS is lower than the previous month

    // --- Entry Condition ---
    if (is_trend_up and strategy.position_size == 0)
        strategy.entry("Long", strategy.long)

    // --- Exit Condition ---
    if (is_trend_down and strategy.position_size > 0)
        strategy.close("Long", comment="Exit: Negative Trend")

plot(temphelps, style=plot.style_linebr, color= color.green)
// This Pine Script™ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © Protervus


//@version=5
// @description The MarketHolidays library compiles market holidays (including historical special market closures) into arrays, which can then be utilized in TradingView indicators and strategies to account for non-trading days. The datasets were split into different libraries to overcome compiling limitations, streamline the process of removing specific time frames if not needed, and to enhance code execution speed. The timestamps are generated using a custom Python script that employs the 'pandas_market_calendars' library. To build your own set of arrays, you can find the script and instructions at https://github.com/Labiri/PineScript-Market-Holidays/.
library("MarketHolidays")
import Protervus/holidays_2020to2025/1 as holidays_2020to2025
import Protervus/holidays_2015to2020/1 as holidays_2015to2020
import Protervus/holidays_2010to2015/1 as holidays_2010to2015
import Protervus/holidays_2005to2010/1 as holidays_2005to2010
import Protervus/holidays_2000to2005/1 as holidays_2000to2005
import Protervus/holidays_1990to2000/1 as holidays_1990to2000
import Protervus/holidays_1980to1990/1 as holidays_1980to1990
import Protervus/holidays_1970to1980/1 as holidays_1970to1980
import Protervus/holidays_1962to1970/1 as holidays_1962to1970


// Note: for accurate plotting in the future using bar_index, calculate the number of bars between specific dates. Then, subtract weekends and any non-trading days from this array from your calculations to account for days when the market is not active.

// @function The getHolidays function aggregates holiday data from different time periods to create a single array with market holidays for a specified country.
// @param _country The country code for which to retrieve market holidays. Accepts syminfo.country or pre-set country code in ISO 3166-1 alpha-2 format.
// @returns An array of timestamps of market holidays \ non-trading days for the given country.
export getHolidays(string _country) =>
    var int[] allHolidays = array.new_int()
    allHolidays := array.concat(allHolidays, holidays_2020to2025.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_2015to2020.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_2010to2015.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_2005to2010.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_2000to2005.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_1990to2000.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_1980to1990.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_1970to1980.holidays(_country))
    allHolidays := array.concat(allHolidays, holidays_1962to1970.holidays(_country))
    allHolidays
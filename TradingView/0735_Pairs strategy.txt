// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© PineQuant

//@version=5
strategy("Pairs strategy", overlay=true, margin_long=100, margin_short=100)

downbar = close < open
upbar   = close > open

SymbolClose = request.security("SMH", timeframe.period, close)
SymbolOpen  = request.security("SMH", timeframe.period, open)

//Symbol2Close = request.security("BTCUSDT", timeframe.period, close)
//Symbol2Open = request.security("BTCUSDT", timeframe.period, close)

Filter3 = SymbolClose > SymbolOpen
//Filter2 = Symbol2Close > Symbol2Open
Filter4 = SymbolClose < SymbolOpen

Buy = Filter3 and downbar //and Filter2
Sell = close > high[1]


if Buy and strategy.position_size == 0
    strategy.entry("Buy", strategy.long)

if Sell and strategy.position_size > 0
    strategy.close("Buy")
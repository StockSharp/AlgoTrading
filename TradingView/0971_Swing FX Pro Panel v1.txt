//@version=5
strategy("Swing FX Pro Panel v1", overlay=true, default_qty_type=strategy.percent_of_equity, default_qty_value=1)

// === INPUTY ===
initialCapital = input.float(1000, "Initial Capital (€)")
riskPerTrade = input.float(2, "Risk per Trade (%)")
periodMonths = input.int(6, "Analysis Period (months)")

// === STRATEGIA DEMO (np. EMA CROSS) ===
emaFast = ta.ema(close, 20)
emaSlow = ta.ema(close, 50)

longSignal = ta.crossover(emaFast, emaSlow)
shortSignal = ta.crossunder(emaFast, emaSlow)

if (longSignal)
    strategy.entry("Long", strategy.long)
if (shortSignal)
    strategy.entry("Short", strategy.short)

strategy.exit("Exit Long", from_entry="Long", profit=300, loss=150)
strategy.exit("Exit Short", from_entry="Short", profit=300, loss=150)

// === STATYSTYKI ===
roiPerc = (strategy.netprofit / initialCapital) * 100
maxDD = strategy.max_drawdown
totalTrades = strategy.closedtrades
winTrades = strategy.wintrades
lossTrades = totalTrades - winTrades
winRatio = totalTrades > 0 ? winTrades / totalTrades * 100 : 0

// === PANEL ===
var label statsPanel = na
label.delete(statsPanel)

textStats =
     "Initial Capital: €" + str.tostring(initialCapital, "#.##") + "\n" +
     "Risk per Trade: " + str.tostring(riskPerTrade, "#.##") + "%\n" +
     "Period: " + str.tostring(periodMonths) + " months\n\n" +
     "Total Trades: " + str.tostring(totalTrades) + "\n" +
     "Wins: " + str.tostring(winTrades) + "\n" +
     "Losses: " + str.tostring(lossTrades) + "\n" +
     "Win Ratio: " + str.tostring(winRatio, "#.##") + "%\n" +
     "ROI: " + str.tostring(roiPerc, "#.##") + "%\n" +
     "Max Drawdown: €" + str.tostring(maxDD, "#.##")

statsPanel := label.new(x=bar_index, y=na, text=textStats,
     xloc=xloc.bar_index, yloc=yloc.price,
     style=label.style_label_right, size=size.normal,
     textcolor=color.white, color=color.new(color.blue, 60))

label.set_xy(statsPanel, bar_index + 20, high + 2 * syminfo.mintick)
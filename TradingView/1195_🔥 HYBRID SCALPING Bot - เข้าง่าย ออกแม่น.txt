//@version=5
strategy("ğŸ”¥ HYBRID SCALPING Bot - à¹€à¸‚à¹‰à¸²à¸‡à¹ˆà¸²à¸¢ à¸­à¸­à¸à¹à¸¡à¹ˆà¸™", overlay=true, max_labels_count=50, calc_on_order_fills=false, process_orders_on_close=true, pyramiding=0)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“‹ à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹à¸šà¸š Hybrid - à¸£à¸§à¸¡à¸ˆà¸¸à¸”à¹€à¸”à¹ˆà¸™à¸—à¸±à¹‰à¸‡à¸ªà¸­à¸‡
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸—à¸£à¸” - Scalping Style
group_trading = "âš¡ à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Scalping"
daily_trade_limit = input.int(15, "à¸¥à¸´à¸¡à¸´à¸•à¹€à¸—à¸£à¸”à¸•à¹ˆà¸­à¸§à¸±à¸™", minval=5, maxval=50, tooltip="Scalping = à¹€à¸—à¸£à¸”à¸šà¹ˆà¸­à¸¢", group=group_trading)
tp_percent = input.float(0.8, "Take Profit %", minval=0.3, maxval=3.0, tooltip="à¹€à¸¥à¹‡à¸à¹à¸•à¹ˆà¸Šà¸±à¸§à¸£à¹Œ", group=group_trading)
sl_percent = input.float(0.6, "Stop Loss %", minval=0.3, maxval=2.0, tooltip="à¸•à¸±à¸”à¸‚à¸²à¸”à¸—à¸¸à¸™à¹€à¸£à¹‡à¸§", group=group_trading)

// à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¸à¸²à¸£à¸­à¸­à¸à¹€à¸—à¸£à¸” - à¸ˆà¸²à¸ Scalping Bot
use_quick_exit = input.bool(true, "à¸­à¸­à¸à¹€à¸—à¸£à¸”à¹€à¸£à¹‡à¸§", tooltip="à¸­à¸­à¸à¹€à¸¡à¸·à¹ˆà¸­ RSI à¸à¸¥à¸±à¸šà¸•à¸±à¸§", group=group_trading)
use_trailing_stop = input.bool(true, "à¹ƒà¸Šà¹‰ Trailing Stop", tooltip="à¸¥à¹‡à¸­à¸„à¸à¸³à¹„à¸£à¹€à¸¡à¸·à¹ˆà¸­à¸‚à¸¶à¹‰à¸™", group=group_trading)
trailing_percent = input.float(0.4, "Trailing Stop %", minval=0.2, maxval=1.0, group=group_trading)

// à¸„à¸§à¸²à¸¡à¸¢à¸²à¸à¸‡à¹ˆà¸²à¸¢à¹ƒà¸™à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¹€à¸—à¸£à¸” - à¸ˆà¸²à¸ Debug Bot
group_sensitivity = "ğŸ¯ à¸„à¸§à¸²à¸¡à¸¢à¸²à¸à¸‡à¹ˆà¸²à¸¢à¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¹€à¸—à¸£à¸”"
signal_sensitivity = input.string("à¸­à¹ˆà¸­à¸™", "à¸£à¸°à¸”à¸±à¸šà¸„à¸§à¸²à¸¡à¸£à¸¸à¸™à¹à¸£à¸‡", options=["à¸‡à¹ˆà¸²à¸¢à¸¡à¸²à¸", "à¸­à¹ˆà¸­à¸™", "à¸à¸¥à¸²à¸‡", "à¹à¸£à¸‡"],
                                  tooltip="à¸‡à¹ˆà¸²à¸¢à¸¡à¸²à¸=à¹€à¸‚à¹‰à¸²à¹€à¸—à¸£à¸”à¸šà¹ˆà¸­à¸¢à¸ªà¸¸à¸”, à¹à¸£à¸‡=à¹à¸¡à¹ˆà¸™à¸¢à¸³à¸ªà¸¸à¸”", group=group_sensitivity)

// à¸Ÿà¸´à¸¥à¹€à¸•à¸­à¸£à¹Œà¹€à¸ªà¸£à¸´à¸¡ - à¸›à¸£à¸±à¸šà¹„à¸”à¹‰à¸•à¸²à¸¡à¸£à¸°à¸”à¸±à¸š
use_trend_filter = input.bool(true, "à¹ƒà¸Šà¹‰à¸Ÿà¸´à¸¥à¹€à¸•à¸­à¸£à¹Œà¹€à¸—à¸£à¸™à¸”à¹Œ", tooltip="à¹€à¸—à¸£à¸”à¸•à¸²à¸¡à¹€à¸—à¸£à¸™à¸”à¹Œà¹€à¸—à¹ˆà¸²à¸™à¸±à¹‰à¸™", group=group_sensitivity)
use_volume_filter = input.bool(false, "à¹ƒà¸Šà¹‰à¸Ÿà¸´à¸¥à¹€à¸•à¸­à¸£à¹Œ Volume", tooltip="à¸•à¹‰à¸­à¸‡à¸¡à¸µ Volume à¸ªà¸¹à¸‡", group=group_sensitivity)

// à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸œà¸¥
group_display = "ğŸ¨ à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸œà¸¥"
show_signals = input.bool(true, "à¹à¸ªà¸”à¸‡à¸ªà¸±à¸à¸à¸²à¸“", group=group_display)
show_exit_signals = input.bool(true, "à¹à¸ªà¸”à¸‡à¸ªà¸±à¸à¸à¸²à¸“à¸­à¸­à¸", group=group_display)
show_dashboard = input.bool(true, "à¹à¸ªà¸”à¸‡ Dashboard", group=group_display)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“± à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² Telegram - à¹à¸šà¸šà¸‡à¹ˆà¸²à¸¢ (à¸ˆà¸²à¸ Debug Bot)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

group_telegram = "ğŸ“± Telegram"
enable_telegram = input.bool(false, "à¹€à¸›à¸´à¸” Telegram", group=group_telegram)
telegram_bot_token = input.string("", "Bot Token", group=group_telegram)
telegram_chat_id = input.string("", "Chat ID", group=group_telegram)
send_test_message = input.bool(false, "à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸”à¸ªà¸­à¸š", group=group_telegram)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ§® à¸•à¸±à¸§à¸Šà¸µà¹‰à¸§à¸±à¸”à¹€à¸—à¸„à¸™à¸´à¸„ - Hybrid
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// RSI
rsi = ta.rsi(close, 14)
rsi_oversold = 30
rsi_overbought = 70

// Moving Averages
ema9 = ta.ema(close, 9)
ema21 = ta.ema(close, 21)
ema50 = ta.ema(close, 50)

// Trend
uptrend = ema21 > ema50
downtrend = ema21 < ema50
strong_uptrend = ema9 > ema21 and ema21 > ema50
strong_downtrend = ema9 < ema21 and ema21 < ema50

// Volume
avg_volume = ta.sma(volume, 10)
high_volume = volume > avg_volume * 1.2
volume_ok = use_volume_filter ? high_volume : true

// Price Action
bullish_candle = close > open
bearish_candle = close < open
strong_bullish_candle = close > open and (close - open) / (high - low) > 0.6
strong_bearish_candle = close < open and (open - close) / (high - low) > 0.6

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ¯ à¸£à¸°à¸šà¸šà¸ªà¸±à¸à¸à¸²à¸“à¹à¸šà¸š Hybrid
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// à¸£à¸°à¸”à¸±à¸š "à¸‡à¹ˆà¸²à¸¢à¸¡à¸²à¸" - à¹€à¸‚à¹‰à¸²à¹€à¸—à¸£à¸”à¸‡à¹ˆà¸²à¸¢à¸ªà¸¸à¸”
very_easy_buy = rsi < 60 and bullish_candle
very_easy_sell = rsi > 40 and bearish_candle

// à¸£à¸°à¸”à¸±à¸š "à¸­à¹ˆà¸­à¸™" - à¹ƒà¸Šà¹‰ RSI à¸«à¸¥à¸±à¸
easy_buy = rsi < rsi_oversold and bullish_candle
easy_sell = rsi > rsi_overbought and bearish_candle

// à¸£à¸°à¸”à¸±à¸š "à¸à¸¥à¸²à¸‡" - à¹€à¸à¸´à¹ˆà¸¡à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚ Trend
medium_buy = rsi < rsi_oversold and bullish_candle and (use_trend_filter ? uptrend : true)
medium_sell = rsi > rsi_overbought and bearish_candle and (use_trend_filter ? downtrend : true)

// à¸£à¸°à¸”à¸±à¸š "à¹à¸£à¸‡" - à¹€à¸‡à¸·à¹ˆà¸­à¸™à¹„à¸‚à¸„à¸£à¸š (à¹€à¸«à¸¡à¸·à¸­à¸™ Scalping Bot à¹€à¸”à¸´à¸¡)
strong_buy = rsi < rsi_oversold and
             strong_bullish_candle and
             (use_trend_filter ? strong_uptrend : true) and
             volume_ok and
             close > ema21

strong_sell = rsi > rsi_overbought and
              strong_bearish_candle and
              (use_trend_filter ? strong_downtrend : true) and
              volume_ok and
              close < ema21

// à¹€à¸¥à¸·à¸­à¸à¸ªà¸±à¸à¸à¸²à¸“à¸•à¸²à¸¡à¸£à¸°à¸”à¸±à¸šà¸—à¸µà¹ˆà¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²
buy_signal = signal_sensitivity == "à¸‡à¹ˆà¸²à¸¢à¸¡à¸²à¸" ? very_easy_buy :
             signal_sensitivity == "à¸­à¹ˆà¸­à¸™" ? easy_buy :
             signal_sensitivity == "à¸à¸¥à¸²à¸‡" ? medium_buy :
             strong_buy

sell_signal = signal_sensitivity == "à¸‡à¹ˆà¸²à¸¢à¸¡à¸²à¸" ? very_easy_sell :
              signal_sensitivity == "à¸­à¹ˆà¸­à¸™" ? easy_sell :
              signal_sensitivity == "à¸à¸¥à¸²à¸‡" ? medium_sell :
              strong_sell

// Exit Signals - à¹ƒà¸Šà¹‰à¸ˆà¸²à¸ Scalping Bot
rsi_exit_long = rsi > 70 or rsi < 25
rsi_exit_short = rsi < 30 or rsi > 75

quick_exit_long = use_quick_exit and (rsi_exit_long or close < ema21)
quick_exit_short = use_quick_exit and (rsi_exit_short or close > ema21)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“Š à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸²à¸£à¹€à¸—à¸£à¸”
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var int trades_today = 0
var bool test_sent = false

// à¸£à¸µà¹€à¸‹à¹‡à¸•à¸—à¸¸à¸à¸§à¸±à¸™
if dayofweek != dayofweek[1]
    trades_today := 0

can_trade = trades_today < daily_trade_limit and strategy.position_size == 0

// à¸ªà¹ˆà¸‡à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸—à¸”à¸ªà¸­à¸š Telegram - à¹ƒà¸Šà¹‰ format à¸ˆà¸²à¸ Debug Bot
if enable_telegram and send_test_message and not test_sent and barstate.islast
    test_message = "ğŸ§ª à¸—à¸”à¸ªà¸­à¸š HYBRID SCALPING Bot\n\n" +
                   "âœ… à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!\n" +
                   "ğŸ“Š Symbol: " + syminfo.ticker + "\n" +
                   "ğŸ’² à¸£à¸²à¸„à¸²à¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™: $" + str.tostring(close, "#.####") + "\n" +
                   "âš¡ à¸£à¸°à¸”à¸±à¸š: " + signal_sensitivity + "\n" +
                   "â° à¹€à¸§à¸¥à¸²: " + str.tostring(hour, "00") + ":" + str.tostring(minute, "00") + "\n\n" +
                   "ğŸ¯ Bot à¸à¸£à¹‰à¸­à¸¡à¸—à¸³à¸‡à¸²à¸™!"

    alert(test_message, alert.freq_once_per_bar)
    test_sent := true

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ’° à¸à¸²à¸£à¸”à¸³à¹€à¸™à¸´à¸™à¸à¸²à¸£à¹€à¸—à¸£à¸” - Scalping Logic
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Variables for Scalping
var float entry_price = 0
var float highest_profit = 0
var float trailing_stop_price = 0

// Entry Long
if buy_signal and can_trade
    strategy.entry("LONG", strategy.long)
    trades_today := trades_today + 1
    entry_price := close
    highest_profit := 0
    trailing_stop_price := close * (1 - sl_percent / 100)

    // Set exits
    strategy.exit("SL/TP", "LONG",
                  stop=close * (1 - sl_percent / 100),
                  limit=close * (1 + tp_percent / 100))

    // Telegram Alert - à¹ƒà¸Šà¹‰ format à¸‡à¹ˆà¸²à¸¢
    if enable_telegram
        entry_message = "ğŸš€ HYBRID LONG!\n" +
                       "ğŸ“Š " + syminfo.ticker + "\n" +
                       "ğŸ’° Entry: $" + str.tostring(close, "#.####") + "\n" +
                       "ğŸ›‘ SL: $" + str.tostring(close * (1 - sl_percent / 100), "#.####") + "\n" +
                       "ğŸ¯ TP: $" + str.tostring(close * (1 + tp_percent / 100), "#.####") + "\n" +
                       "ğŸ“ˆ RSI: " + str.tostring(rsi, "#.#") + "\n" +
                       "âš¡ Level: " + signal_sensitivity + "\n" +
                       "ğŸ“Š à¹€à¸—à¸£à¸”à¸—à¸µà¹ˆ: " + str.tostring(trades_today)

        alert(entry_message, alert.freq_once_per_bar)

// Entry Short
if sell_signal and can_trade
    strategy.entry("SHORT", strategy.short)
    trades_today := trades_today + 1
    entry_price := close
    highest_profit := 0
    trailing_stop_price := close * (1 + sl_percent / 100)

    // Set exits
    strategy.exit("SL/TP", "SHORT",
                  stop=close * (1 + sl_percent / 100),
                  limit=close * (1 - tp_percent / 100))

    // Telegram Alert
    if enable_telegram
        entry_message = "ğŸ“‰ HYBRID SHORT!\n" +
                       "ğŸ“Š " + syminfo.ticker + "\n" +
                       "ğŸ’° Entry: $" + str.tostring(close, "#.####") + "\n" +
                       "ğŸ›‘ SL: $" + str.tostring(close * (1 + sl_percent / 100), "#.####") + "\n" +
                       "ğŸ¯ TP: $" + str.tostring(close * (1 - tp_percent / 100), "#.####") + "\n" +
                       "ğŸ“ˆ RSI: " + str.tostring(rsi, "#.#") + "\n" +
                       "âš¡ Level: " + signal_sensitivity + "\n" +
                       "ğŸ“Š à¹€à¸—à¸£à¸”à¸—à¸µà¹ˆ: " + str.tostring(trades_today)

        alert(entry_message, alert.freq_once_per_bar)

// Trailing Stop Logic - à¸ˆà¸²à¸ Scalping Bot
if strategy.position_size > 0 and use_trailing_stop  // Long position
    current_profit = (close - entry_price) / entry_price * 100
    if current_profit > highest_profit
        highest_profit := current_profit
        trailing_stop_price := close * (1 - trailing_percent / 100)

    if close <= trailing_stop_price
        strategy.close("LONG", comment="Trailing Stop")
        if enable_telegram
            exit_message = "ğŸ”’ TRAILING STOP LONG!\n" +
                          "ğŸ“Š " + syminfo.ticker + "\n" +
                          "ğŸ’° Exit: $" + str.tostring(close, "#.####") + "\n" +
                          "ğŸ“ˆ Profit: +" + str.tostring(current_profit, "#.##") + "%"
            alert(exit_message, alert.freq_once_per_bar)

if strategy.position_size < 0 and use_trailing_stop  // Short position
    current_profit = (entry_price - close) / entry_price * 100
    if current_profit > highest_profit
        highest_profit := current_profit
        trailing_stop_price := close * (1 + trailing_percent / 100)

    if close >= trailing_stop_price
        strategy.close("SHORT", comment="Trailing Stop")
        if enable_telegram
            exit_message = "ğŸ”’ TRAILING STOP SHORT!\n" +
                          "ğŸ“Š " + syminfo.ticker + "\n" +
                          "ğŸ’° Exit: $" + str.tostring(close, "#.####") + "\n" +
                          "ğŸ“ˆ Profit: +" + str.tostring(current_profit, "#.##") + "%"
            alert(exit_message, alert.freq_once_per_bar)

// Quick Exit Logic - à¸ˆà¸²à¸ Scalping Bot
if strategy.position_size > 0 and quick_exit_long
    strategy.close("LONG", comment="Quick Exit")
    if enable_telegram
        current_pnl = (close - entry_price) / entry_price * 100
        exit_message = "âš¡ QUICK EXIT LONG!\n" +
                      "ğŸ“Š " + syminfo.ticker + "\n" +
                      "ğŸ’° Exit: $" + str.tostring(close, "#.####") + "\n" +
                      "ğŸ“ˆ P&L: " + str.tostring(current_pnl, "#.##") + "%"
        alert(exit_message, alert.freq_once_per_bar)

if strategy.position_size < 0 and quick_exit_short
    strategy.close("SHORT", comment="Quick Exit")
    if enable_telegram
        current_pnl = (entry_price - close) / entry_price * 100
        exit_message = "âš¡ QUICK EXIT SHORT!\n" +
                      "ğŸ“Š " + syminfo.ticker + "\n" +
                      "ğŸ’° Exit: $" + str.tostring(close, "#.####") + "\n" +
                      "ğŸ“ˆ P&L: " + str.tostring(current_pnl, "#.##") + "%"
        alert(exit_message, alert.freq_once_per_bar)

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ¨ à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸œà¸¥à¸šà¸™à¸Šà¸²à¸£à¹Œà¸•
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Plot signals
plotshape(buy_signal and show_signals, "Buy", shape.triangleup, location.belowbar, color.lime, size=size.small)
plotshape(sell_signal and show_signals, "Sell", shape.triangledown, location.abovebar, color.red, size=size.small)

// Plot exit signals
plotshape(quick_exit_long and show_exit_signals, "Quick Exit Long", shape.xcross, location.abovebar, color.orange, size=size.tiny)
plotshape(quick_exit_short and show_exit_signals, "Quick Exit Short", shape.xcross, location.belowbar, color.orange, size=size.tiny)

// Plot EMAs
plot(ema21, "EMA21", color.blue, linewidth=1)
plot(ema50, "EMA50", color.purple, linewidth=1)

// Dashboard - à¸›à¸£à¸±à¸šà¸›à¸£à¸¸à¸‡à¹ƒà¸«à¹‰à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢
if show_dashboard and barstate.islast
    var table dashboard = table.new(position.top_right, 2, 7, bgcolor=color.white, border_width=1)

    table.cell(dashboard, 0, 0, "ğŸ”¥ HYBRID", text_color=color.white, bgcolor=color.orange, text_size=size.small)
    table.cell(dashboard, 1, 0, syminfo.ticker, text_color=color.white, bgcolor=color.orange, text_size=size.small)

    table.cell(dashboard, 0, 1, "ğŸ’° P&L", text_color=color.black, text_size=size.small)
    pnl_value = strategy.netprofit
    pnl_color = pnl_value >= 0 ? color.green : color.red
    table.cell(dashboard, 1, 1, "$" + str.tostring(pnl_value, "#.##"), text_color=pnl_color, text_size=size.small)

    table.cell(dashboard, 0, 2, "âš¡ Level", text_color=color.black, text_size=size.small)
    table.cell(dashboard, 1, 2, signal_sensitivity, text_color=color.purple, text_size=size.small)

    table.cell(dashboard, 0, 3, "ğŸ“ˆ RSI", text_color=color.black, text_size=size.small)
    rsi_color = rsi < 30 ? color.green : rsi > 70 ? color.red : color.gray
    table.cell(dashboard, 1, 3, str.tostring(rsi, "#.#"), text_color=rsi_color, text_size=size.small)

    table.cell(dashboard, 0, 4, "ğŸ“Š à¹€à¸—à¸£à¸”", text_color=color.black, text_size=size.small)
    table.cell(dashboard, 1, 4, str.tostring(trades_today) + "/" + str.tostring(daily_trade_limit), text_color=color.navy, text_size=size.small)

    table.cell(dashboard, 0, 5, "ğŸ“ à¸ªà¸–à¸²à¸™à¸°", text_color=color.black, text_size=size.small)
    position_text = strategy.position_size > 0 ? "LONG" : strategy.position_size < 0 ? "SHORT" : "à¸§à¹ˆà¸²à¸‡"
    position_color = strategy.position_size > 0 ? color.green : strategy.position_size < 0 ? color.red : color.gray
    table.cell(dashboard, 1, 5, position_text, text_color=position_color, text_size=size.small)

    table.cell(dashboard, 0, 6, "ğŸ¯ Trend", text_color=color.black, text_size=size.small)
    trend_text = uptrend ? "UP" : downtrend ? "DOWN" : "SIDE"
    trend_color = uptrend ? color.green : downtrend ? color.red : color.gray
    table.cell(dashboard, 1, 6, trend_text, text_color=trend_color, text_size=size.small)
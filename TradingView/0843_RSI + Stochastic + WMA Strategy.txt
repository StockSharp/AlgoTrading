//@version=5
strategy("RSI + Stochastic + WMA Strategy", overlay=true)

// === INPUTS === //
rsiLength = input.int(14, "RSI Length")
stochK = input.int(14, "Stochastic %K")
stochD = input.int(3, "Stochastic %D")
wmaLength = input.int(21, "WMA Length")

// === INDICATORS === //
rsi = ta.rsi(close, rsiLength)
wma = ta.wma(close, wmaLength)

k = ta.stoch(close, high, low, stochK)
d = ta.sma(k, stochD)

// === CONDITIONS === //
rsiOverbought = rsi > 70
rsiOversold = rsi < 30
stochCrossUp = ta.crossover(k, d)
stochCrossDown = ta.crossunder(k, d)
priceAboveWMA = close > wma
priceBelowWMA = close < wma

longCondition = rsiOversold and stochCrossUp and priceAboveWMA
shortCondition = rsiOverbought and stochCrossDown and priceBelowWMA

// === STRATEGY ENTRIES === //
if (longCondition)
    strategy.entry("LONG", strategy.long)

if (shortCondition)
    strategy.entry("SHORT", strategy.short)

// === PLOT ELEMENTS FOR VISUAL AID === //
plot(wma, title="WMA", color=color.orange, linewidth=2)
hline(70, "Overbought", color=color.red)
hline(30, "Oversold", color=color.green)
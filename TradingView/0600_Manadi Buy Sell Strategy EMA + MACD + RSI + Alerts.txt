//@version=5
strategy("Buy/Sell Strategy EMA + MACD + RSI + Alerts", overlay=true, default_qty_type=strategy.percent_of_equity, default_qty_value=100, pyramiding=0)

// EMA
emaFast = ta.ema(close, 9)
emaSlow = ta.ema(close, 21)
plot(emaFast, color=color.green, title="EMA 9")
plot(emaSlow, color=color.red, title="EMA 21")

// MACD
[macdLine, signalLine, _] = ta.macd(close, 12, 26, 9)

// RSI
rsi = ta.rsi(close, 14)

// Buy condition
longCondition = ta.crossover(emaFast, emaSlow) and macdLine > signalLine and rsi < 70 and rsi > 40
if (longCondition)
    strategy.entry("Long", strategy.long)
    strategy.exit("TP/SL Long", from_entry="Long", stop=close * 0.985, limit=close * 1.03)
    alert("ðŸ“ˆ BUY signal triggered (EMA+MACD+RSI)", alert.freq_once_per_bar_close)

// Sell condition
shortCondition = ta.crossunder(emaFast, emaSlow) and macdLine < signalLine and rsi > 30 and rsi < 60
if (shortCondition)
    strategy.entry("Short", strategy.short)
    strategy.exit("TP/SL Short", from_entry="Short", stop=close * 1.015, limit=close * 0.97)
    alert("ðŸ“‰ SELL signal triggered (EMA+MACD+RSI)", alert.freq_once_per_bar_close)
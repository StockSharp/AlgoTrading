//@version=6
strategy("2:45 AM Candle High/Low Crossing Bars", overlay=true, default_qty_type=strategy.percent_of_equity, default_qty_value=10)

// Define time of 2:45 AM candle (UTC time)
targetHour = 2
targetMinute = 45

// Check if current time is 2:45 AM
isTargetTime = (hour == targetHour and minute == targetMinute)

// Get the high and low of the 2:45 AM candle
targetHigh = high
targetLow = low

// Calculate the end index (two 45-minute candles ahead)
endBarIndex = bar_index + 2  // +2 bars (two 45-minute candles ahead)

// Check if price crosses the high or low of the 2:45 AM candle after it closes
sweepHigh = (high > targetHigh[1])  // The high of the 2:45 AM candle has been breached
sweepLow = (low < targetLow[1])     // The low of the 2:45 AM candle has been breached

// Draw horizontal lines across the chart for the length of two 45-minute candles
if (isTargetTime)
    if (sweepHigh)
        line.new(x1=bar_index, y1=targetHigh, x2=endBarIndex, y2=targetHigh, color=color.red, width=2, style=line.style_solid)
    if (sweepLow)
        line.new(x1=bar_index, y1=targetLow, x2=endBarIndex, y2=targetLow, color=color.green, width=2, style=line.style_solid)

// Plot the 2:45 AM candle with a label for easy identification
plotshape(series=isTargetTime, location=location.belowbar, color=color.green, style=shape.labelup, text="2:45 AM", size=size.small)
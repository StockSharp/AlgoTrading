//@version=6
strategy("Crypto Strategy SUSDT 10 min", overlay=true)

// EMA Parameters
len = input.int(24, minval=1, title="EMA Length")
src = input(close, title="Source")
ema24 = ta.ema(src, len)

// Stop Loss and Take Profit Parameters
stopLossPercent = input.float(2.0, minval=0.1, title="Stop Loss (%)")  // Stop Loss as a percentage of loss
takeProfitPercent = input.float(4.0, minval=0.1, title="Take Profit (%)")  // Take Profit as a percentage of profit

// Long Entry Conditions
longCondition = close > ema24 and open < ema24

// Short Entry Conditions
shortCondition = close < ema24 and open > ema24

// Strategy Orders
if (longCondition)
    // Calculating SL and TP levels for LONG positions
    longPrice = close  // Entry price for LONG position
    stopLossLevel = longPrice * (1 - stopLossPercent / 100)  // Stop Loss as a percentage of entry price
    takeProfitLevel = longPrice * (1 + takeProfitPercent / 100)  // Take Profit as a percentage of entry price
    strategy.entry("Long", strategy.long)
    strategy.exit("Exit Long", from_entry="Long", stop=stopLossLevel, limit=takeProfitLevel)

if (shortCondition)
    // Calculating SL and TP levels for SHORT positions
    shortPrice = close  // Entry price for SHORT position
    stopLossLevel = shortPrice * (1 + stopLossPercent / 100)  // Stop Loss as a percentage of entry price
    takeProfitLevel = shortPrice * (1 - takeProfitPercent / 100)  // Take Profit as a percentage of entry price
    strategy.entry("Short", strategy.short)
    strategy.exit("Exit Short", from_entry="Short", stop=stopLossLevel, limit=takeProfitLevel)

// EMA Plot
plot(ema24, title="EMA 24", color=color.blue)
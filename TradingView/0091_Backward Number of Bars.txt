// This source code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© melihtuna

//@version=4
study("Backward Number of Bars")

BacktestBarCount = input(50)
_MILLISECONDS_IN_MINUTE = 60000
_MILLISECONDS_IN_HOUR = 60 * _MILLISECONDS_IN_MINUTE
_MILLISECONDS_IN_DAY = 24 * _MILLISECONDS_IN_HOUR
_MILLISECONDS_IN_WEEK = 7 * _MILLISECONDS_IN_DAY
_MILLISECONDS_IN_MONTH = 30 * _MILLISECONDS_IN_DAY

x = (timeframe.isdaily) ? _MILLISECONDS_IN_DAY : (timeframe.isweekly) ? _MILLISECONDS_IN_WEEK : (timeframe.ismonthly) ? _MILLISECONDS_IN_MONTH : timeframe.multiplier * _MILLISECONDS_IN_MINUTE
backTestFromDate = BacktestBarCount * x

reqDate = timenow - backTestFromDate
reqYear = year(reqDate)
reqMonth = month(reqDate)
reqDay = dayofmonth(reqDate)
reqHour = hour(reqDate)
reqMinute = minute(reqDate)

start = timestamp(reqYear, reqMonth, reqDay, reqHour, reqMinute)
window() => time >= start ? 1 : 0

plot(window(), color=color.blue)
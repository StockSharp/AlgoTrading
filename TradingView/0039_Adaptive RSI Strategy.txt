//@version=5
strategy("Adaptive RSI Strategy", shorttitle="ARSI_Strategy", overlay=true)

// Inputs
length = input.int(title="Length", defval=14)
highlightMovements = input.bool(title="Highlight Movements ?", defval=true)
src = input.source(title="Source", defval=close)

// Calculations
alpha = 2 * math.abs(ta.rsi(src, length) / 100 - 0.5)

arsi = 0.0
arsi := alpha * src + (1 - alpha) * nz(arsi[1])

arsiColor = highlightMovements ? (arsi > arsi[1] ? color.green : color.red) : color.new(#6d1e7f, 0)
plot(arsi, title="ARSI", linewidth=2, color=arsiColor)

// Long and Short Entry Rules
longCondition = ta.crossover(arsi, arsi[1])
shortCondition = ta.crossunder(arsi, arsi[1])

if (longCondition)
    strategy.entry("Long", strategy.long)

if (shortCondition)
    strategy.entry("Short", strategy.short)
# 多周期交易者
[English](README.md) | [Русский](README_ru.md)

该策略监控九个不同周期的K线，并为每个周期计算同一长度的线性回归通道。H1回归通道的斜率用于判断趋势方向：斜率为负时只允许做空，斜率为正时只允许做多。M5与M1通道负责在支撑/阻力附近给出精确的入场位置。

## 交易流程

- **数据来源**：M1、M5、M15、M30、H1、H4、D1、W1、MN1九个周期的标准K线。
- **指标**：每个周期使用线性回归通道，通道宽度由窗口内收盘价相对回归线的最大偏差确定，形成对称的上下轨道。
- **趋势过滤**：读取H1通道的斜率，只在负斜率下寻找空头信号，在正斜率下寻找多头信号。
- **入场条件**：
  - **空头**——最近一根M5高点和M1高点同时突破各自通道上轨，并且H1斜率为负。
  - **多头**——最近一根M5低点和M1低点同时触及各自通道下轨，并且H1斜率为正。
- **下单方式**：使用设定的交易量发送市价单。止损取自M5通道半宽（上轨或下轨与中心线的一半距离），止盈为M5通道的中心线。
- **离场**：在每根M1K线收盘时检查价格是否到达止损或止盈，满足任一条件即平仓。
- **仓位控制**：策略在任何时刻只持有一个方向的仓位。

## 参数

| 参数 | 说明 |
| --- | --- |
| `EnableTrading` | 是否允许策略发送订单。 |
| `BarsToCount` | 所有回归通道的计算窗口长度（默认50）。 |
| `Volume` | 每次市价单的交易量（手数）。 |

## 备注

- 增大`BarsToCount`可使回归线更加平滑，但响应速度会下降。
- 多周期斜率信息有助于监控更高周期的一致性，尽管只有H1斜率用于决策。
- 每根新的M5K线都会重新计算止损和止盈，从而使风险控制紧贴当前通道宽度。

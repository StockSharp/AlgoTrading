# Стратегия RSI Trader

## Обзор
Стратегия переносит советник *"RSI trader v0.15"* на платформу StockSharp с использованием высокоуровневого API. Логика основана на согласовании тренда цены и сглаженного индикатора RSI. По умолчанию анализ ведётся на часовых свечах, однако тип свечей можно изменить параметром `CandleType`.

## Логика торговли
1. Рассчитывается стандартный RSI с заданным периодом.
2. RSI сглаживается двумя простыми скользящими средними: быстрой сигнальной и медленной подтверждающей.
3. Для цены берутся две скользящие: краткосрочная простая SMA и долгосрочная взвешенная средняя (аналог LWMA из исходного кода).
4. На каждой закрытой свече определяется состояние тренда:
   - **Бычье согласование**: краткосрочная цена SMA выше долгосрочной, а быстрая RSI SMA выше медленной.
   - **Медвежье согласование**: краткосрочная цена SMA ниже долгосрочной, а быстрая RSI SMA ниже медленной.
   - **Флэт / расхождение**: сигналы цены и RSI не совпадают.
5. Реакция на состояние:
   - При бычьем согласовании и отсутствии позиции открывается покупка.
   - При медвежьем согласовании и отсутствии позиции открывается продажа.
   - При обнаружении флэта существующая позиция закрывается сразу же, что повторяет защиту оригинального советника.
6. Параметр `Reverse` инвертирует направления входа, позволяя торговать против основного сигнала.

Стратегия работает только по завершённым свечам и использует встроенную защиту StockSharp для обработки аномальных ситуаций.

## Параметры
| Параметр | Описание | Значение по умолчанию |
|----------|----------|------------------------|
| `RsiPeriod` | Период расчёта RSI. | 14 |
| `ShortRsiMaPeriod` | Период быстрой SMA по RSI. | 9 |
| `LongRsiMaPeriod` | Период медленной SMA по RSI. | 45 |
| `ShortPriceMaPeriod` | Период короткой SMA по цене. | 9 |
| `LongPriceMaPeriod` | Период длинной взвешенной средней по цене. | 45 |
| `Reverse` | Инверсия направлений сделок. | `false` |
| `CandleType` | Тип свечей для анализа, по умолчанию 1 час. | `1h` |

Для всех целочисленных параметров заданы диапазоны оптимизации, что упрощает подбор настроек в тестере StockSharp.

## Управление рисками
- При расхождении сигналов цены и RSI позиция закрывается немедленно, тем самым исключаются сделки в фазе бокового движения.
- В методе `OnStarted` вызывается `StartProtection()`, чтобы задействовать защитные механизмы StockSharp.

## Дополнительные сведения
- Для объёма сделок используется базовое свойство `Volume` класса `Strategy`.
- Стратегия игнорирует незавершённые свечи, поэтому сигналы поступают только после подтверждения баром.
- Длинная цена используется как взвешенная средняя, что соответствует режиму LWMA из MetaTrader.

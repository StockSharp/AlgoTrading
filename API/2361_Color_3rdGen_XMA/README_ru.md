# Стратегия Color 3rd Generation XMA

Стратегия торгует по направлению усреднителя третьего поколения. Индикатор представляет собой комбинацию двух экспоненциальных средних и окрашивается в синий цвет при росте и в розовый при падении. При смене цвета вверх формируется сигнал на покупку, при смене вниз — сигнал на продажу.

Сделки открываются только в заданное пользователем время после появления сигнала. Позиции могут закрываться при противоположном сигнале или по истечении заданного времени удержания. Дополнительно поддерживаются уровни стоп‑лосса и тейк‑профита в пунктах.

## Параметры

- **Length** — период усреднения третьего поколения.
- **StartHour** — час, в который разрешено открывать позиции.
- **StartMinute** — минута внутри часа для открытия.
- **HoldMinutes** — максимальное время удержания позиции.
- **Volume** — объём заявки при входе.
- **StopLoss** — расстояние стоп‑лосса в пунктах, `0` выключает стоп.
- **TakeProfit** — расстояние тейк‑профита в пунктах, `0` выключает цель.
- **UseLongEntries** — разрешение на открытие длинных позиций.
- **UseShortEntries** — разрешение на открытие коротких позиций.
- **CloseLongBySignal** — закрывать лонги при появлении сигнала на продажу.
- **CloseShortBySignal** — закрывать шорты при появлении сигнала на покупку.
- **CandleType** — таймфрейм свечей для расчётов.

## Логика

1. Подписка на свечи выбранного таймфрейма.
2. Расчёт усреднителя третьего поколения на каждой свече.
3. Определение роста или падения значения между соседними свечами.
4. Сохранение сигнала на покупку или продажу в зависимости от направления.
5. В указанное время открытие позиции в сторону сохранённого сигнала.
6. Закрытие позиции при противоположном сигнале, по истечении времени удержания или при достижении стоп‑лосса/тейк‑профита.

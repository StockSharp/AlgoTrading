# Стратегия FullDump BB RSI
[English](README.md) | [中文](README_cn.md)

Многоэтапная система на основе полос Боллинджера и RSI, портированная из советника MT5 «FullDump». Алгоритм ищет истощение импульса, подтверждает возврат к среднему через полосы Боллинджера и входит в сделку только после возвращения цены к средней линии. Управление позициями повторяет оригинал: фиксированные стоп-лосс/тейк-профит с добавочным отступом и перевод стопа в безубыток при повторном касании противоположной полосы.

## Обзор

- **Рынки**: Любые ликвидные инструменты, где доступны полосы Боллинджера и RSI.
- **Таймфрейм**: Настраиваемый тип свечей (по умолчанию 15 минут).
- **Направление**: Лонг и шорт.
- **Тип заявок**: Рыночные ордера с заранее рассчитанной защитой.
- **Идея**: Отработка возврата цены к средней линии после выхода за пределы полос Боллинджера.

## Логика входа

1. **RSI (Шаг 1)**
   - Для лонга нужно, чтобы хотя бы одно значение RSI за последние N свечей опустилось ниже 30.
   - Для шорта необходимо, чтобы хотя бы одно значение RSI за тот же период поднялось выше 70.
2. **Полосы Боллинджера (Шаг 2)**
   - Лонг: текущая цена закрытия должна быть ниже либо равна любой из недавних нижних полос.
   - Шорт: текущая цена закрытия должна быть выше либо равна любой из недавних верхних полос.
3. **Возврат к средней (Шаг 3)**
   - Лонг активируется только после закрытия свечи выше средней полосы.
   - Шорт возможен при закрытии ниже средней полосы.
4. **Исполнение**
   - При выполнении условий и отсутствии позиции в нужную сторону отправляется рыночная заявка указанного объёма.

## Управление рисками

- **Стоп-лосс**: Для лонга размещается под минимальным минимумом за период `Depth` минус отступ; для шорта — над максимальным максимумом плюс отступ.
- **Тейк-профит**: Устанавливается на текущую противоположную полосу Боллинджера плюс тот же отступ.
- **Перевод в безубыток**: При достижении противоположной полосы стоп переносится на цену входа.
- **Выход**: Позиция закрывается при пробое стопа/тейка или при смене направления сигнала, что позволяет стратегии переворачиваться.

## Параметры

| Имя | Описание | Значение по умолчанию | Примечания |
| --- | --- | --- | --- |
| `BandsPeriod` | Период расчёта полос Боллинджера. | 20 | Оптимизируется (10 → 40 шаг 1). |
| `RsiPeriod` | Период усреднения RSI. | 14 | Оптимизируется (7 → 21 шаг 1). |
| `Depth` | Количество свечей, используемых в проверках. | 6 | Оптимизируется (3 → 12 шаг 1). |
| `IndentInPoints` | Отступ в шагах цены для стопа и тейка. | 10 | Оптимизируется (5 → 30 шаг 5). |
| `OrderVolume` | Объём сделки в лотах. | 1 | Используется для входов и выходов. |
| `CandleType` | Тип свечей, по которым ведутся расчёты. | 15-минутные свечи | Позволяет адаптировать горизонт торговли. |

## Теги и особенности

- **Категория**: Возврат к среднему, волатильностные каналы.
- **Индикаторы**: Bollinger Bands, Relative Strength Index.
- **Стопы**: Жёсткий стоп, жёсткий тейк, перевод в безубыток.
- **Сложность**: Средняя (многоступенчатые условия и хранение состояния).
- **Автоматизация**: Полностью автоматические входы и выходы.
- **Оптимальные условия**: Боковые рынки, где колебания вокруг средней полосы встречаются чаще.

## Примечания

- Отступ масштабируется на шаг цены инструмента, что соответствует пипсовой логике советника MT5.
- Очереди последних значений индикаторов позволяют точно воспроизвести проверки «Depth» из исходника.
- Для корректной работы необходимо наличие достаточной истории свечей, чтобы индикаторы успели сформироваться.

# 全量合约信息策略

## 概览
**全量合约信息策略** 是对原始 MQL5 脚本 *All information about the symbol.mq5* 的转换版本。原脚本通过对话框展示所选交易品种的全部属性，本策略则在启动时将同样的详细信息写入 StockSharp 日志。策略不会提交任何委托或修改持仓，唯一目的就是审计连接器当前掌握的合约元数据与市场快照。

## 工作流程
1. 启动后确认已经绑定 `Security`，并在日志中输出标题。
2. 通过反射与分组的辅助方法输出以下信息：
   - **概览**：代码、名称、分类、币种、小数位、行业与板块、是否允许融资/融券等标识字段。
   - **交易参数**：合约手数、成交量与价格步长、价格上下限、不同类型的保证金、行权价或期权类型（如适用）、乘数、结算日等。
   - **市场快照**：买一/卖一、最新成交、日内开高低收、结算价、未平仓合约量、价格限制、状态/交易状态以及时间戳。
   - **扩展信息**：如连接器提供 `ExtensionInfo` 字典，则逐项展开输出。
   - **完整属性转储**：通过反射列出除前述字段以外的所有公开属性，确保没有遗漏。
   - **交易所板块详情**：可选，针对关联的 `ExchangeBoard` 再次执行属性转储，展示支持的委托类型、交易时间等信息。
3. 所有字段都经过格式化以提升可读性：日期采用 ISO-8601，数字使用不变文化格式，字典/集合逐项展开，引用的其他证券或交易板块会被压缩为标识符。
4. 输出完成后策略保持空闲运行，便于在日志窗口中持续查看信息。

## 参数
| 参数 | 默认值 | 说明 |
|------|--------|------|
| `LogBoardDetails` | `true` | 是否输出关联 `ExchangeBoard` 的详细信息。 |
| `LogExtensionInfo` | `true` | 是否打印 `ExtensionInfo` 字典中的自定义元数据。 |
| `LogFullPropertyDump` | `true` | 是否在分组信息之后追加完整的属性反射列表，关闭可缩减日志量。 |

## 输出结构
日志输出遵循固定顺序：
1. 带有证券标识的起始提示。
2. **概览** 部分。
3. **交易参数**。
4. **市场快照**。
5. 可选的 **扩展信息**（为空时跳过）。
6. 可选的 **完整属性转储**（已打印的字段会被跳过，避免重复）。
7. 可选的 **交易所板块详情**。
8. 结束提示。

固定的顺序便于对比两次运行的差异，也方便将日志发送给技术支持进行诊断。

## 使用方法
1. 将策略添加到 StockSharp 项目中，并在 UI 或代码中指定 `Security` 与 `Portfolio`。
2. 根据需要调整三个布尔参数，以控制输出范围。
3. 启动策略后，首批日志行即包含完整报告，无需额外交互。
4. 查看完信息后停止策略即可。

## 注意事项
- 策略不会下单或调整仓位，可在实盘与回测环境中安全使用，用于检查连接配置。
- 由于完整转储依赖反射，未来 StockSharp 增加新的属性时，日志也会相应增长。
- 某些连接器会通过 `ExtensionInfo` 提供大量扩展字段；若这些字段包含复杂对象，日志长度可能显著增加。
- 市场快照反映的是 `Security` 当前缓存的数据，若尚未收到行情，大多数字段会显示为 `<null>`。

## 转换说明
- 原 MQL5 程序使用对话框与列表控件呈现信息。StockSharp 策略不包含界面元素，因此转换后的版本改为使用日志输出，但覆盖相同的数据类别。
- 脚本中的 `IsExpirationTypeAllowed` 与 `IsFillingTypeAllowed` 函数通过打印交易所板块的属性间接体现，便于确认支持的过期与成交模式。
- 原脚本的 `Comment` 输出被替换为标准的 `LogInfo` 日志，保持与仓库中其他示例一致的风格。

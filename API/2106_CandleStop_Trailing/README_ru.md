# Стратегия CandleStop Trailing

## Обзор
Данная стратегия реализует управление трейлинг-стопом по методике CandleStop. Анализируются завершённые свечи и уровень стопа переносится только в сторону уменьшения риска. Алгоритм использует каналы Дончиана с отдельными периодами для длинных и коротких позиций, что позволяет подключать его к ручным сделкам или другим стратегиям входа.

## Параметры
- **Up Trail Periods** – количество свечей для расчёта максимума при сопровождении короткой позиции.
- **Down Trail Periods** – количество свечей для расчёта минимума при сопровождении длинной позиции.
- **Candle Type** – таймфрейм используемых свечей.

## Логика стратегии
1. Ожидается наличие открытой позиции. Стратегия сама позиции не открывает.
2. Для длинных позиций:
   - Вычисляется минимальное значение за *Down Trail Periods*.
   - Стоп переносится на это значение, если оно выше предыдущего.
   - При касании или пробое уровня выполняется продажа по рынку.
3. Для коротких позиций:
   - Вычисляется максимальное значение за *Up Trail Periods*.
   - Стоп переносится на это значение, если оно ниже предыдущего.
   - При касании или пробое уровня позиция закрывается рыночной покупкой.

## Примечания по использованию
- Разработана для работы с высокоуровневым API StockSharp и подписками на свечи.
- Подходит для защиты позиций, открытых вручную либо другими стратегиями.
- На графике отображаются свечи, линии каналов и выполненные сделки для наглядности.

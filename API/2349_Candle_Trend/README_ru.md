# Стратегия Candle Trend

## Обзор

Стратегия открывает позиции по направлению серии свечей.
Длинная позиция открывается после заданного количества подряд идущих бычьих свечей, короткая — после такого же количества медвежьих.
При появлении противоположного сигнала текущие позиции могут быть закрыты.

## Параметры

- **Candle Type**: таймфрейм свечей для анализа.
- **Trend Candles**: количество последовательных свечей в одном направлении для срабатывания сигнала.
- **Take Profit %**: необязательный уровень тейк-профита в процентах от цены входа.
- **Stop Loss %**: необязательный уровень стоп-лосса в процентах от цены входа.
- **Enable Long Entry**: разрешить открытие длинных позиций.
- **Enable Short Entry**: разрешить открытие коротких позиций.
- **Enable Long Exit**: разрешить закрытие длинных позиций при противоположном сигнале.
- **Enable Short Exit**: разрешить закрытие коротких позиций при противоположном сигнале.

## Логика

1. Подписка на свечи выбранного таймфрейма.
2. Подсчёт количества подряд идущих бычьих и медвежьих свечей.
3. Когда счётчик бычьих свечей достигает порога:
   - закрываем короткие позиции при разрешении;
   - открываем длинную позицию при разрешении.
4. Когда счётчик медвежьих свечей достигает порога:
   - закрываем длинные позиции при разрешении;
   - открываем короткую позицию при разрешении.
5. Для защиты используется `StartProtection` при необходимости.

## Примечания

- Сигналы обрабатываются только по завершённым свечам.
- Для входа и выхода применяются методы `BuyMarket` и `SellMarket`.
- Все комментарии в коде написаны на английском языке.

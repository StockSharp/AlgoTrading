# Cronex DeMarker
[English](README.md) | [中文](README_cn.md)

**Стратегия Cronex DeMarker** переносит на StockSharp классического советника Cronex. Она использует осциллятор DeMarker и два последовательных простых скользящих средних. Быстрая средняя сглаживает значения DeMarker, а медленная повторно сглаживает результат, формируя сигнальную линию. Взаимное расположение линий позволяет находить точки разворота и открывать сделки против текущего импульса.

Оригинальная версия на MQL5 давала возможность управлять направлениями торговли и лучше всего работала на старших таймфреймах. Порт сохраняет эту идеологию: как только быстрая линия пересекает медленную, стратегия закрывает противоположную позицию и открывает новую в обратную сторону. Пересечение вниз запускает покупку, пересечение вверх — продажу. Любое направление можно отключить в параметрах, что облегчает интеграцию в портфель.

## Алгоритм работы

1. Подписаться на свечи выбранного таймфрейма (по умолчанию 4 часа).
2. Рассчитать осциллятор DeMarker и сгладить его быстрой SMA длиной 14 баров.
3. Применить вторую SMA длиной 25 баров к результату быстрой средней и получить сигнальную линию.
4. Если на предыдущей свече быстрая линия была выше медленной, а на текущей закрывшейся свече опустилась ниже, стратегия покупает и закрывает короткие позиции.
5. Если на предыдущей свече быстрая линия была ниже медленной, а на текущей закрывшейся свече поднялась выше, стратегия продаёт и закрывает длинные позиции.
6. Объём сделки задаётся свойством `Volume`; при развороте используется абсолютная величина текущей позиции для немедленного переворота.

Такой подход хорошо ловит откаты после сильных импульсов и больше подходит для диапазонных рынков, ориентируясь на среднесрочную торговлю.

## Параметры по умолчанию

| Параметр | Значение | Описание |
|----------|----------|----------|
| `DeMarkerPeriod` | 25 | Количество баров в расчёте осциллятора DeMarker. |
| `FastPeriod` | 14 | Длина быстрой SMA, сглаживающей DeMarker. |
| `SlowPeriod` | 25 | Длина сигнальной SMA, применяемой к быстрой линии. |
| `CandleType` | 4 часа | Таймфрейм свечей для расчётов. |
| `EnableLongEntry` | true | Разрешить открытия длинных позиций при пересечении вниз. |
| `EnableShortEntry` | true | Разрешить открытия коротких позиций при пересечении вверх. |
| `EnableLongExit` | true | Закрывать длинные позиции при появлении медвежьего сигнала. |
| `EnableShortExit` | true | Закрывать короткие позиции при появлении бычьего сигнала. |

## Теги и классификация

- **Категория**: Mean Reversion, Oscillator
- **Направление**: Длинные и короткие позиции (можно отключать)
- **Индикаторы**: DeMarker, простые скользящие средние
- **Стопы**: Нет, управление только по сигналу
- **Таймфрейм**: Свинг-трейдинг (H4 по умолчанию)
- **Сложность**: Средняя, используется цепочка индикаторов
- **Риск**: Средний — контртрендовые входы могут пострадать в затяжных трендах
- **Автоматизация**: Полностью реализована на высокоуровневом API StockSharp

## Практические рекомендации

- Обрабатываются только завершённые свечи, что исключает перерисовку сигналов.
- При развороте объём рассчитывается с учётом текущей позиции, поэтому переворот происходит одной заявкой.
- На график выводятся обе линии и сделки, что помогает проверять работу стратегии визуально.
- Для односторонней торговли отключите ненужные входы и выходы через параметры.
- При работе с волатильными инструментами добавьте внешние ограничения риска: стоп-лосс или трейлинг.

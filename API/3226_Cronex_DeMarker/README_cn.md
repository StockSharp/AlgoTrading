# Cronex DeMarker
[English](README.md) | [Русский](README_ru.md)

**Cronex DeMarker 策略** 复刻了经典的 Cronex 专家顾问：先计算 DeMarker 振荡器，再使用两个连续的简单移动平均线进行平滑。快线对原始 DeMarker 值进行平滑，慢线则再次平滑快线。两条线之间的顺序和距离用于识别反转型入场信号。

原始 MQL5 版本提供了开仓方向开关并适用于较高周期。本次移植保留了这些特性：当快线穿越慢线时立即平仓反向持仓，并依据穿越方向进行反转式开仓。快线跌破慢线时开多、快线上穿慢线时开空，且可以分别禁用任意方向以适配不同的资产配置需求。

## 工作流程

1. 订阅所选周期（默认 4 小时）的 K 线数据。
2. 计算 DeMarker 振荡器，并使用 14 根周期的快线 SMA 进行第一次平滑。
3. 在快线输出之上应用 25 根周期的慢线 SMA，得到信号线。
4. 如果上一根 K 线快线仍在慢线上方，而当前 K 线快线已经跌破慢线，则视为超买回落信号，策略平掉空单并开多单。
5. 如果上一根 K 线快线位于慢线下方，而当前 K 线快线上穿慢线，则平掉多单并开空单。
6. 仓位规模由 `Volume` 属性控制，翻转信号会自动使用当前持仓的绝对值完成反向。

这种逻辑擅长捕捉强劲行情后的短期衰竭，因此更适合震荡或箱体市场，是一种均值回归型策略。

## 默认参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `DeMarkerPeriod` | 25 | DeMarker 振荡器的计算周期。 |
| `FastPeriod` | 14 | 作用在 DeMarker 上的快线 SMA 长度。 |
| `SlowPeriod` | 25 | 作用在快线输出上的慢线 SMA 长度。 |
| `CandleType` | 4 小时 | 用于计算信号的 K 线周期。 |
| `EnableLongEntry` | true | 当快线跌破慢线时允许开多。 |
| `EnableShortEntry` | true | 当快线上穿慢线时允许开空。 |
| `EnableLongExit` | true | 当出现看空条件时平掉多单。 |
| `EnableShortExit` | true | 当出现看多条件时平掉空单。 |

## 筛选标签

- **类别**：均值回归、振荡器
- **方向**：多空双向（可配置）
- **指标**：DeMarker、简单移动平均（双重平滑）
- **止损**：无，完全由信号驱动
- **周期**：波段交易（默认 H4，可调整）
- **复杂度**：中等，需要串联多个指标
- **风险特征**：中等，逆势进场可能遭遇延续性趋势
- **自动化**：完全基于 StockSharp 高阶 API

## 使用提示

- 仅处理收盘 K 线，避免使用未完成的数据导致复现困难。
- 翻转订单会使用当前仓位的绝对值，确保先平仓再反向建仓。
- 图表会同时绘制两条平滑线以及交易标记，便于人工复核。
- 如果策略只允许单向交易，可以通过参数关闭另一方向的开仓与平仓。
- 在高波动资产上运行时，建议叠加外部止损或移动止盈管理风险。

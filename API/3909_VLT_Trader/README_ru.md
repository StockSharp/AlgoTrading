# Стратегия VLT Trader

## Обзор
VLT Trader — это порт стратегии MetaTrader 4 "VLT_TRADER" на платформу StockSharp. Алгоритм ищет участки с минимальной волатильностью и выставляет отложенные стоп-заявки вокруг последней свечи. Когда диапазон завершившейся свечи меньше минимального диапазона за предыдущие `LookbackCandles` баров, стратегия готовит симметричный «страддл» на пробой.

## Логика торговли
- Подписка на выбранный таймфрейм свечей и расчёт диапазона (High − Low) для каждой свечи.
- Отслеживание минимального диапазона среди предыдущих `LookbackCandles` свечей с помощью индикатора `Lowest`.
- Если последняя завершённая свеча уже исторического минимума, стратегия подготавливает новую пару отложенных ордеров.
- Выставление Buy Stop выше максимума предыдущей свечи на `EntryOffsetPoints` пунктов и Sell Stop ниже минимума на такое же расстояние.
- Каждому ордеру сразу задаются уровни Stop Loss и Take Profit согласно параметрам `StopLossPoints` и `TakeProfitPoints`.
- Оба ордера остаются активными: когда один из них исполняется и открывает позицию, противоположный ордер продолжает ожидать возможного разворота.
- После исполнения или отмены ордеров внутренние ссылки очищаются, чтобы стратегия смогла вновь построить страддл, когда не останется позиций и активных заявок.

## Управление рисками
- Объём позиций задаётся параметром `OrderVolume` и автоматически приводится к биржевым ограничениям по шагу и минимуму лота.
- Расстояния стопов и тейков задаются в пунктах и переводятся в цену через `PriceStep` инструмента.

## Параметры
| Параметр | Описание |
|----------|----------|
| `OrderVolume` | Объём ордеров, выставляемых стратегией. |
| `EntryOffsetPoints` | Дополнительное расстояние от максимума/минимума предыдущей свечи при размещении стоп-заявок. |
| `TakeProfitPoints` | Дистанция до уровня Take Profit для каждой сделки. |
| `StopLossPoints` | Дистанция до уровня Stop Loss для каждой сделки. |
| `LookbackCandles` | Количество свечей для поиска минимального диапазона. |
| `CandleType` | Таймфрейм свечей, используемых в расчётах. |

## Примечания
- Для работы стратегии у инструмента должен быть задан корректный `PriceStep`; без него заявки не выставляются.
- Передача стопов и тейков вместе с отложенными ордерами может приводить к небольшим расхождениям с результатами MetaTrader из-за особенностей исполнения у брокера.
- Реализация использует только высокоуровневый API (`SubscribeCandles` + `Bind`) и стандартный индикатор `Lowest`, полностью повторяя проверку волатильности оригинального советника.

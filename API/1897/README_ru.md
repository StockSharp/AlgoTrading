# Стратегия Exp Oracle

Стратегия является портом советника **Exp_Oracle** на C#. В основе лежит пользовательский индикатор *Oracle*, объединяющий индикаторы RSI и CCI для прогнозирования движения цены на несколько баров вперёд. Индикатор строит две линии:

- **Oracle** – комбинация экстремумов CCI и RSI.
- **Signal** – сглаженное скользящее среднее линии Oracle.

Для интерпретации линий предусмотрено три режима работы:

1. **Breakdown** – вход при пересечении нулевой линии сигналом.
2. **Twist** – реагирует на развороты направления сигналной линии.
3. **Disposition** – торгует на пересечениях сигналом линии Oracle.

## Параметры

- `OraclePeriod` – период расчёта RSI и CCI.
- `Smooth` – длина сглаживания сигналной линии.
- `Mode` – используемый алгоритм (`Breakdown`, `Twist` или `Disposition`).
- `CandleType` – используемый таймфрейм свечей.
- `AllowBuy` – разрешение на открытие длинных позиций.
- `AllowSell` – разрешение на открытие коротких позиций.
- `Volume` – объём сделки, унаследованный от базового класса `Strategy`.

## Правила входа и выхода

### Breakdown
- Покупка при пересечении сигналом уровня 0 вверх.
- Продажа при пересечении уровня 0 вниз.

### Twist
- Покупка при развороте сигналной линии вверх после снижения.
- Продажа при развороте вниз после роста.

### Disposition
- Покупка при пересечении сигналом линии Oracle снизу вверх.
- Продажа при пересечении сверху вниз.

При появлении противоположного сигнала текущая позиция закрывается и открывается новая в обратном направлении. Используются рыночные заявки.

## Логика индикатора

Для каждой свечи выполняются шаги:
1. Вычисляются RSI и CCI с периодом `OraclePeriod`.
2. По последним значениям CCI и RSI рассчитываются четыре разности.
3. Линия Oracle равна сумме максимальной и минимальной разностей.
4. Линия Signal — простое скользящее среднее линии Oracle за `Smooth` свечей.

Подход сочетает импульс (RSI) и канал (CCI), что позволяет оценивать краткосрочное направление рынка.

## Примечания

- Стратегия работает только на закрытых свечах.
- Защитные стопы не реализованы; при необходимости используйте внешние средства управления рисками.


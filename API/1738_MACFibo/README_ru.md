# Стратегия MACFibo
[English](README.md) | [中文](README_cn.md)

Стратегия реализует систему MACFibo. Ожидается пересечение 5‑й EMA и 20‑й SMA. После пересечения алгоритм измеряет движение от цены закрытия бара пересечения (точка A) до последнего экстремума (точка B) и строит уровни расширения Фибоначчи. Сделки открываются по рынку, цели и стопы берутся из этих уровней. Дополнительно возможно закрытие убыточных позиций при пересечении быстрой EMA и средней SMA в противоположном направлении.

## Детали

- **Условия входа:**
  - **Покупка:** 5 EMA пересекает 20 SMA снизу вверх. Точка B — минимальный минимум с начала нисходящего движения.
  - **Продажа:** 5 EMA пересекает 20 SMA сверху вниз. Точка B — максимальный максимум с начала восходящего движения.
- **Условия выхода:**
  - Тейк‑профит на уровне 161.8% Фибоначчи или минимальном расстоянии тейк‑профита.
  - Стоп‑лосс на уровне 38.2% Фибоначчи или максимальном расстоянии стоп‑лосса.
  - Дополнительное закрытие, если 5 EMA пересекает 8 SMA против позиции и сделка убыточна.
- **Фильтры:**
  - Торговля только между заданными часами начала и конца.
  - Возможность отключить торговлю в понедельник или пятницу.
- **Параметры:**
  - `FastLength` – период быстрой EMA.
  - `MidLength` – период средней SMA для защитного выхода.
  - `SlowLength` – период медленной SMA для определения тренда.
  - `MinTakeProfit` – минимальный тейк‑профит в единицах цены.
  - `MaxStopLoss` – максимальный стоп‑лосс в единицах цены.
  - `StartHour` / `EndHour` – разрешённый диапазон времени торговли.
  - `FridayTrade` / `MondayTrade` – включение торговли в эти дни.
  - `CloseAtFastMid` – закрывать убыточные позиции при пересечении fast/mid.
  - `CandleType` – тип свечей для расчётов.

# Timer EA 策略
[English](README.md) | [Русский](README_ru.md)

该策略将 MetaTrader 平台的 TimerEA 机器人移植到 StockSharp，目标是在预设的日期时间开仓与平仓，并可按需配合
挂单、追踪止损与保本机制。

## 交易逻辑

- **时间计划**
  - 当首根完成的K线到达设定分钟时，`OpenTime` 触发建仓逻辑。
  - `CloseTime` 用于强制平仓，并在需要时撤销尚未成交的挂单。
- **下单方式**
  - 支持市价、止损或限价入场。挂单按照价格步长的偏移量放置，并可设置过期分钟数。
- **方向控制**
  - 分离的开多 / 开空开关决定允许的方向，每个方向在一次运行中仅发送一笔订单。
- **资金管理**
  - 可选择固定下单量，或使用账户余额乘以 `RiskFactor` 的风控模式，再现原始 MQL 的手数计算方式。
  - 止盈与止损距离以价格步长表示，入场后立即重新计算。
  - 当盈利超过 `BreakEvenSteps` 缓冲后，追踪止损会保持固定差值，并且只有当价格继续向盈利方向移动
    超过 `TrailingStep` 时才会再次移动。
- **保护机制**
  - 保本阈值在达到最小盈利之前禁用追踪止损。
  - 过期的挂单会被自动撤销。

## 默认参数

- 下单模式：Market。
- 多空开关：均关闭。
- 止盈 / 止损：各 10 个价格步长。
- 追踪止损与保本：关闭。
- 挂单距离：10 个步长，过期时间 60 分钟。
- 下单手数：Manual volume = 1.0（余额模式下 RiskFactor = 1.0）。
- K线类型：1 分钟。

## 注意事项

- 策略仅处理已完成的K线，因此信号会有至多一根K线的延迟。
- StockSharp 采用净头寸模型，即使同时打开多空开关也无法维持双向仓位。
- 距离通过 `Security.PriceStep` 计算；若品种未设置价格步长，则按照绝对价格差处理。

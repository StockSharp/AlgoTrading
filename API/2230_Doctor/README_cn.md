# Doctor 策略

将 MQL 中的策略 15233 "Doctor" 转换为 StockSharp 的实现。

## 概述
策略结合多种经典指标以识别趋势和动量：

- **趋势方向**：通过 40 周期加权移动平均线 (WMA) 的斜率判断。
- **相对位置**：将长期 WMA(400) 与最近三根K线的高低点比较。
- **动量确认**：使用 RSI(14) 和 RSI(5)。
- **趋势反转过滤**：来自 Parabolic SAR。

当所有多头条件满足时开多仓，所有空头条件满足时开空仓。出现反向信号或触及保护水平时平仓。可选的追踪止损在价格盈利超过止损距离的一半后上移止损。

## 参数
- `StopLossTicks` – 止损距离（以跳动单位计）。
- `TakeProfitTicks` – 止盈距离（以跳动单位计）。
- `TrailingStop` – 是否启用追踪止损。
- `CandleType` – 使用的K线周期，默认30分钟。

## 交易规则
1. **做多** 当：
   - WMA(40) 斜率向上；
   - WMA(400) 位于最近三根K线的最高点之上；
   - RSI(14) 高于50且 RSI(5) 低于 RSI(14)；
   - 无已开的多单。
2. **做空** 当：
   - WMA(40) 斜率向下；
   - WMA(400) 位于最近三根K线的最低点之下；
   - RSI(14) 低于50且 RSI(5) 高于 RSI(14)；
   - 无已开的空单。
3. **离场** 当出现反向条件或价格触及止损/止盈。追踪止损在利润达到一半距离后移动。

## 指标
- 加权移动平均 (40, 400)
- 相对强弱指数 (14, 5)
- 抛物线转向指标 (Parabolic SAR)

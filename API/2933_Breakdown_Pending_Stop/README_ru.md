# Стратегия Breakdown Pending Stop

## Общее описание
Стратегия воспроизводит эксперта MetaTrader «breakdown»: каждый день она рассчитывает диапазон предыдущей сессии, размещает отложенные стоп-заявки за границами этого диапазона и переносит защитный стоп по ступенчатому правилу, когда позиция начинает приносить прибыль.

## Логика работы
- **Подготовка по дневным данным.** После закрытия дневной свечи сохраняются максимум и минимум. В начале новой сессии все старые заявки снимаются и выставляются новые Buy Stop и Sell Stop с отступом `Min Distance (ticks)` от предыдущего максимума и минимума.
- **Переустановка заявок.** При любом исполнении или начале нового дня оставшиеся заявки отменяются и мгновенно создаётся новая пара с теми же уровнями, что полностью соответствует поведению исходного MQL-советника.
- **Управление рисками.** При открытии позиции рассчитываются стоп-лосс и тейк-профит на основе количества тиков. Алгоритм трейлинг-стопа передвигает защитный уровень только после того, как прибыль превысила сумму `Trailing Stop (ticks) + Trailing Step (ticks)`.
- **Выход из позиции.** Сделка закрывается при достижении стоп-лосса или тейк-профита. Если активируется трейлинг-стоп, стратегия закрывает позицию рыночной заявкой, что имитирует вызов `PositionModify` в оригинале.

## Параметры
| Параметр | Описание |
|----------|----------|
| `Working Candles` | Таймфрейм рабочих свечей для мониторинга цены и сопровождения позиции (по умолчанию 15 минут). |
| `Stop Loss (ticks)` | Начальный стоп-лосс в тиках, преобразуется в абсолютную цену с учётом шага цены. Ноль отключает стоп. |
| `Take Profit (ticks)` | Начальный тейк-профит в тиках, ноль отключает цель. |
| `Trailing Stop (ticks)` | Дистанция трейлинг-стопа. При значении 0 трейлинг отключён. |
| `Trailing Step (ticks)` | Дополнительное требуемое движение до переноса трейлинг-стопа. |
| `Min Distance (ticks)` | Отступ от максимумов/минимумов предыдущего дня при выставлении стоп-заявок. |
| `Order Volume` | Объём обеих отложенных заявок. |

## Рекомендации
- Используйте стратегию на инструментах с надёжной дневной историей, иначе уровни предыдущего дня будут некорректны.
- Предполагается фиксированный шаг цены. Если тик меняется динамически, скорректируйте входные параметры.
- Модель управления капиталом из оригинального MQL (расчёт объёма от свободной маржи) не реализована — размер позиции задаётся параметром `Order Volume`.
- Python-реализация пока отсутствует.

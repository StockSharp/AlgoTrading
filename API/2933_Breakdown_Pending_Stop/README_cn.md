# Breakdown Pending Stop 策略

## 策略概述
该策略复刻 MetaTrader 平台上的 "breakdown" 专家顾问，通过监控前一日的价格区间在新交易日自动挂出突破性买入/卖出止损单，并在仓位获利时使用阶梯式的追踪止损算法保护收益。

## 工作原理
- **日线准备**：每日 K 线收盘后记录该日的最高价和最低价。下一交易日开始时先取消残余挂单，再在前高上方与前低下方分别放置买入止损和卖出止损，`Min Distance (ticks)` 参数用于给水平留出缓冲距离。
- **挂单维护**：无论挂单被触发还是进入新交易日，策略都会取消旧挂单并重新按相同的前一日区间提交新的挂单，从而始终保持双向突破机会，与原始 MQL 逻辑一致。
- **风控设置**：成交后按照输入的 tick 距离自动计算止损与止盈位置。追踪止损要求价格先取得 `Trailing Stop (ticks) + Trailing Step (ticks)` 的利润后才会抬高/压低止损，实现与原 EA 相同的阶梯式移动。
- **退出机制**：当价格触及当前止损或止盈时立即平仓；若触发追踪止损条件，则以市价平仓，效果等同于在 MetaTrader 中对仓位执行 `PositionModify`。

## 参数说明
| 参数 | 说明 |
|------|------|
| `Working Candles` | 用于管理仓位和检查追踪止损的工作周期，默认 15 分钟。 |
| `Stop Loss (ticks)` | 初始止损距离（按合约最小变动价位换算），为 0 则不设置。 |
| `Take Profit (ticks)` | 初始止盈距离，为 0 则不设置。 |
| `Trailing Stop (ticks)` | 追踪止损的核心距离，为 0 则关闭追踪止损。 |
| `Trailing Step (ticks)` | 追踪止损每次移动所需额外盈利幅度。 |
| `Min Distance (ticks)` | 挂单相对于前高/前低的附加偏移。 |
| `Order Volume` | 两个挂单使用的下单数量。 |

## 使用提示
- 确保交易品种提供稳定的日线数据，以便正确计算上一交易日区间。
- 策略假设最小跳动价位固定，如合约 tick 值会变化需手动调整参数。
- 原 MQL 脚本中的基于账户权益的仓位计算未引入，仓位大小由 `Order Volume` 参数直接控制。
- 暂未提供该策略的 Python 版本。

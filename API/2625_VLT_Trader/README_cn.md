# VLT Trader 策略

## 概述

**VLT Trader** 是从原始 MQL 版本移植到 StockSharp 的波动率收缩突破策略。策略监控最近蜡烛的波动范围，当最新
完成的蜡烛成为指定窗口内的最小范围时，在区间两侧放置突破性止损单，以捕捉盘整后的强势行情。

## 交易逻辑

1. **新蜡烛过滤**：每根新蜡烛仅检查一次条件。如果当前蜡烛的开盘价高于上一根蜡烛的最高价，则忽略信号，
   以避免跳空直接触发挂单。
2. **波动率筛选**：计算上一根已完成蜡烛的振幅，并与最近 `CandleCount` 根蜡烛（且振幅小于 `MaxCandleSizePips`）
   中的最小振幅比较。如果最新振幅更小，则认为出现有效的收缩。
3. **下单逻辑**：当条件满足时，策略放置两个挂单：
   - 当净头寸非多头时，在上一根高点上方 `10` 个点设置 **买入止损单**。
   - 当净头寸非空头时，在上一根低点下方 `10` 个点设置 **卖出止损单**。
   在放置新的挂单之前，会取消同方向的旧挂单以避免重复。
4. **风险控制**：挂单成交后，自动附加止盈和止损单，距离分别为 `TakeProfitPips` 与 `StopLossPips`。当仓位归零时，
   这些保护性订单会自动撤销。

## 参数

| 参数 | 说明 |
|------|------|
| `Volume` | 每次挂单使用的下单量。 |
| `TakeProfitPips` | 成交后止盈单与入场价之间的点数距离。 |
| `StopLossPips` | 成交后止损单与入场价之间的点数距离。 |
| `MaxCandleSizePips` | 参与比较的历史蜡烛最大允许振幅。 |
| `CandleCount` | 用于寻找最小振幅的历史蜡烛数量。 |
| `CandleType` | 进行分析的蜡烛时间框架。 |

## 实现细节

- 点值依据合约的最小价格步长计算。当价格步长小于或等于 `0.001` 时，会乘以 `10`，以符合 MetaTrader 对 3 或
  5 位小数品种的点值定义。
- 蜡烛振幅存储在长度为 `CandleCount` 的先进先出队列中，完整复现原专家顾问的历史扫描流程。
- 所有订单均通过 StockSharp 的高级 API 创建，并在条件失效或仓位平仓时自动取消。
- 代码中的注释为英文，而三种语言的 README 提供了完整的文字说明。

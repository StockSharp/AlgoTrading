# Стратегия VLT Trader

## Общее описание

**VLT Trader** — это портированная на StockSharp стратегия прорыва волатильности, изначально написанная на MQL. Алгоритм ищет
узкие свечи (волатильность сжимается), а затем размещает стоп-заявки на пробой диапазона. Такой подход позволяет ловить резкие
движения после консолидации цены.

## Логика работы

1. **Обработка нового бара.** Проверка условий выполняется ровно один раз для каждой новой свечи. Если текущая свеча открылась
   выше максимума предыдущей, сделка пропускается — это защита от гэпов, которые сразу пробивают уровень входа.
2. **Фильтр волатильности.** Диапазон (High-Low) последней завершённой свечи сравнивается с минимальным диапазоном среди последних
   `CandleCount` свечей, чья величина меньше `MaxCandleSizePips`. Если текущая свеча оказалась меньше всех отобранных, сигнал
   считается подтверждённым.
3. **Размещение заявок.** При выполнении условий создаются две стоп-заявки:
   - **Buy Stop** на `10` пунктов выше максимума предыдущей свечи, если нет открытой длинной позиции.
   - **Sell Stop** на `10` пунктов ниже минимума предыдущей свечи, если нет открытой короткой позиции.
   Перед установкой новых заявок соответствующие отложенные ордера отменяются, чтобы избежать дублирования.
4. **Защита позиции.** После исполнения стоп-заявки стратегия автоматически ставит тейк-профит и стоп-лосс на расстоянии
   `TakeProfitPips` и `StopLossPips` от цены входа. При закрытии позиции защитные ордера снимаются.

## Параметры

| Параметр | Описание |
|----------|----------|
| `Volume` | Объём ордера, отправляемый в рынок. |
| `TakeProfitPips` | Расстояние до тейк-профита в пунктах. |
| `StopLossPips` | Расстояние до стоп-лосса в пунктах. |
| `MaxCandleSizePips` | Максимальный диапазон свечей, участвующих в расчёте минимума. |
| `CandleCount` | Число свечей истории, анализируемых фильтром волатильности. |
| `CandleType` | Таймфрейм свечей, используемых для расчётов. |

## Особенности реализации

- Размер «пункта» вычисляется на основе шага цены инструмента. Если шаг меньше либо равен `0.001`, он умножается на `10`, что
  соответствует логике MetaTrader для инструментов с 3 или 5 знаками после запятой.
- Диапазоны свечей хранятся в очереди фиксированной длины `CandleCount`, что повторяет логику перебора истории в оригинальном
  советнике.
- Все ордера создаются через высокоуровневый API StockSharp и отменяются автоматически при устаревании условий или закрытии
  позиции.
- Комментарии в коде даны на английском языке, а подробное текстовое описание вынесено в многоязычные README-файлы.

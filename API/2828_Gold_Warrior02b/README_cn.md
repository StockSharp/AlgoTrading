# GoldWarrior02b 策略
[English](README.md) | [Русский](README_ru.md)

该策略源自 MetaTrader 专家顾问 *GoldWarrior02b*，现移植到 StockSharp 平台。
策略结合自定义的动量指标、CCI 与简化的 ZigZag，用于在每个 15 分钟区间的最后时刻进行交易。

实现基于 StockSharp 的高级 API，并以净头寸方式运作。
原始脚本的多层对冲在此未实现，因为 StockSharp 默认使用净额结算模式。

## 核心思路

- 自定义动量指标计算每根蜡烛的开收盘差值的滑动平均。
- 通过 CCI 识别超买/超卖反转及强势动量。
- 依据最近高低点生成 ZigZag 方向，避免逆势交易。
- 仅在第 14、29、44、59 分钟且秒数>=45 时评估信号。
- 通过止损、止盈、移动止损及整体盈利目标管理风险。

## 入场条件

只有当前没有持仓，且蜡烛在上述时间窗口内收盘时才会考虑开仓。

### 多头
- ZigZag 指向下方（最新低点低于前一个低点）。
- 满足以下任一条件：
  - CCI 较前值上升，前值低于 -50，当前值低于 -30，动量从负转正，且上一动量为负。
  - 或 CCI 低于 -200，上一 CCI 更低，动量低于买入阈值，且上一动量弱于当前动量。

### 空头
- ZigZag 指向上方（最新高点高于前一个高点）。
- 满足以下任一条件：
  - CCI 较前值下降，前值高于 50，当前值高于 30，动量从正转负，且上一动量为正。
  - 或 CCI 高于 200，上一 CCI 更高，动量高于卖出阈值，且上一动量强于当前动量。

若上一根动量值位于买入和卖出阈值之间，则忽略信号。

## 出场条件

- **止损**：价格触及止损距离时立即平仓。
- **止盈**：价格达到设定的盈利距离时平仓。
- **移动止损**：当浮盈达到 `(TrailingStop + TrailingStep)` 点后，移动止损跟随价格，保持 `TrailingStop` 点的距离。
  一旦价格回踩到移动止损位置即退出。
- **总体盈利目标**：未实现盈亏达到设定金额（账户货币）时强制平仓。

## 参数

| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| `BaseVolume` | 入场手数。 | `0.1` |
| `StopLossPoints` | 止损距离（点）。 | `100` |
| `TakeProfitPoints` | 止盈距离（点）。 | `150` |
| `TrailingStopPoints` | 移动止损基础距离。 | `5` |
| `TrailingStepPoints` | 启动移动止损前的额外距离。 | `5` |
| `ImpulsePeriod` | CCI 与动量的计算周期。 | `21` |
| `ZigZagDepth` | 新 ZigZag 拐点之间的最小柱数。 | `12` |
| `ZigZagDeviation` | 确认拐点所需的最小价格波动（点）。 | `5` |
| `ZigZagBackstep` | 接受新拐点前的最少柱数。 | `3` |
| `ProfitTarget` | 触发强制平仓的未实现盈利阈值。 | `300` |
| `ImpulseSellThreshold` | 做空动量阈值（通常为负）。 | `-30` |
| `ImpulseBuyThreshold` | 做多动量阈值（通常为正）。 | `30` |
| `CandleType` | 计算所用的时间框架。 | `5 分钟` |

## 说明

- 动量指标等同于对开收盘差值进行滑动平均，并按 `PriceStep` 缩放。
- 移动止损和盈利计算使用 `PriceStep` 与 `StepPrice` 将点数换算为账户货币。
- 原策略包含加仓与对冲机制，当前移植版本仅保留单一净头寸，与 StockSharp 的撮合方式一致。
- 若需更贴近原策略，可订阅 15 分钟蜡烛，并确保数据延迟足以在收盘后及时执行。

## 免责声明

该示例仅用于教学目的。投入真实资金前，请在真实数据、延迟与手续费条件下充分测试。

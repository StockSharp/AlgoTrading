# Reverse Strategy

## Обзор

Reverse Strategy — это стратегия возврата к среднему, которая использует индикаторы Bollinger Bands и Relative Strength Index (RSI) для поиска истощённых движений. Когда цена уходит за границы полос Боллинджера и затем возвращается внутрь вместе с разворотом RSI из зоны перепроданности или перекупленности, стратегия предполагает разворот и открывает позицию против предыдущего движения. Управление риском реализовано через фиксированные стоп-лосс и тейк-профит, основанные на ширине полос.

## Логика торговли

1. Подписка на заданный тип свечей (по умолчанию 5-минутные).
2. Расчёт полос Боллинджера на основе простого скользящего среднего с указанным периодом и множителем стандартного отклонения.
3. Расчёт RSI с указанным периодом.
4. Отслеживание предыдущей завершённой свечи для определения пробоев:
   - **Сигнал на покупку**: предыдущий закрытие ниже предыдущей нижней полосы и RSI ниже уровня перепроданности. Текущее закрытие должно подняться выше нижней полосы, а RSI — вернуться выше порога перепроданности.
   - **Сигнал на продажу**: предыдущий закрытие выше предыдущей верхней полосы и RSI выше уровня перекупленности. Текущее закрытие должно опуститься ниже верхней полосы, а RSI — упасть ниже порога перекупленности.
5. При покупке стратегия отправляет рыночную заявку, ставит защитный стоп на одну сигму ниже цены входа и цель на две сигмы выше.
6. При продаже стратегия отправляет рыночную заявку, ставит защитный стоп на одну сигму выше цены входа и цель на две сигмы ниже.
7. Сопровождение позиции:
   - Длинные позиции закрываются при касании верхней полосы, достижении стопа или цели.
   - Короткие позиции закрываются при касании нижней полосы, достижении стопа или цели.

## Параметры

| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| `CandleType` | Таймфрейм свечей для подписки. | 5 минут |
| `BollingerPeriod` | Период расчёта среднего и стандартного отклонения полос Боллинджера. | 20 |
| `BollingerWidth` | Множитель стандартного отклонения для полос. | 2.0 |
| `RsiPeriod` | Период расчёта RSI. | 14 |
| `RsiOverbought` | Уровень RSI для определения перекупленности и сигналов на продажу. | 70 |
| `RsiOversold` | Уровень RSI для определения перепроданности и сигналов на покупку. | 30 |

Все параметры доступны для оптимизации в StockSharp Designer или Runner. Изменяя уровни RSI, можно регулировать частоту сигналов, а изменение ширины полос определяет степень отклонения цены перед входом.

## Практические рекомендации

- Стратегия использует высокоуровневый API StockSharp с автоматической подпиской на свечи и привязкой индикаторов.
- Сделки совершаются рыночными ордерами (`BuyMarket`/`SellMarket`), а контроль стопов и целей выполняется в коде без установки заявок в стакане.
- Базовые настройки ориентированы на внутридневную торговлю; для других таймфреймов измените параметр `CandleType`.
- При работе на реальном счёте рекомендуется дополнить стратегию фильтрами тренда, волатильности или торговых сессий.

# KPrmSt Cross 策略

## 概述
KPrmSt Cross 策略移植自 MetaTrader 5 专家 `exp_kprmst.mq5`。策略使用类似随机指标的 KPrmSt 振荡器，当主线与信号线交叉时捕捉趋势反转。

策略订阅指定时间框架的K线，并计算 `Stochastic` 指标（作为 KPrmSt 的近似）。当 %K 线从上向下穿越 %D 线时开多仓；当 %K 线从下向上穿越 %D 线时开空仓，并相应地关闭已有仓位。

## 参数
- `Candle Type` – 计算所用 K 线的时间框架。
- `K Period` – 主线计算的周期。
- `D Period` – 信号线的平滑周期。
- `Slowing` – 对 %K 线的额外平滑。
- `Stop Loss` – 以价格单位表示的止损，0 表示禁用。
- `Take Profit` – 以价格单位表示的止盈，0 表示禁用。

## 交易逻辑
1. 仅处理已经完成的 K 线。
2. 保存振荡器的历史值以检测交叉。
3. 当 %K 由上向下穿越 %D 时，开多仓或平空仓。
4. 当 %K 由下向上穿越 %D 时，开空仓或平多仓。
5. 可选的止损和止盈在达到设定的价格时平仓。

## 说明
- 原始 KPrmSt 指标用 StockSharp 的 `Stochastic` 指标进行近似。
- 原专家中的资金管理功能未实现。
- 策略需要支持的行情数据与交易通道才能运行。

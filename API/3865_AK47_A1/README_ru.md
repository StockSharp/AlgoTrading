# AK47 A1
[English](README.md) | [中文](README_cn.md)

Порт советника «AK47_A1». Стратегия сочетает Аллигатор Билла Уильямса, осцилляторы DeMarker и Williams %R, а также фракталы, чтобы открывать позиции только при выходе рынка из флэта.

## Детали
- **Данные**: свечи по параметру `CandleType`.
- **Индикаторы**:
  - Линии Аллигатора — это сглаженные скользящие средние 13/8/5 периодов со сдвигами 8/5/3 баров, рассчитываемые по медианной цене.
  - DeMarker (период 13) должен быть ≥ 0.5 для покупок и ≤ 0.5 для продаж.
  - Williams %R (период 14) нормализуется к диапазону `[0;1]`; значение на предыдущем баре должно находиться между 0.25 и 0.75, чтобы фильтровать перекупленность/перепроданность.
  - Фракталы ищутся по последним 5 экстремумам и считаются «свежими» в течение трёх баров.
- **Условия входа**:
  - Линии Аллигатора должны расходиться минимум на `SpanGatorPoints` пунктов между каждой парой.
  - **Long**: актуален нижний фрактал, DeMarker ≥ 0.5 и фильтр Williams %R разрешает сделку.
  - **Short**: актуален верхний фрактал, DeMarker ≤ 0.5 и фильтр Williams %R разрешает сделку.
  - Перед открытием новой позиции противоположное направление закрывается.
- **Условия выхода**:
  - Жёсткий стоп-лосс и тейк-профит по параметрам `StopLossPoints` и `TakeProfitPoints` (переводятся в абсолютную цену через шаг инструмента).
  - Опциональный трейлинг-стоп на расстоянии `TrailingStopPoints` пунктов от цены закрытия при движении в прибыльную сторону.
  - При появлении противоположного сигнала текущая позиция закрывается перед разворотом.
- **Значения по умолчанию**:
  - `SpanGatorPoints` = 0.5
  - `TakeProfitPoints` = 100
  - `StopLossPoints` = 0 (отключено)
  - `TrailingStopPoints` = 50
  - `CandleType` = часовые свечи

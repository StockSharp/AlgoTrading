# Scalping Assistant

**Scalping Assistant** — это прямая конверсия советника MetaTrader 4 "Scalper Assistant v1.0". Стратегия не открывает сделки самостоятельно. Она отслеживает позиции по выбранному инструменту и управляет защитными заявками в стиле MetaTrader.

## Принцип работы

1. При появлении новой позиции стратегия моментально выставляет стоп-лосс и тейк-профит на основе заданных расстояний (в шагах цены).
2. Подписка на level1 обеспечивает постоянный контроль лучшего bid/ask и позволяет оценивать текущую прибыль позиции.
3. Как только прибыль достигает значения `BreakEvenTriggerPoints`, исходный стоп отменяется и перевыставляется на уровне безубытка с учётом заданного смещения.
4. После перевода в безубыток стоп больше не двигается. Тейк-профит остаётся неизменным.
5. При закрытии позиции все защитные заявки отменяются, внутренние переменные сбрасываются, и стратегия готова к следующей ручной сделке.

## Особенности использования

- Подключите стратегию к коннектору/портфелю и открывайте сделки вручную или другой логикой. Ассистент возьмёт на себя защиту этих позиций.
- Логика опирается на котировки level1, поэтому убедитесь, что коннектор предоставляет лучшие bid/ask.
- Под "пунктами" подразумевается шаг цены инструмента (`Security.PriceStep`). Для форекса с пятью знаками это соответствует одному пункту (pip).

## Параметры

| Имя | Тип | Значение по умолчанию | Описание |
| --- | --- | --- | --- |
| `StopLossPoints` | `decimal` | `30` | Расстояние в шагах цены для первичного стоп-лосса. Установите `0`, чтобы не отправлять стоп. |
| `TakeProfitPoints` | `decimal` | `100` | Расстояние в шагах цены для первичного тейк-профита. Установите `0`, чтобы не отправлять тейк. |
| `BreakEvenTriggerPoints` | `decimal` | `15` | Прибыль в шагах цены, необходимая для перевода стопа в безубыток. |
| `BreakEvenOffsetPoints` | `decimal` | `5` | Дополнительное смещение (в шагах цены) относительно цены входа при переводе стопа в безубыток. |

## Статус конверсии

- ✅ Основная логика: перенос стопа в безубыток по параметрам MetaTrader.
- ✅ Высокоуровневый API: используется `SubscribeLevel1()` с привязкой делегата.
- ✅ Защитные заявки: выставляются через `SellStop`, `BuyStop`, `SellLimit`, `BuyLimit`.
- ❌ Версия на Python отсутствует — реализована только стратегия на C#, как и требуется.

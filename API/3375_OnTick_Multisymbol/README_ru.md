# Стратегия OnTick Multisymbol

## Обзор
- Воссоздаёт шаблон MetaTrader 5 **OnTick(string symbol).mq5**, в котором каждый тик по заданным инструментам отправляется в единый обработчик.
- Подписывается на поток сделок (tick data) по каждому найденному инструменту и пишет сообщение в журнал при получении тика.
- Реализует параметры StockSharp, чтобы список отслеживаемых инструментов можно было менять из интерфейса или в процессе оптимизации.

## Возможности оригинального эксперта
- Шаблон MQL5 содержит обработчик `OnTick(string symbol)`, печатающий название инструмента, сгенерировавшего событие.
- Список инструментов задаётся через макрос `SYMBOLS_TRADING` либо специальный ключ `MARKET_WATCH`.
- Функции инициализации, обработки событий графика и деинициализации оставлены пустыми.

## Адаптация под StockSharp
- В стратегии добавлен параметр **Symbols** (строка с разделителями), соответствующий макросу `SYMBOLS_TRADING` из MQL5.
- Каждый найденный `Security` подписывается через `SubscribeTrades(security)`, а полученный тик фиксируется в логах вместе с меткой времени, ценой и объёмом, что повторяет вызов `Print()` в оригинале.
- Если `SecurityProvider` не может найти инструмент, стратегия выводит предупреждение и продолжает работу с остальными символами.
- Ключевое слово `MARKET_WATCH` автоматически не обрабатывается: выводится предупреждение, чтобы пользователь указал конкретные идентификаторы, доступные в текущем источнике данных.

## Параметры
| Имя | Описание | Примечания |
| --- | --- | --- |
| `Symbols` | Список идентификаторов инструментов через запятую/точку с запятой/пробел. | Значение по умолчанию — `EURUSD,GBPUSD,USDJPY,USDCHF`. Основной `Security`, назначенный стратегии, контролируется всегда, даже если отсутствует в списке. |

## Подписки на данные
- `SubscribeTrades(security)` — поток тиков по каждому инструменту, что повторяет тик-ориентированную логику шаблона.
- `GetWorkingSecurities()` сообщает дизайнерам и оптимизатору, что стратегии требуется поток тиков по каждому инструменту.

## Рекомендации по использованию
1. Подключите стратегию к коннектору, где настроен `SecurityProvider`.
2. При необходимости назначьте свойство `Security`, чтобы дополнительно следить за конкретным инструментом.
3. Измените параметр **Symbols**, указав доступные в источнике идентификаторы через разделители.
4. Запустите стратегию: каждый тик будет приводить к записи вида `Tick received for EURUSD@2024-02-01T10:00:00Z: price=1.08450, volume=1`.
5. Анализируйте журнал или расширяйте метод `OnTrade`, если необходима дополнительная обработка.

## Отличия от версии MQL
- Используются параметры времени выполнения вместо препроцессорных макросов, что позволяет управлять настройками из UI.
- При отсутствии инструмента выводится предупреждение, а не молчаливое игнорирование.
- Автоматическое определение `MARKET_WATCH` отсутствует — требуются явные идентификаторы или доработка стратегии.

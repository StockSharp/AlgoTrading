# Стратегия закрытия по времени

Эта утилитарная стратегия автоматически закрывает активность в указанное пользователем локальное время.
Она может отменять отложенные заявки и закрывать рыночные позиции в соответствии с выбранными фильтрами.

## Параметры

- `CloseAll` – при включении закрываются все активные заявки и позиции.
- `CloseBySymbol` – обрабатываются только элементы с кодом инструмента, равным `SymbolToClose`.
- `CloseByMagicNumber` – закрываются заявки, у которых `UserOrderId` совпадает с `MagicNumber`.
- `CloseByTicket` – закрывается заявка с идентификатором `TicketNumber`.
- `ClosePendingOrders` – отменять рабочие лимитные и стоп-заявки.
- `CloseMarketOrders` – закрывать открытые позиции рыночными заявками.
- `TimeToClose` – локальное время начала процедуры закрытия.
- `SymbolToClose` – фильтр кода инструмента для `CloseBySymbol`.
- `MagicNumber` – ожидаемое значение `Order.UserOrderId`.
- `TicketNumber` – ожидаемое значение идентификатора заявки.

## Логика

После запуска стратегия планирует однократное задание на момент `TimeToClose`.
Когда время наступает, выполняются следующие шаги:

1. Перебор всех активных заявок и проверка по выбранным фильтрам.
2. Соответствующие отложенные заявки отменяются.
3. При включенном `CloseMarketOrders` подходящие позиции закрываются рыночными заявками.

Поведение полностью повторяет исходный скрипт MQL, закрывающий заявки в заданное время,
но реализовано на высокоуровневом API StockSharp.

## Примечания

- Если `TimeToClose` уже прошло, закрытие запускается сразу.
- Фильтры объединяются по логике ИЛИ; `CloseAll` имеет приоритет над остальными.
- Из-за различий с MQL значения `MagicNumber` и `TicketNumber` трактуются как строки.

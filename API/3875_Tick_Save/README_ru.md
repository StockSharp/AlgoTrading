# Стратегия Tick Save

## Обзор

**Tick Save Strategy** — порт эксперта MetaTrader 4 `TickSave` на платформу StockSharp. Стратегия непрерывно отслеживает лучшую цену покупки (best bid) для списка инструментов из параметра `Symbol List` и записывает каждое изменение в CSV-файлы. Структура хранения полностью повторяет оригинальный советник: для каждого инструмента создаётся отдельный файл на месяц с возможностью добавления диагностических меток.

## Ключевые особенности

- Подписка на поток Level 1 для всех указанных инструментов.
- Сохранение времени сервера и новой цены bid при каждом изменении котировки.
- Автоматическое создание каталога `<Output Root>/<Server Folder>/<Symbol>_YYYY.MM.csv`.
- По желанию записываются диагностические строки `Connection lost` и `Expert was stopped`, как в MT4-версии.
- Поддержка любых инструментов, доступных через `SecurityProvider` стратегии.

## Параметры

| Имя | Описание |
| --- | -------- |
| `Symbol List` | Список идентификаторов инструментов через запятую. |
| `Write Warnings` | При включении добавляет диагностические строки к каждому тиковому событию и при остановке. |
| `Output Root` | Корневая папка для CSV-файлов. По умолчанию создаётся подкаталог `Ticks` рядом с приложением. |
| `Server Folder` | Необязательный подкаталог с именем сервера/среды. При пустом значении берётся код площадки портфеля или инструмента. |

## Формат данных

Каждая строка CSV содержит две колонки:

1. Время сервера в формате `yyyy-MM-dd HH:mm:ss`.
2. Цена bid в инвариантном формате.

Если `Write Warnings` включён, дополнительные строки служат маркерами обрыва соединения и завершения работы, полностью соответствуя поведению оригинального эксперта.

## Инструкция по использованию

1. Подключите стратегию к коннектору, который предоставляет нужные инструменты.
2. Заполните `Symbol List` идентификаторами, распознаваемыми текущим `SecurityProvider`.
3. Настройте каталоги и при необходимости активируйте диагностические метки.
4. Запустите стратегию и контролируйте формирование CSV-файлов в выбранном каталоге.

# Стратегия сбора тиков лучших цен Bid/Ask

## Обзор

`AskBidTicksStrategy` отслеживает каждое изменение лучших цен покупателя и продавца из потока Level 1 и сохраняет записи в CSV-файл. Стратегия повторяет функциональность оригинального скрипта MQL, предназначенного для высокоточного анализа микро-структуры рынка, и дополняет её настройками, принятыми в экосистеме StockSharp.

## Основная логика

1. Подписка на обновления лучших цен через высокоуровневый метод `SubscribeLevel1()`.
2. При получении данных одновременно по Bid и Ask выполняется форматирование времени и цен согласно выбранным параметрам.
3. Запись строки в CSV-файл и добавление краткой информационной записи в журнал стратегии.

## Параметры

| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| File Name | Имя выходного CSV-файла. При значении `Use default` создаётся `<yyyy.MM.dd>_<symbol>.csv` в рабочей директории. | Use default |
| Timestamp Mode | Форматирование временной метки (стандартное время, миллисекунды, относительные миллисекунды). | Millisecond |
| Delimiter | Символ-разделитель столбцов CSV. | Tab |

## Файлы

- `CS/AskBidTicksStrategy.cs` – реализация стратегии на C#.

## Как использовать

1. Прикрепите стратегию к инструменту с потоком Level 1.
2. Настройте параметры, если требуется собственный путь или другой разделитель.
3. Запустите стратегию и анализируйте создаваемый CSV-файл, чтобы получать покадровые данные лучших цен.

## Примечания

- Для меток времени используется локальные часы сервера, что упрощает сопоставление с другими файлами экспорта.
- Каждая запись сразу сбрасывается на диск, что помогает сохранить данные при неожиданных остановках.

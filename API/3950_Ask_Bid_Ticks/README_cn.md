# 买卖价跳动收集策略

## 概述

`AskBidTicksStrategy` 订阅一级盘口数据中的最优买价与卖价，并将每一次变动保存到 CSV 文件中。该策略复刻了原始 MQL 脚本用于微观结构研究的高精度行情记录功能，同时提供符合 StockSharp 平台的参数设置。

## 核心逻辑

1. 通过高层 API `SubscribeLevel1()` 订阅最优买卖价更新。
2. 当消息同时包含买价和卖价时，根据用户设定格式化时间戳与价格。
3. 将格式化后的记录追加到 CSV 文件，并在策略日志中输出提示信息。

## 参数

| 名称 | 说明 | 默认值 |
| --- | --- | --- |
| File Name | 输出 CSV 文件的自定义名称。设为 `Use default` 时，在工作目录下生成 `<yyyy.MM.dd>_<symbol>.csv`。 | Use default |
| Timestamp Mode | 控制时间戳的显示格式（标准格式、毫秒精度或相对毫秒）。 | Millisecond |
| Delimiter | CSV 列分隔符。 | Tab |

## 文件

- `CS/AskBidTicksStrategy.cs` – 策略的 C# 实现。

## 使用方法

1. 将策略附加到提供一级行情的标的上。
2. 如需自定义文件路径或分隔符，可在启动前修改参数。
3. 启动策略后，实时检查生成的 CSV 文件即可获得逐跳最优买卖价数据。

## 备注

- 策略使用本地机器时钟生成时间戳，以便与导出的 CSV 数据保持一致。
- 每条记录写入后立即刷新，确保在意外中断时仍能保留数据。

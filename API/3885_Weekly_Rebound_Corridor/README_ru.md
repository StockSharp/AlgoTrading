# Стратегия «Weekly Rebound Corridor»

## Описание
Стратегия «Weekly Rebound Corridor» является конверсией эксперта MetaTrader 4 `2_Otkat_Sys_v1_1`. Алгоритм ищет ценовой разрыв между закрытием предыдущей свечи и ценой открытия, наблюдавшейся 24 свечи назад. Если разрыв превышает заданный порог и наступил выбранный день недели, стратегия открывает позицию в первые минуты нового торгового дня, устанавливает защитные стоп-приказы и принудительно закрывает позицию перед завершением сессии.

## Логика работы
1. **Подготовка данных**
   - По умолчанию используются минутные свечи, однако тип свечей можно изменить параметром.
   - Хранится значение закрытия предыдущей свечи и поддерживается циклический буфер, возвращающий цену открытия 24 свечи назад.
2. **Поиск сигнала**
   - В выбранный день недели (нумерация MetaTrader: `0 = воскресенье`, `6 = суббота`) анализируются свечи, открывшиеся между 00:00 и 00:03 по локальному времени площадки.
   - Если историческая цена открытия (24 свечи назад) превышает закрытие предыдущей свечи больше, чем на установленный порог, открывается длинная позиция. При обратной ситуации открывается короткая позиция.
   - На один торговый день допускается только одна сделка.
3. **Управление позицией**
   - Стоп-лосс и тейк-профит задаются в пунктах и переводятся в цену на основе минимального шага цены инструмента.
   - Для длинных позиций тейк-профит увеличивается на дополнительные 3 пункта (как в исходном советнике).
   - Каждая закрытая свеча проверяется на достижение стоп-уровней; при срабатывании позиция закрывается рыночным ордером.
   - Если позиция открыта после 22:45 локального времени, она закрывается принудительно.

## Параметры
| Параметр | Описание | Значение по умолчанию |
|----------|----------|------------------------|
| `TakeProfitPoints` | Размер тейк-профита в пунктах. Для длинных сделок добавляются 3 дополнительных пункта. | `5` |
| `StopLossPoints` | Размер стоп-лосса в пунктах. | `49` |
| `TradeVolume` | Торговый объём рыночных заявок; корректируется по шагу объёма инструмента. | `1` |
| `CorridorPoints` | Минимальный разрыв между историческим открытием и последним закрытием. | `10` |
| `TradeDayOfWeek` | День недели в формате MetaTrader (`0 = воскресенье` … `6 = суббота`). | `5` (пятница) |
| `CandleType` | Тип свечей, используемый в расчётах. | `1 минута` |

## Дополнительные замечания
- Стратегия работает только с завершёнными свечами, что соответствует требованиям проекта.
- Перед началом торговли необходимо обеспечить наличие достаточной истории для заполнения буфера из 24 свечей.
- Параметры стратегии следует адаптировать под спецификацию инструмента (шаг цены, шаг объёма, расписание торгов).

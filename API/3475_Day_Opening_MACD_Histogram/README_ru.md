# Стратегия Day Opening MACD Histogram

## Общее описание
Стратегия воспроизводит логику советника MetaTrader «2 1000 1 0.7% 0.5 500lev st»: позиция открывается в начале каждого нового торгового дня, а направление выбирается по наклону гистограммы MACD. Система рассчитана на часовые свечи и использует фиксированные параметры управления капиталом из исходного MQL файла.

## Логика торговли
- Стратегия анализирует часовые свечи и определяет первую свечу каждого торгового дня.
- Для фильтрации направления используются значения гистограммы MACD на двух последних завершённых свечах предыдущего дня.
- Если гистограмма между этими свечами снизилась, в начале нового дня открывается длинная позиция.
- Если гистограмма выросла, открывается короткая позиция.
- Одновременно может быть открыта только одна позиция. При появлении обратного сигнала текущая позиция закрывается перед открытием новой.

## Управление рисками
- Первоначальный стоп-лосс: 875 пунктов (переводится в цену умножением на шаг цены инструмента).
- Тейк-профит: 510 пунктов.
- Трейлинг-стоп: 2172 пункта. Стоп следует за максимумом (для длинных) или минимумом (для коротких) с момента входа и заменяет первоначальный стоп, если становится ближе к цене.
- Функция переноса стопа в безубыток в исходной версии отключена и здесь также не используется.

## Параметры
| Название | Описание | Значение по умолчанию |
| -------- | -------- | --------------------- |
| `CandleType` | Тип свечей (по умолчанию часовые). | Часовые свечи |
| `MacdFastPeriod` | Период быстрой EMA в MACD. | 58 |
| `MacdSlowPeriod` | Период медленной EMA в MACD. | 195 |
| `MacdSignalPeriod` | Период сигнальной линии MACD. | 183 |
| `StopLossPoints` | Дистанция стоп-лосса в пунктах. | 875 |
| `TakeProfitPoints` | Дистанция тейк-профита в пунктах. | 510 |
| `TrailingStopPoints` | Дистанция трейлинг-стопа в пунктах. | 2172 |

## Примечания
- Используются только закрытые свечи, что соответствует опции «Use previous bar value» в оригинальной реализации и исключает подглядывание в будущее.
- Управление стопами и трейлингом выполняется самой стратегией, поэтому дополнительные защитные механизмы портфеля лучше не включать, чтобы избежать дублирования.
- Параметры рассчитаны на стандартное определение пункта. При работе с инструментами с другим шагом цены скорректируйте значения.

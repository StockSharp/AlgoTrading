# Стратегия Bullish & Bearish Harami Stochastic

**Bullish & Bearish Harami Stochastic Strategy** — порт StockSharp эксперта MetaTrader `expert_abh_bh_stoch.mq5` из каталога `MQL/310`. Оригинальный робот распознаёт свечные комбинации «бычье харами» и «медвежье харами» и допускает сделку только при подтверждении осциллятором Stochastic. Реализация на C# полностью повторяет логику, используя высокоуровневый API StockSharp, и добавляет подробный лог с визуализацией на графике.

## Ключевые идеи

- Анализ двух последних завершённых свечей для поиска фигур Bullish Harami и Bearish Harami.
- Подтверждение сигналов по линии %D стохастика: покупки — при значении ниже порога перепроданности, продажи — при значении выше порога перекупленности.
- Закрытие коротких позиций при отскоке %D выше выходных уровней и закрытие длинных позиций при падении %D ниже этих уровней.

## Параметры

| Параметр | Описание | Значение по умолчанию |
|----------|----------|-----------------------|
| `CandleType` | Таймфрейм свечей для распознавания паттернов. | `1 час` |
| `StochasticKPeriod` | Период расчёта стохастика %K. | `47` |
| `StochasticDPeriod` | Период сглаживания линии %D. | `9` |
| `StochasticSlowing` | Дополнительное сглаживание %K (параметр Slowing). | `13` |
| `MovingAveragePeriod` | Число свечей для усреднения тел свечей. | `5` |
| `OversoldLevel` | Порог перепроданности для подтверждения покупок. | `30` |
| `OverboughtLevel` | Порог перекупленности для подтверждения продаж. | `70` |
| `ExitLowerLevel` | Нижний уровень стохастика для выхода. | `20` |
| `ExitUpperLevel` | Верхний уровень стохастика для выхода. | `80` |

## Правила торговли

### Вход в длинную позицию
1. На двух последних свечах обнаружено бычье харами (малое белое тело внутри длинного чёрного тела в нисходящем движении).
2. Значение %D на подтверждающей свече не выше `OversoldLevel`.
3. Открытых длинных позиций нет (`Position <= 0`).
4. Стратегия покупает по рынку на объём `Volume`, при необходимости закрывая шорт.

### Вход в короткую позицию
1. Обнаружено медвежье харами (малое чёрное тело внутри длинной белой свечи в восходящем тренде).
2. %D находится не ниже `OverboughtLevel`.
3. Нет открытых шортов (`Position >= 0`).
4. Стратегия продаёт по рынку, переворачивая позицию при необходимости.

### Выходы
- **Покрытие шортов:** Стохастик %D пробивает вверх `ExitLowerLevel` или `ExitUpperLevel` — позиция закрывается.
- **Закрытие лонгов:** %D опускается ниже `ExitUpperLevel` или `ExitLowerLevel` — длинная позиция закрывается полностью.

## Файлы

- `CS/BullishBearishHaramiStochasticStrategy.cs` — реализация стратегии на высокоуровневом API StockSharp.
- `README.md` — документация на английском языке.
- `README_ru.md` — описание на русском языке (текущий файл).
- `README_cn.md` — документация на китайском языке.

> **Важно:** Python-версия не создавалась согласно требованию задачи.

# Momo Trades 策略
[English](README.md) | [Русский](README_ru.md)

将 MetaTrader 平台上的 "Momo_trades" 专家顾问移植到 StockSharp，实现通过均线偏离度与 MACD 结构过滤的动量突破交易。

## 策略逻辑
- 仅处理所选周期的已完成 K 线，并且同一时刻只持有一个净仓位。
- 使用可配置的简单移动平均线以及指定的历史 K 线索引来比较价格与均线之间的距离。做多时要求该历史收盘价高于 SMA 且超出价格偏移阈值；做空时条件相反。
- 复刻 MQL 版本的 MACD 条件：要求过去多根主线值依次上升并穿越零轴（做多）或依次下降并跌破零轴（做空），从而过滤掉动量衰减阶段。
- 当 SMA 过滤器和 MACD 模式同时指向同一方向时，按策略设定手数立即市价入场。

## 风险控制
- 止损、止盈、移动止损、移动步长、保本触发值以及价格偏移均以点数表示，并通过品种最小价位变动自动换算为价格单位。
- 同时设置止盈与移动止损时，仅在价格推进超过移动距离加移动步长后才提升止损，完全复刻原有 EA 的处理方式。
- 未设置止盈但启用保本参数时，一旦达到保本触发点，止损会被移动到开仓价格。
- 每根完成的 K 线都会重新计算所有保护性价格；一旦当根最高/最低价触及保护价位，即刻通过市价单离场。

## 交易时段管理
- `CloseEndDay` 参数与原策略一致：常规日 23:00（周五 21:00）自动平仓，并在当日剩余时间内禁止开仓。

## 参数说明
- **SMA Period / MA Bar Shift** – 均线周期以及用于读取 SMA 与价格的历史索引。
- **MACD Fast / Slow / Signal / Bar Shift** – MACD 的快/慢线、信号线以及用于检查模式的历史偏移。
- **Stop Loss / Take Profit / Trailing Stop / Trailing Step / Breakeven / Price Shift** – 以点数表示的风险控制与过滤参数。
- **Close End Of Day** – 是否在交易日结束前强制平仓。
- **Candle Type** – 用于指标计算与信号判定的 K 线类型。

# ACB7 矩阵基准测试

## 概述
ACB7 矩阵基准测试是 MetaTrader 4 脚本 `ACB7` 的直接移植。原始脚本通过将一个 2×3 矩阵与一个 3×2 矩阵相乘，把结果写入 2×2 矩阵，并循环执行 1,000 次来演示一个迷你矩阵库并测量运行时间。StockSharp 版本把这段计算封装在 `Strategy` 内，使得可以在平台中启动基准测试并在策略日志里观察输出。

## 策略逻辑
### 矩阵定义
- **矩阵 1** – ID 1，2 行 × 3 列，数值 `[1, 2, 3; 4, 5, 6]`。
- **矩阵 2** – ID 2，3 行 × 2 列，数值 `[7, 8; 9, 10; 11, 12]`。
- **矩阵 3** – ID 3，在写入结果之前动态调整为 2 × 2。

### 处理步骤
1. 在重置阶段根据脚本中的原始数组重新构建所有矩阵。
2. 策略启动后按照参数指定的次数重复乘法过程。每次迭代都会调用 `ProcessMatrices`（MQL 函数 `afi.MatrixProcessing` 的 C# 版），它先验证维度，调整目标缓冲区，然后使用三层循环计算乘积。
3. 最后一轮结束后使用 `Stopwatch` 记录耗时。如果维度兼容，则按照原始 `Alert` 调用的顺序把矩阵写入策略日志：结果矩阵、第二个操作数、第一个操作数。随后追加空行以对应 MQL 代码的尾部提醒。
4. 如果维度在任何一次迭代中不再匹配，循环会提前终止，并输出失败消息而不是矩阵内容。

## 参数
- **Runs** – 策略启动后执行乘法例程的次数。默认值为 `1000`，与 MQL 脚本一致，可用于优化压力测试。
- **Log Matrices** – 控制成功完成基准测试后是否把矩阵写入策略日志。

## 其他说明
- 该策略不订阅市场数据也不会下单，仅用于在 StockSharp 环境中展示计算流程。
- 辅助类 `MatrixBuffer` 保留了原始 `afd.GetCell` 和 `afr.SetCell` 函数的行/列寻址方式，方便直接对照 MQL 实现。
- 输出日志完成后策略会调用 `Stop()` 自行终止，模拟脚本一次性运行的行为。

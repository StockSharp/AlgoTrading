# ACB7 Матрицы: бенчмарк

## Обзор
ACB7 Matrix Benchmark — это прямой порт скрипта MetaTrader 4 `ACB7`. Оригинальная программа демонстрирует мини-библиотеку матриц: перемножает матрицу 2×3 и матрицу 3×2, записывает результат в матрицу 2×2 и повторяет процедуру 1000 раз для оценки скорости. Версия на StockSharp выполняет те же вычисления внутри объекта `Strategy`, чтобы запускать бенчмарк из платформы и наблюдать вывод в журнале стратегии.

## Логика стратегии
### Определение матриц
- **Матрица 1** — ID 1, 2 строки × 3 столбца, значения `[1, 2, 3; 4, 5, 6]`.
- **Матрица 2** — ID 2, 3 строки × 2 столбца, значения `[7, 8; 9, 10; 11, 12]`.
- **Матрица 3** — ID 3, перед записью результата динамически масштабируется до 2 × 2.

### Этапы обработки
1. При сбросе стратегия воссоздаёт все матрицы из исходных массивов скрипта.
2. После старта стратегия выполняет умножение указанное число раз. Каждый цикл вызывает `ProcessMatrices` — перевод функции `afi.MatrixProcessing` на C#, которая проверяет размерности, изменяет буфер результата и вычисляет произведение через три вложенных цикла.
3. После последней итерации с помощью `Stopwatch` фиксируется затраченное время. При успешной проверке размерностей матрицы выводятся в журнал в том же порядке, что и `Alert` в MQL: матрица результата, затем второй операнд, затем первый. В конце добавляется пустая строка для полного соответствия оригинальному выводу.
4. Если размерности когда-либо перестают совпадать, цикл завершается досрочно и в журнал записывается сообщение о неудаче без печати матриц.

## Параметры
- **Runs** — количество запусков процедуры умножения после старта стратегии. По умолчанию `1000`, как в исходном скрипте; параметр можно оптимизировать для стресс-тестов.
- **Log Matrices** — управляет записью содержимого матриц в журнал после успешного выполнения бенчмарка.

## Дополнительные сведения
- Стратегия не подписывается на рыночные данные и не выставляет заявки — это вычислительный пример внутри StockSharp.
- Вспомогательный класс `MatrixBuffer` сохраняет адресацию по строкам и столбцам из функций `afd.GetCell` и `afr.SetCell`, поэтому сравнивать порт с MQL реализацией удобно.
- После вывода данных стратегия вызывает `Stop()`, что имитирует одноразовый характер оригинального скрипта.

# Cronex AC

Стратегия Cronex AC переносит классического советника Cronex Acceleration/Deceleration (AC) на высокоуровневый API StockSharp. Она сглаживает осциллятор Accelerator (AC) двумя последовательными скользящими средними и реагирует на пересечение быстрой и медленной линий. Бычье пересечение открывает длинную позицию и закрывает короткую, медвежье — наоборот.

## Логика торговли

1. Рассчитываются значения осциллятора Acceleration/Deceleration по выбранной серии свечей.
2. Осциллятор последовательно сглаживается выбранным типом скользящей средней дважды: первое сглаживание формирует «быструю» линию, второе — сигнальную.
3. Сигналы оцениваются на свече, задаваемой параметром `SignalBar`. Дополнительно берётся значение ещё на один бар глубже, чтобы подтвердить факт пересечения.
4. Если быстрая линия поднимается выше сигнальной, стратегия (при разрешении) закрывает короткую позицию и открывает длинную.
5. Если быстрая линия опускается ниже сигнальной, стратегия (при разрешении) закрывает длинную позицию и открывает короткую.
6. Объём заявки равен параметру `Volume` плюс абсолютное значение текущей позиции, что позволяет разворачиваться одним рыночным ордером.

Логика повторяет MQL5‑советника: все решения принимаются только после закрытия свечи, а разрешения на открытие и закрытие позиций по направлениям задаются отдельно.

## Параметры

| Имя | Тип | По умолчанию | Описание |
| --- | --- | --- | --- |
| `SmoothingType` | `CronexMovingAverageType` | `Simple` | Тип скользящей средней, применяемой к осциллятору AC. Доступны Simple, Exponential, Smoothed, Weighted. |
| `FastPeriod` | `int` | `14` | Период первого сглаживания (быстрая линия). |
| `SlowPeriod` | `int` | `25` | Период второго сглаживания (сигнальная линия). |
| `SignalBar` | `int` | `1` | Номер завершённой свечи, по которой считывается сигнал. Значение 1 соответствует оригиналу Cronex. |
| `CandleType` | `DataType` | `TimeFrame(8h)` | Тип свечей для расчётов. |
| `EnableLongEntry` | `bool` | `true` | Разрешить открытие длинных позиций после бычьего пересечения. |
| `EnableShortEntry` | `bool` | `true` | Разрешить открытие коротких позиций после медвежьего пересечения. |
| `EnableLongExit` | `bool` | `true` | Разрешить закрытие длинных позиций, когда быстрая линия падает ниже сигнальной. |
| `EnableShortExit` | `bool` | `true` | Разрешить закрытие коротких позиций, когда быстрая линия поднимается выше сигнальной. |
| `Volume` | `decimal` | значение стратегии | Объём сделок. К нему прибавляется абсолютное значение текущей позиции для разворотов одним ордером. |

## Отображение на графике

При наличии области графика стратегия рисует:

- исходные свечи выбранного таймфрейма;
- значения осциллятора Accelerator;
- быструю и сигнальную линии после сглаживания;
- собственные сделки стратегии для визуальной проверки.

## Примечания

- Обработка выполняется только по завершённым свечам (`CandleStates.Finished`), что исключает перерисовку сигналов.
- Внутренние буферы хранят ровно столько значений, сколько нужно для смещения `SignalBar`, повторяя поведение MQL‑версии.
- Функции управления рисками из оригинала (стоп‑лосс, тейк‑профит, допустимое проскальзывание) не реализованы и могут быть добавлены через встроенные механизмы StockSharp.

# Стратегия Fuzzy Logic Legacy
[English](README.md) | [中文](README_cn.md)

Стратегия переносит в StockSharp советник MetaTrader «Fuzzy logic» (2007 года). Она объединяет инструменты Билла Вильямса с моме
нтум-осцилляторами и оценивает их через таблицу нечетких правил. Сделка открывается только тогда, когда агрегированная оценка пок
азывает ярко выраженный бычий либо медвежий консенсус. Фиксированный стоп-лосс и опциональный трейлинг-стоп повторяют оригинальн
ые правила сопровождения позиций.

## Логика торговли

1. Строится «аллигатор» Вильямса (челюсть, зубы, губы) на основе сглаженных средних и вычисляется спред *Gator* как сумма модулей
 расстояний между линиями.
2. Рассчитываются Williams %R (период 14), DeMarker (период 14) и RSI (период 14).
3. Из последовательности Awesome Oscillator выводится ускоритель (AC), отслеживаются до пяти последовательных столбиков для фикса
ции серий ускорения.
4. Значения индикаторов подаются в таблицу нечетких принадлежностей из пяти уровней с порогами, идентичными оригинальному коду.
5. Взвешенная сумма принадлежностей дает решение в диапазоне от 0 до 1:
   - Значения **> 0.75** трактуются как бычий консенсус и дают сигнал на покупку.
   - Значения **< 0.25** трактуются как медвежий консенсус и дают сигнал на продажу.
6. Одновременно может быть открыта только одна позиция. Защитные стопы устанавливаются сразу после входа.

## Управление позицией

- **Стоп-лосс**: фиксированная дистанция в шагах цены (параметр `Stop Loss (points)`).
- **Трейлинг-стоп**: опционален, при включении сопровождает позицию на заданном расстоянии в шагах цены.
- **Мани-менеджмент**: опциональный расчет объема по формуле MetaTrader `Volume = (Balance * (PercentMM + DeltaMM) - InitialBalan
ce * DeltaMM) / 10000`.

## Параметры

| Параметр | Описание |
|----------|----------|
| `Candle Type` | Тип свечей, используемых для анализа. |
| `Long Threshold` | Порог решения, при превышении которого открывается длинная позиция. |
| `Short Threshold` | Порог решения, при падении ниже которого открывается короткая позиция. |
| `Stop Loss (points)` | Дистанция начального стоп-лосса в шагах цены. |
| `Trailing Stop (points)` | Дистанция трейлинг-стопа; `0` отключает сопровождение. |
| `Fixed Volume` | Объем сделки при отключенном мани-менеджменте. |
| `Use Money Management` | Включает расчет объема по формуле MetaTrader. |
| `Percent MM` | Процент от баланса в формуле мани-менеджмента. |
| `Delta MM` | Дополнительное процентное смещение в формуле. |
| `Initial Balance` | Базовый баланс для формулы мани-менеджмента. |

## Примечания

- Стратегия обрабатывает только завершенные свечи (`CandleStates.Finished`), что исключает перерисовку.
- Пороговые значения и веса полностью совпадают с оригинальным советником для сохранения поведения.
- Для внутридневной торговли измените таймфрейм свечей и пороги под желаемую волатильность.

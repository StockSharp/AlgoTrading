# 神经网络 MACD 策略

该策略将四权重感知器过滤器与经典 MACD 交叉结合。只有当 MACD 与神经网络方向一致时才开仓。

## 工作原理

1. **感知器过滤器**  
   三个感知器根据当前收盘价与若干过去开盘价的差值来评估价格动量。每个感知器包含四个整数权重（`X11`…`X34`），权重为 0 表示该输入不参与。输出等于这些差值的加权和。根据 `Pass` 参数，可使用一到三个感知器。过滤器还设置止损和止盈距离（`Sl1`, `Tp1`, `Sl2`, `Tp2`）。
2. **MACD 确认**  
   计算标准 MACD (12,26,9)。当 MACD 线在零线下方并向上穿越信号线时产生买入信号；当 MACD 线在零线上方并向下穿越信号线时产生卖出信号。
3. **交易执行**  
   - 当 MACD 与感知器均给出正向时开多。  
   - 当两者均为负向时开空。  
   仓位在达到止损或止盈水平时平仓。

## 参数

| 名称 | 说明 |
| ---- | ---- |
| `X11…X34` | 感知器输入权重。 |
| `Tp1`, `Sl1` | 第一个感知器的止盈与止损。 |
| `Tp2`, `Sl2` | 第二个感知器的止盈与止损。 |
| `P1`, `P2`, `P3` | 计算感知器输入时使用的K线位移。 |
| `Pass` | 使用的感知器数量 (1-3)。 |
| `CandleType` | 用于计算的K线类型。 |


# Стратегия Neural Network MACD

Стратегия совмещает простой перцептрон с четырьмя весами и классический сигнал MACD. Сделка открывается только если направление совпадает у MACD и нейронного фильтра.

## Принцип работы

1. **Перцептрон**  
   Три перцептрона анализируют импульс цены, используя разности между текущим закрытием и рядом прошлых цен открытия. Каждый перцептрон имеет четыре целочисленных веса (`X11`…`X34`). Выход перцептрона – взвешенная сумма этих разностей. В зависимости от параметра `Pass` используется один, два или все три перцептрона. Фильтр также определяет расстояния для стоп-лосса и тейк-профита (`Sl1`, `Tp1`, `Sl2`, `Tp2`).
2. **Подтверждение MACD**  
   Рассчитывается стандартный MACD (12, 26, 9). Сигнал на покупку появляется, когда линия MACD ниже нуля и пересекает линию сигнала снизу вверх. Сигнал на продажу – когда линия выше нуля и пересекает линию сигнала сверху вниз.
3. **Исполнение сделки**  
   - Длинная позиция открывается, если оба сигнала положительные.  
   - Короткая позиция открывается, если оба сигнала отрицательные.  
   Позиция закрывается по достижении стоп-лосса или тейк-профита.

## Параметры

| Имя | Описание |
| --- | -------- |
| `X11…X34` | Веса входов перцептронов. |
| `Tp1`, `Sl1` | Тейк-профит и стоп-лосс первого перцептрона. |
| `Tp2`, `Sl2` | Тейк-профит и стоп-лосс второго перцептрона. |
| `P1`, `P2`, `P3` | Сдвиги в барах для расчёта входов. |
| `Pass` | Количество используемых перцептронов (1-3). |
| `CandleType` | Тип свечей для расчётов. |


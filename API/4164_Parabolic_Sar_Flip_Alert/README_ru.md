# Стратегия Parabolic SAR Flip Alert (4164)

## Обзор

Стратегия переносит эксперта MetaTrader **pSAR_alert2** на платформу StockSharp. Она отслеживает индикатор Parabolic SAR для выбранного инструмента и таймфрейма. Когда значение SAR переходит из области выше цены закрытия в область ниже (или наоборот), стратегия фиксирует подробное уведомление. По желанию можно автоматически отправлять рыночные заявки в сторону выявленного сигнала и тем самым превратить уведомление в торговый вход.

## Логика работы

1. Подписаться на выбранную серию свечей и рассчитать индикатор Parabolic SAR с заданными ускорениями.
2. Обрабатывать только полностью сформированные свечи, чтобы повторить логику исходного эксперта.
3. Сравнивать положение индикатора и цену закрытия:
   - Ранее SAR находился выше цены, а теперь опустился ниже → **бычий разворот**.
   - Ранее SAR находился ниже цены, а теперь поднялся выше → **медвежий разворот**.
4. Записывать информационное сообщение для каждого разворота. При включенном автотрейдинге закрывать противоположные позиции и открывать новую позицию по рынку в сторону сигнала.

## Параметры

| Параметр | Описание |
|----------|----------|
| `Candle Type` | Таймфрейм свечей, используемый для расчёта Parabolic SAR. |
| `SAR Step` | Начальный коэффициент ускорения Parabolic SAR. |
| `SAR Max` | Максимальный коэффициент ускорения Parabolic SAR. |
| `Enable Auto Trading` | При значении `true` выполняются рыночные сделки, при `false` формируются только уведомления. |
| `Trade Volume` | Объём заявок при включённом автотрейдинге. |

## Особенности конверсии

- В исходном скрипте MetaTrader использовался `Sleep` для циклического опроса. В StockSharp стратегия реагирует на события формирования свечей и не требует ручных задержек.
- Уведомления создаются через `AddInfoLog`, что сохраняет поведение исходного эксперта без дополнительного пользовательского интерфейса.
- Добавлен переключатель автоторговли. Отключите параметр `Enable Auto Trading`, если нужна точная копия поведения MetaTrader.
- По запросу Python-версия не предоставляется.

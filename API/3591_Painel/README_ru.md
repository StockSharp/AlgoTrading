# Стратегия Painel
[English](README.md) | [中文](README_cn.md)

Воссоздаёт советник MetaTrader «Painel», публикуя панель с рыночными и аккаунтными показателями. Стратегия подписывается на поток котировок уровня 1 и сделки, после чего каждую секунду записывает сводную строку в журнал.

## Общее описание

- **Назначение**: информационная панель, повторяющая оригинального эксперта MQL.
- **Поведение**: собирает последние цены, максимум/минимум сессии, направление позиции, имя счёта, текущий баланс и накопленную прибыль.
- **Торговля**: заявки не отправляются — стратегию безопасно запускать на реальных счетах.
- **Частота обновления**: одна строка в журнале раз в секунду.

## Поля журнала

1. `Symbol` — идентификатор выбранного инструмента.
2. `Last` — последняя цена сделки, обновляется по потоку тиков.
3. `High` — сессионный максимум из изменений уровня 1.
4. `Low` — сессионный минимум из изменений уровня 1.
5. `Position` — текстовое состояние позиции (`Long`, `Short` или `Flat`).
6. `User` — имя счёта или портфеля, предоставленное коннектором.
7. `Profit` — разница между текущей стоимостью портфеля и начальными средствами при запуске стратегии.
8. `Balance` — текущая стоимость портфеля (equity), если она доступна.

## Как работает

1. При запуске стратегия запоминает начальный баланс и подписывается на котировки уровня 1 и сделки.
2. Каждое обновление котировок освежает последние, максимальные и минимальные цены; поток сделок дополнительно актуализирует последнюю цену.
3. Таймер срабатывает раз в секунду, пересчитывает показатели портфеля и выводит форматированную строку журнала.
4. При остановке стратегии таймер автоматически отключается.

## Советы по настройке

- Подключайте стратегию к любому таймфрейму или графику — ей нужны только данные уровня 1 и информация о портфеле.
- Используйте панели StockSharp или внешние сборщики логов, чтобы визуализировать строки журнала подобно оригинальному индикатору MetaTrader.
- Интервал логирования можно изменить в коде, скорректировав выражение `Timer.Start(TimeSpan.FromSeconds(1), ...)`.

## Ограничения

- Значения максимума/минимума зависят от поставщика данных: если поля `HighPrice` и `LowPrice` не приходят, показатели останутся равными нулю.
- Для расчёта баланса и прибыли необходим адаптер портфеля, предоставляющий `BeginValue`, `CurrentValue` и `Name`.
- Графических элементов на экране не создаётся — информация доступна только в журнале.

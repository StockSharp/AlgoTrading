# Painel 策略
[English](README.md) | [Русский](README_ru.md)

通过发布市场与账户指标面板，复现 MetaTrader 「Painel」专家顾问。策略订阅一级行情与成交数据，并且每秒向日志输出一条汇总信息。

## 概览

- **用途**：信息面板，重现原始 MQL 专家顾问。
- **行为**：采集最新价格、当日最高/最低、当前持仓方向、账户名称、当前权益以及累计收益。
- **交易**：不会发送任何订单，因此在实盘账户上运行是安全的。
- **刷新频率**：每秒向策略日志写入一条记录。

## 日志字段

1. `Symbol` —— 当前标的的标识符。
2. `Last` —— 最新成交价，来源于逐笔成交。
3. `High` —— 由一级行情提供的当日最高价。
4. `Low` —— 由一级行情提供的当日最低价。
5. `Position` —— 持仓状态文本（`Long`、`Short` 或 `Flat`）。
6. `User` —— 连接适配器暴露的账户或投资组合名称。
7. `Profit` —— 当前投资组合价值减去启动时的初始余额。
8. `Balance` —— 当前投资组合价值（权益），若适配器提供该数据。

## 工作流程

1. 启动时记住初始余额，并订阅一级行情与成交。
2. 每次行情更新都会刷新最新价、最高价和最低价；成交流在行情未携带最新价时补充该信息。
3. 定时器每秒触发一次，重新计算账户指标并输出格式化日志。
4. 当策略停止时定时器自动停止。

## 定制提示

- 可以挂接在任意周期或图表上，只要能够获取一级行情与投资组合信息即可。
- 配合 StockSharp 仪表板或自定义日志收集工具使用，可实现与原始 MetaTrader 面板类似的可视化效果。
- 若需要调整刷新速度，可在源码中修改 `Timer.Start(TimeSpan.FromSeconds(1), ...)` 的参数。

## 限制

- 最高价与最低价依赖数据提供商发送 `HighPrice`、`LowPrice` 字段，否则数值保持为零。
- 账户统计需要连接器提供 `BeginValue`、`CurrentValue` 与 `Name` 字段。
- 策略不会生成屏幕图形，只能通过日志查看数据。

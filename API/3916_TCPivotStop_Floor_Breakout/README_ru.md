# Стратегия TCPivotStop Floor Breakout

## Обзор

**TCPivotStop Floor Breakout** — порт советника MetaTrader `gpfTCPivotStop`. Стратегия использует классические дневные пивоты: на основании
вчерашних максимума, минимума и цены закрытия рассчитываются уровни `Pivot`, `R1`–`R3`, `S1`–`S3`. С началом нового торгового дня
алгоритм:

1. Пересчитывает пивоты по данным предыдущей сессии.
2. Проверяет, пробила ли последняя завершённая часовая свеча уровень Pivot сверху вниз или снизу вверх.
3. Открывает рыночную сделку в направлении пробоя и выставляет уровни защиты, соответствующие оригинальной реализации.

Одновременно допускается только одна позиция. По желанию можно закрывать её при переходе на следующий день.

## Торговые правила

- **Таймфрейм** — базово H1, но можно выбрать другой тип свечей.
- **Расчёт пивотов** — используются максимум, минимум и закрытие предыдущей сессии.
- **Входы**
  - Шорт открывается, если последняя свеча закрылась ниже Pivot, а предыдущая — выше.
  - Лонг открывается, если последняя свеча закрылась выше Pivot, а предыдущая — ниже.
- **Размер позиции** — фиксированный объём из параметра `OrderVolume`.
- **Выходы**
  - Стоп-лосс и тейк-профит привязаны к выбранным уровням поддержки/сопротивления.
  - При активном флаге `CloseAtSessionEnd` позиция закрывается в начале нового дня.
  - Контроль защитных уровней выполняется по экстремумам свечей: при достижении уровня отправляется рыночная заявка на закрытие.

## Параметры

| Имя | Описание | Значение по умолчанию |
| --- | -------- | --------------------- |
| `OrderVolume` | Объём входа в сделку. | `0.1` |
| `TakeProfitTarget` | Какой уровень использовать для тейк-профита (`1` — ближайший, `3` — самый дальний). | `1` |
| `CloseAtSessionEnd` | Закрывать позицию перед началом следующего дня. | `false` |
| `CandleType` | Тип свечей для расчёта. | `H1` |

## Примечания

- Сделки рассматриваются только один раз в сутки — при появлении новых пивотов, что повторяет логику оригинального советника.
- В версии для MetaTrader объём зависел от свободной маржи и серии убыточных сделок. В адаптации для StockSharp используется
  фиксированный лот.
- Стопы и цели моделируются отправкой рыночных заявок при касании ценой соответствующих уровней.

## Состав

- `CS/TcpFloorPivotBreakoutStrategy.cs` — реализация стратегии на C#.
- `README.md` — документация на английском языке.
- `README_cn.md` — описание на китайском.
- `README_ru.md` — русская версия (этот файл).

# BollTrade Bollinger Reversion 策略

## 概述

**BollTrade Bollinger Reversion Strategy** 是将原始的 MetaTrader BollTrade 专家顾问迁移到 StockSharp 高级 API 的结果。策略使用布林带检测价格在极端位置的反转机会，并在价格远离带状区域后入场。完成的 K 线收于上轨之上时开空单，收于下轨之下时开多单，所有判断都基于已完成的 K 线以避免噪音。

## 交易逻辑

1. 订阅指定的 K 线类型，并根据给定周期与标准差计算布林带。
2. 计算额外的点数缓冲，以复制原策略要求价格突破更远距离后才交易的行为。
3. 若收盘价低于下轨减去缓冲距离，则开多单；若收盘价高于上轨加上缓冲距离，则开空单。
4. 每次开仓都会保存以点数表示的止盈与止损价格，当 K 线的最高价或最低价触发这些阈值时平仓。
5. 策略一次只维护一个仓位，不会加仓或网格化操作。

## 资金管理

* `Lots` 参数决定基础下单手数。
* 当启用 `LotIncrease` 时，手数会根据当前投资组合价值与初始价值的比例进行放大，并限制在 500 手以内，用以还原原策略随余额增长而增仓的特性。

## 参数

| 参数 | 说明 |
|------|------|
| **Take Profit (pips)** | 以点数表示的止盈距离，值为 0 时表示不设置止盈。 |
| **Stop Loss (pips)** | 以点数表示的止损距离，值为 0 时表示不设置止损。 |
| **Band Offset** | 在布林带之外额外要求的点数距离。 |
| **Bollinger Period** | 布林带均线的周期长度。 |
| **Bollinger Deviation** | 布林带宽度所使用的标准差倍数。 |
| **Base Volume** | 基础下单手数。 |
| **Scale Volume** | 启用后，随着账户权益的增长按比例放大手数。 |
| **Candle Type** | 用于生成信号的 K 线类型（时间框架）。 |

## 注意事项

* 策略只在完成的 K 线上工作，因此在实时运行前需要加载一定的历史数据以完成指标初始化。
* 止盈止损通过 K 线的最高价与最低价进行触发检测，这在使用高级 API 时能够近似原策略的逐笔检测行为。
* 启用了 `StartProtection` 保护机制，以防策略在异常停止时留下未管理的持仓。

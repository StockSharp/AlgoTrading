# Стратегия Vector

## Общее описание
Vector — это многовалютная стратегия, перенесённая из советника MetaTrader 5 «Vector». Она одновременно торгует четырьмя основными
парами Forex: EURUSD, GBPUSD, USDCHF и USDJPY. Для каждого инструмента рассчитываются сглаженные скользящие средние от медианной
цены. Когда суммарное направление всех пар совпадает, стратегия синхронно открывает позиции. Закрытие осуществляется по динамической
цели в пунктах, основанной на волатильности четырёхчасовых свечей, а также по общему уровню прибыли или убытка портфеля.

## Ключевые принципы
- Использовать сглаженные скользящие средние (SMMA) от медианной цены для оценки локального тренда каждой пары.
- Складывать значения быстрых и медленных средних по всем инструментам, чтобы определить общий бычий или медвежий фон.
- Открывать по одной рыночной позиции на пару, когда глобальное направление совпадает с пересечением быстрых и медленных средних.
- Рассчитывать целевой профит в пунктах по среднему диапазону 50 завершённых четырёхчасовых свечей EURUSD (минимум 13 пунктов).
- Мгновенно закрывать все сделки при достижении заданного процента плавающей прибыли или убытка от стартового баланса.

## Параметры
| Параметр | Назначение |
|----------|------------|
| **Fast MA** | Период быстрой сглаженной средней. |
| **Slow MA** | Период медленной сглаженной средней. |
| **MA Shift** | Количество завершённых свечей для прогрева индикаторов перед генерацией сигналов. |
| **Equity Take Profit %** | Процент плавающей прибыли, при котором закрываются все сделки. |
| **Equity Stop Loss %** | Процент плавающего убытка, вызывающий аварийное закрытие позиций. |
| **Signal Timeframe** | Таймфрейм свечей для расчёта скользящих средних (по умолчанию 15 минут). |
| **Range Timeframe** | Таймфрейм для оценки волатильности и расчёта целевого профита (по умолчанию 4 часа). |
| **Range Period** | Количество свечей повышенного таймфрейма в усреднении диапазона. |
| **EURUSD / GBPUSD / USDCHF / USDJPY** | Соответствующие инструменты, которые необходимо указать перед запуском. |

## Логика работы
1. **Обновление индикаторов.** После закрытия каждой свечи на рабочем таймфрейме пересчитываются быстрые и медленные SMMA. Сигналы
   доступны только после завершения заданного количества свечей прогрева.
2. **Определение направления.** Складываем быстрые средние всех пар и вычитаем сумму медленных. Положительный результат — бычий фон,
   отрицательный — медвежий.
3. **Условия входа.** Если по паре нет позиции, открываем покупку при бычьем фоне и когда быстрая средняя выше медленной. Аналогично,
   открываем продажу при медвежьем фоне и пересечении вниз.
4. **Цель в пунктах.** Подписка на четырёхчасовые свечи EURUSD рассчитывает средний диапазон за указанный период. Фактическая цель —
   максимум из этого диапазона и 13 пунктов. Достигнув цели, позиция закрывается.
5. **Защита капитала.** Текущая стоимость портфеля сравнивается со стартовым балансом. При превышении порогов прибыли или убытка все
   позиции закрываются.

## Рекомендации по использованию
- Настройте параметры инструментов так, чтобы каждый указанный тикер был доступен коннектору и имел свечи нужного таймфрейма.
- Стратегия держит не более одной позиции по каждой паре и использует параметр Volume базовой стратегии как объём заявки.
- Динамическая цель рассчитывается по EURUSD, как и в оригинальном советнике. При необходимости адаптации можно изменить таймфрейм
  или период расчёта диапазона.
- Благодаря управлению плавающим результатом стратегия рассчитана на непрерывную работу в автоматическом режиме.


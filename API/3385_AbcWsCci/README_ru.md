# Стратегия AbcWsCci

## Описание
**AbcWsCci** сочетает свечные модели **«Три белых солдата»** и **«Три чёрные вороны»** с индикатором **Commodity Channel Index (CCI)**. Стратегия анализирует только закрытые свечи, оценивает размер их тел относительно скользящего среднего и открывает позиции, когда формируются три последовательные сильные свечи, подтверждённые экстремальными значениями CCI. Выход из позиции происходит при выходе CCI из зоны экстремумов, что указывает на ослабление импульса.

## Логика работы
- Ведётся скользящее среднее величины тел свечей, чтобы определить минимальный размер «длинной» свечи.
- Определяется модель «Три белых солдата» (три подряд сильных бычьих свечи с растущими серединами).
- Определяется модель «Три чёрные вороны» (три подряд сильных медвежьих свечи с понижающимися серединами).
- Для входа в лонг требуется формирование «солдат» и значение CCI ниже **-50**.
- Для входа в шорт требуется формирование «ворон» и значение CCI выше **50**.
- Выход из лонга осуществляется при возвращении CCI из области ниже **-80** или выше **80**.
- Выход из шорта осуществляется при симметричном пересечении уровней **80** и **-80**.

## Параметры
| Имя | Описание | Значение по умолчанию |
| --- | -------- | --------------------- |
| `CciPeriod` | Период расчёта индикатора CCI. | 37 |
| `BodyAveragePeriod` | Количество свечей в среднем значении тела. | 13 |
| `CandleType` | Таймфрейм свечей для анализа. | 1 час |

## Используемые индикаторы
- **CCI** — подтверждение входов и определение момента выхода.
- **Простое скользящее среднее тел свечей** — фильтр, исключающий слабые свечи из паттерна.

## Управление позицией
- Открыть **лонг**, если выполнены условия «солдат» и CCI < -50, а текущая позиция не длинная.
- Открыть **шорт**, если выполнены условия «ворон» и CCI > 50, а текущая позиция не короткая.
- Закрыть **лонг**, если CCI выходит из диапазона -80/80.
- Закрыть **шорт**, если CCI выходит из диапазона +80/-80.

## Дополнительные рекомендации
- Стратегия работает по завершённым свечам, поэтому не использует неполные данные.
- Эффективнее на инструментах с выраженными импульсами.
- Рекомендуется дополнить систему внешним риск-менеджментом (стоп-лоссы, динамический объём).

# Стратегия мониторинга кастомного графика

## Обзор
**Custom Chart Monitor Strategy** повторяет логику эксперта MetaTrader 5 *Example1_LibCustomChart.mq5*. Оригинал демонстрирует использование библиотеки `LibCustomChart`, позволяющей получать данные пользовательского графика. Версия на StockSharp фокусируется на подписке на выбранный поток свечей, выводе цены закрытия активного бара и уведомлении о появлении новой свечи.

В отличие от большинства торговых стратегий, пример носит демонстрационный характер и не размещает заявки. Его задача — показать, как подключить альтернативный источник свечных данных и обработать обновления внутри стратегии StockSharp.

## Исходная логика MQL
1. Загрузка библиотеки `LibCustomChart`, которая подключается к кастомному графику или, при отсутствии библиотеки, к стандартному графику.
2. Обновление данных графика на каждом тике.
3. Чтение цены закрытия последнего (незавершённого) бара.
4. Вывод значения и сообщение о появлении нового бара через функцию `CustomChartNewBar()`.

StockSharp-реализация повторяет эти шаги, но вместо прямых вызовов библиотеки использует подписку на свечи и события.

## Логика стратегии в StockSharp
1. Параметр `StrategyParam<DataType>` позволяет выбрать тип свечей, который будет считаться пользовательским графиком (по умолчанию — минутные свечи).
2. При старте стратегия выполняет `SubscribeCandles()` для заданного типа и привязывает обработчик через `Bind`.
3. Каждый приход обновления свечи приводит к логированию текущей цены закрытия. Повторяющиеся значения фильтруются, чтобы не перегружать журнал.
4. Когда свеча завершается (`CandleStates.Finished`), стратегия дополнительно записывает сообщение «New bar detected» с точным временем открытия, имитируя реакцию `CustomChartNewBar()`.

Такой подход служит шаблоном для работы с нестандартными свечными потоками, поступающими от индикаторов, синтетических источников или внешних адаптеров.

## Параметры
| Имя | Тип | Описание |
| --- | --- | -------- |
| `Candle Type` | `DataType` | Определяет поток свечей, который будет интерпретироваться как кастомный график. Выберите любой таймфрейм или тип свечей, поддерживаемый подключением. |

## Рекомендации по использованию
1. Перед запуском укажите `Security` и подходящий `Candle Type`, соответствующий вашему пользовательскому графику.
2. Запустите стратегию — она подпишется на свечи и начнёт выводить значения в журнал.
3. Отслеживайте сообщения. Каждое обновление содержит текущую цену закрытия формирующейся свечи. После завершения бара появляется дополнительная запись о новой свече.
4. При необходимости расширьте методы обработчика: добавьте расчёт индикаторов, торговые решения или отправку данных во внешние системы.

## Расширение примера
- Замените логирование вычислением индикаторов или публикацией данных для последующей обработки.
- Скомбинируйте стратегию с другими индикаторами или потоками данных, если нужно сравнивать пользовательский график со стандартными свечами.
- Добавьте параметры для настройки порогов, уровня детализации сообщений или автоматического выставления заявок на основе наблюдаемых свечей.

## Примечания
- Python-версия и соответствующая папка не создавались по требованию.
- Стратегия не выполняет торговых операций и предназначена для демонстрации мониторинга данных.
- Убедитесь, что выбранный тип свечей доступен от подключённого коннектора, иначе стратегия не получит обновлений.

# 手数动态缩放策略

## 概述

**Lot Size Scaling Strategy** 是 MetaTrader 4 脚本 `LotSize.mq4` 的直接移植版本。原始脚本包含一张庞大的对照表，将账户余额与推荐交易手数逐条对应。StockSharp 版本完整保留该行为，并通过 `Strategy.Volume` 属性和策略备注输出推荐手数。

策略本身不会自动下单，它仅负责计算当前应使用的手数，供其他策略或人工操作参考。映射范围覆盖余额 20 至 294 635，推荐手数从 0.01 到 100 手。

## 运行逻辑

1. 余额与手数的映射表由原始 MQL 代码直接生成，总计 1 090 条记录。
2. 在启动、盈亏变化或出现自有成交时，策略会：
   - 读取当前投资组合余额（若尚未获得，则使用 `MinimumBalance` 参数的值）。
   - 查找不超过该余额的最大表项。
   - 将结果写入 `Volume` 和 `RecommendedVolume` 属性。
   - 在策略备注中展示余额与推荐手数，方便在界面中观察。
3. 策略不会自动注册订单，计算得到的手数需要在其他模块中使用。

## 参数

| 名称 | 说明 | 默认值 |
| --- | --- | --- |
| `MinimumBalance` | 在真实余额不可用时使用的下限值。 | `20` |
| `MinimumVolume` | 当余额低于首条表项时采用的初始手数。 | `0.01` |

参数可自由调整，但映射表始终遵循原脚本的设定。

## 说明

- 表格保留了原脚本中的所有不规则步长（例如 2.0 手之后交替出现的 294/295 单位）。
- 可将该策略作为辅助组件，在需要依据余额调整手数的场景中使用。
- 启动时调用 `StartProtection()`，以启用 StockSharp 的标准保护机制，方便与其他模块联动。

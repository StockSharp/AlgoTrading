using System;

using StockSharp.Algo.Strategies;
using StockSharp.BusinessEntities;

namespace StockSharp.Samples.Strategies;

public class LotSizeScalingStrategy : Strategy
{
	private readonly StrategyParam<decimal> _minimumBalance;
	private readonly StrategyParam<decimal> _minimumVolume;

	// Represents a single balance/volume mapping from the original MQL logic.
	private readonly struct BalanceVolumeStep
	{
		public BalanceVolumeStep(decimal balance, decimal volume)
		{
			Balance = balance;
			Volume = volume;
		}

		public decimal Balance { get; }
		public decimal Volume { get; }
	}

	// The entire step table is generated from the MQL script to preserve the original behaviour.
	private static readonly BalanceVolumeStep[] _steps =
	{
		new BalanceVolumeStep(20m, 0.01m),
		new BalanceVolumeStep(50m, 0.02m),
		new BalanceVolumeStep(80m, 0.03m),
		new BalanceVolumeStep(110m, 0.04m),
		new BalanceVolumeStep(140m, 0.05m),
		new BalanceVolumeStep(170m, 0.06m),
		new BalanceVolumeStep(200m, 0.07m),
		new BalanceVolumeStep(230m, 0.08m),
		new BalanceVolumeStep(260m, 0.09m),
		new BalanceVolumeStep(300m, 0.10m),
		new BalanceVolumeStep(324m, 0.11m),
		new BalanceVolumeStep(355m, 0.12m),
		new BalanceVolumeStep(385m, 0.13m),
		new BalanceVolumeStep(416m, 0.14m),
		new BalanceVolumeStep(446m, 0.15m),
		new BalanceVolumeStep(477m, 0.16m),
		new BalanceVolumeStep(507m, 0.17m),
		new BalanceVolumeStep(538m, 0.18m),
		new BalanceVolumeStep(568m, 0.19m),
		new BalanceVolumeStep(599m, 0.20m),
		new BalanceVolumeStep(629m, 0.21m),
		new BalanceVolumeStep(660m, 0.22m),
		new BalanceVolumeStep(691m, 0.23m),
		new BalanceVolumeStep(721m, 0.24m),
		new BalanceVolumeStep(752m, 0.25m),
		new BalanceVolumeStep(782m, 0.26m),
		new BalanceVolumeStep(813m, 0.27m),
		new BalanceVolumeStep(843m, 0.28m),
		new BalanceVolumeStep(874m, 0.29m),
		new BalanceVolumeStep(904m, 0.30m),
		new BalanceVolumeStep(935m, 0.31m),
		new BalanceVolumeStep(965m, 0.32m),
		new BalanceVolumeStep(996m, 0.33m),
		new BalanceVolumeStep(1027m, 0.34m),
		new BalanceVolumeStep(1057m, 0.35m),
		new BalanceVolumeStep(1088m, 0.36m),
		new BalanceVolumeStep(1118m, 0.37m),
		new BalanceVolumeStep(1149m, 0.38m),
		new BalanceVolumeStep(1179m, 0.39m),
		new BalanceVolumeStep(1210m, 0.40m),
		new BalanceVolumeStep(1240m, 0.41m),
		new BalanceVolumeStep(1271m, 0.42m),
		new BalanceVolumeStep(1301m, 0.43m),
		new BalanceVolumeStep(1332m, 0.44m),
		new BalanceVolumeStep(1363m, 0.45m),
		new BalanceVolumeStep(1393m, 0.46m),
		new BalanceVolumeStep(1424m, 0.47m),
		new BalanceVolumeStep(1454m, 0.48m),
		new BalanceVolumeStep(1485m, 0.49m),
		new BalanceVolumeStep(1515m, 0.50m),
		new BalanceVolumeStep(1546m, 0.51m),
		new BalanceVolumeStep(1576m, 0.52m),
		new BalanceVolumeStep(1607m, 0.53m),
		new BalanceVolumeStep(1637m, 0.54m),
		new BalanceVolumeStep(1668m, 0.55m),
		new BalanceVolumeStep(1699m, 0.56m),
		new BalanceVolumeStep(1729m, 0.57m),
		new BalanceVolumeStep(1760m, 0.58m),
		new BalanceVolumeStep(1790m, 0.59m),
		new BalanceVolumeStep(1821m, 0.60m),
		new BalanceVolumeStep(1851m, 0.61m),
		new BalanceVolumeStep(1882m, 0.62m),
		new BalanceVolumeStep(1912m, 0.63m),
		new BalanceVolumeStep(1943m, 0.64m),
		new BalanceVolumeStep(1973m, 0.65m),
		new BalanceVolumeStep(2004m, 0.66m),
		new BalanceVolumeStep(2035m, 0.67m),
		new BalanceVolumeStep(2065m, 0.68m),
		new BalanceVolumeStep(2096m, 0.69m),
		new BalanceVolumeStep(2126m, 0.70m),
		new BalanceVolumeStep(2157m, 0.71m),
		new BalanceVolumeStep(2187m, 0.72m),
		new BalanceVolumeStep(2218m, 0.73m),
		new BalanceVolumeStep(2248m, 0.74m),
		new BalanceVolumeStep(2279m, 0.75m),
		new BalanceVolumeStep(2309m, 0.76m),
		new BalanceVolumeStep(2340m, 0.77m),
		new BalanceVolumeStep(2371m, 0.78m),
		new BalanceVolumeStep(2401m, 0.79m),
		new BalanceVolumeStep(2432m, 0.80m),
		new BalanceVolumeStep(2462m, 0.81m),
		new BalanceVolumeStep(2493m, 0.82m),
		new BalanceVolumeStep(2523m, 0.83m),
		new BalanceVolumeStep(2554m, 0.84m),
		new BalanceVolumeStep(2584m, 0.85m),
		new BalanceVolumeStep(2615m, 0.86m),
		new BalanceVolumeStep(2645m, 0.87m),
		new BalanceVolumeStep(2676m, 0.88m),
		new BalanceVolumeStep(2707m, 0.89m),
		new BalanceVolumeStep(2737m, 0.90m),
		new BalanceVolumeStep(2768m, 0.91m),
		new BalanceVolumeStep(2798m, 0.92m),
		new BalanceVolumeStep(2829m, 0.93m),
		new BalanceVolumeStep(2859m, 0.94m),
		new BalanceVolumeStep(2890m, 0.95m),
		new BalanceVolumeStep(2920m, 0.96m),
		new BalanceVolumeStep(2951m, 0.97m),
		new BalanceVolumeStep(2981m, 0.98m),
		new BalanceVolumeStep(3012m, 0.99m),
		new BalanceVolumeStep(3100m, 1.00m),
		new BalanceVolumeStep(3300m, 1.10m),
		new BalanceVolumeStep(3600m, 1.20m),
		new BalanceVolumeStep(3900m, 1.30m),
		new BalanceVolumeStep(4200m, 1.40m),
		new BalanceVolumeStep(4500m, 1.50m),
		new BalanceVolumeStep(4800m, 1.60m),
		new BalanceVolumeStep(5100m, 1.70m),
		new BalanceVolumeStep(5400m, 1.80m),
		new BalanceVolumeStep(5700m, 1.90m),
		new BalanceVolumeStep(5980m, 2.00m),
		new BalanceVolumeStep(6275m, 2.10m),
		new BalanceVolumeStep(6569m, 2.20m),
		new BalanceVolumeStep(6864m, 2.30m),
		new BalanceVolumeStep(7158m, 2.40m),
		new BalanceVolumeStep(7453m, 2.50m),
		new BalanceVolumeStep(7747m, 2.60m),
		new BalanceVolumeStep(8042m, 2.70m),
		new BalanceVolumeStep(8336m, 2.80m),
		new BalanceVolumeStep(8631m, 2.90m),
		new BalanceVolumeStep(8925m, 3.00m),
		new BalanceVolumeStep(9220m, 3.10m),
		new BalanceVolumeStep(9515m, 3.20m),
		new BalanceVolumeStep(9809m, 3.30m),
		new BalanceVolumeStep(10104m, 3.40m),
		new BalanceVolumeStep(10398m, 3.50m),
		new BalanceVolumeStep(10693m, 3.60m),
		new BalanceVolumeStep(10987m, 3.70m),
		new BalanceVolumeStep(11282m, 3.80m),
		new BalanceVolumeStep(11576m, 3.90m),
		new BalanceVolumeStep(11871m, 4.00m),
		new BalanceVolumeStep(12165m, 4.10m),
		new BalanceVolumeStep(12460m, 4.20m),
		new BalanceVolumeStep(12755m, 4.30m),
		new BalanceVolumeStep(13049m, 4.40m),
		new BalanceVolumeStep(13344m, 4.50m),
		new BalanceVolumeStep(13638m, 4.60m),
		new BalanceVolumeStep(13933m, 4.70m),
		new BalanceVolumeStep(14227m, 4.80m),
		new BalanceVolumeStep(14522m, 4.90m),
		new BalanceVolumeStep(14816m, 5.00m),
		new BalanceVolumeStep(15111m, 5.10m),
		new BalanceVolumeStep(15405m, 5.20m),
		new BalanceVolumeStep(15700m, 5.30m),
		new BalanceVolumeStep(15995m, 5.40m),
		new BalanceVolumeStep(16289m, 5.50m),
		new BalanceVolumeStep(16584m, 5.60m),
		new BalanceVolumeStep(16878m, 5.70m),
		new BalanceVolumeStep(17173m, 5.80m),
		new BalanceVolumeStep(17467m, 5.90m),
		new BalanceVolumeStep(17762m, 6.00m),
		new BalanceVolumeStep(18056m, 6.10m),
		new BalanceVolumeStep(18351m, 6.20m),
		new BalanceVolumeStep(18645m, 6.30m),
		new BalanceVolumeStep(18940m, 6.40m),
		new BalanceVolumeStep(19235m, 6.50m),
		new BalanceVolumeStep(19529m, 6.60m),
		new BalanceVolumeStep(19824m, 6.70m),
		new BalanceVolumeStep(20118m, 6.80m),
		new BalanceVolumeStep(20413m, 6.90m),
		new BalanceVolumeStep(20707m, 7.00m),
		new BalanceVolumeStep(21002m, 7.10m),
		new BalanceVolumeStep(21296m, 7.20m),
		new BalanceVolumeStep(21591m, 7.30m),
		new BalanceVolumeStep(21885m, 7.40m),
		new BalanceVolumeStep(22180m, 7.50m),
		new BalanceVolumeStep(22475m, 7.60m),
		new BalanceVolumeStep(22769m, 7.70m),
		new BalanceVolumeStep(23064m, 7.80m),
		new BalanceVolumeStep(23358m, 7.90m),
		new BalanceVolumeStep(23653m, 8.00m),
		new BalanceVolumeStep(23947m, 8.10m),
		new BalanceVolumeStep(24242m, 8.20m),
		new BalanceVolumeStep(24536m, 8.30m),
		new BalanceVolumeStep(24831m, 8.40m),
		new BalanceVolumeStep(25125m, 8.50m),
		new BalanceVolumeStep(25420m, 8.60m),
		new BalanceVolumeStep(25715m, 8.70m),
		new BalanceVolumeStep(26009m, 8.80m),
		new BalanceVolumeStep(26304m, 8.90m),
		new BalanceVolumeStep(26598m, 9.00m),
		new BalanceVolumeStep(26893m, 9.10m),
		new BalanceVolumeStep(27187m, 9.20m),
		new BalanceVolumeStep(27482m, 9.30m),
		new BalanceVolumeStep(27776m, 9.40m),
		new BalanceVolumeStep(28071m, 9.50m),
		new BalanceVolumeStep(28365m, 9.60m),
		new BalanceVolumeStep(28660m, 9.70m),
		new BalanceVolumeStep(28955m, 9.80m),
		new BalanceVolumeStep(29249m, 9.90m),
		new BalanceVolumeStep(29544m, 10.00m),
		new BalanceVolumeStep(29838m, 10.10m),
		new BalanceVolumeStep(30133m, 10.20m),
		new BalanceVolumeStep(30427m, 10.30m),
		new BalanceVolumeStep(30722m, 10.40m),
		new BalanceVolumeStep(31016m, 10.50m),
		new BalanceVolumeStep(31311m, 10.60m),
		new BalanceVolumeStep(31605m, 10.70m),
		new BalanceVolumeStep(31900m, 10.80m),
		new BalanceVolumeStep(32195m, 10.90m),
		new BalanceVolumeStep(32489m, 11.00m),
		new BalanceVolumeStep(32784m, 11.10m),
		new BalanceVolumeStep(33078m, 11.20m),
		new BalanceVolumeStep(33373m, 11.30m),
		new BalanceVolumeStep(33667m, 11.40m),
		new BalanceVolumeStep(33962m, 11.50m),
		new BalanceVolumeStep(34256m, 11.60m),
		new BalanceVolumeStep(34551m, 11.70m),
		new BalanceVolumeStep(34845m, 11.80m),
		new BalanceVolumeStep(35140m, 11.90m),
		new BalanceVolumeStep(35435m, 12.00m),
		new BalanceVolumeStep(35729m, 12.10m),
		new BalanceVolumeStep(36024m, 12.20m),
		new BalanceVolumeStep(36318m, 12.30m),
		new BalanceVolumeStep(36613m, 12.40m),
		new BalanceVolumeStep(36907m, 12.50m),
		new BalanceVolumeStep(37202m, 12.60m),
		new BalanceVolumeStep(37496m, 12.70m),
		new BalanceVolumeStep(37791m, 12.80m),
		new BalanceVolumeStep(38085m, 12.90m),
		new BalanceVolumeStep(38380m, 13.00m),
		new BalanceVolumeStep(38675m, 13.10m),
		new BalanceVolumeStep(38969m, 13.20m),
		new BalanceVolumeStep(39264m, 13.30m),
		new BalanceVolumeStep(39558m, 13.40m),
		new BalanceVolumeStep(39853m, 13.50m),
		new BalanceVolumeStep(40147m, 13.60m),
		new BalanceVolumeStep(40442m, 13.70m),
		new BalanceVolumeStep(40736m, 13.80m),
		new BalanceVolumeStep(41031m, 13.90m),
		new BalanceVolumeStep(41325m, 14.00m),
		new BalanceVolumeStep(41620m, 14.10m),
		new BalanceVolumeStep(41915m, 14.20m),
		new BalanceVolumeStep(42209m, 14.30m),
		new BalanceVolumeStep(42504m, 14.40m),
		new BalanceVolumeStep(42798m, 14.50m),
		new BalanceVolumeStep(43093m, 14.60m),
		new BalanceVolumeStep(43387m, 14.70m),
		new BalanceVolumeStep(43682m, 14.80m),
		new BalanceVolumeStep(43976m, 14.90m),
		new BalanceVolumeStep(44271m, 15.00m),
		new BalanceVolumeStep(44565m, 15.10m),
		new BalanceVolumeStep(44860m, 15.20m),
		new BalanceVolumeStep(45155m, 15.30m),
		new BalanceVolumeStep(45449m, 15.40m),
		new BalanceVolumeStep(45744m, 15.50m),
		new BalanceVolumeStep(46038m, 15.60m),
		new BalanceVolumeStep(46333m, 15.70m),
		new BalanceVolumeStep(46627m, 15.80m),
		new BalanceVolumeStep(46922m, 15.90m),
		new BalanceVolumeStep(47216m, 16.00m),
		new BalanceVolumeStep(47511m, 16.10m),
		new BalanceVolumeStep(47805m, 16.20m),
		new BalanceVolumeStep(48100m, 16.30m),
		new BalanceVolumeStep(48395m, 16.40m),
		new BalanceVolumeStep(48689m, 16.50m),
		new BalanceVolumeStep(48984m, 16.60m),
		new BalanceVolumeStep(49278m, 16.70m),
		new BalanceVolumeStep(49573m, 16.80m),
		new BalanceVolumeStep(49867m, 16.90m),
		new BalanceVolumeStep(50162m, 17.00m),
		new BalanceVolumeStep(50456m, 17.10m),
		new BalanceVolumeStep(50751m, 17.20m),
		new BalanceVolumeStep(51045m, 17.30m),
		new BalanceVolumeStep(51340m, 17.40m),
		new BalanceVolumeStep(51635m, 17.50m),
		new BalanceVolumeStep(51929m, 17.60m),
		new BalanceVolumeStep(52224m, 17.70m),
		new BalanceVolumeStep(52518m, 17.80m),
		new BalanceVolumeStep(52813m, 17.90m),
		new BalanceVolumeStep(53107m, 18.00m),
		new BalanceVolumeStep(53402m, 18.10m),
		new BalanceVolumeStep(53696m, 18.20m),
		new BalanceVolumeStep(53991m, 18.30m),
		new BalanceVolumeStep(54285m, 18.40m),
		new BalanceVolumeStep(54580m, 18.50m),
		new BalanceVolumeStep(54875m, 18.60m),
		new BalanceVolumeStep(55169m, 18.70m),
		new BalanceVolumeStep(55464m, 18.80m),
		new BalanceVolumeStep(55758m, 18.90m),
		new BalanceVolumeStep(56053m, 19.00m),
		new BalanceVolumeStep(56347m, 19.10m),
		new BalanceVolumeStep(56642m, 19.20m),
		new BalanceVolumeStep(56936m, 19.30m),
		new BalanceVolumeStep(57231m, 19.40m),
		new BalanceVolumeStep(57525m, 19.50m),
		new BalanceVolumeStep(57820m, 19.60m),
		new BalanceVolumeStep(58115m, 19.70m),
		new BalanceVolumeStep(58409m, 19.80m),
		new BalanceVolumeStep(58704m, 19.90m),
		new BalanceVolumeStep(58998m, 20.00m),
		new BalanceVolumeStep(59293m, 20.10m),
		new BalanceVolumeStep(59587m, 20.20m),
		new BalanceVolumeStep(59882m, 20.30m),
		new BalanceVolumeStep(60176m, 20.40m),
		new BalanceVolumeStep(60471m, 20.50m),
		new BalanceVolumeStep(60765m, 20.60m),
		new BalanceVolumeStep(61060m, 20.70m),
		new BalanceVolumeStep(61355m, 20.80m),
		new BalanceVolumeStep(61649m, 20.90m),
		new BalanceVolumeStep(61944m, 21.00m),
		new BalanceVolumeStep(62238m, 21.10m),
		new BalanceVolumeStep(62533m, 21.20m),
		new BalanceVolumeStep(62827m, 21.30m),
		new BalanceVolumeStep(63122m, 21.40m),
		new BalanceVolumeStep(63416m, 21.50m),
		new BalanceVolumeStep(63711m, 21.60m),
		new BalanceVolumeStep(64005m, 21.70m),
		new BalanceVolumeStep(64300m, 21.80m),
		new BalanceVolumeStep(64595m, 21.90m),
		new BalanceVolumeStep(64889m, 22.00m),
		new BalanceVolumeStep(65184m, 22.10m),
		new BalanceVolumeStep(65478m, 22.20m),
		new BalanceVolumeStep(65773m, 22.30m),
		new BalanceVolumeStep(66067m, 22.40m),
		new BalanceVolumeStep(66362m, 22.50m),
		new BalanceVolumeStep(66656m, 22.60m),
		new BalanceVolumeStep(66951m, 22.70m),
		new BalanceVolumeStep(67245m, 22.80m),
		new BalanceVolumeStep(67540m, 22.90m),
		new BalanceVolumeStep(67835m, 23.00m),
		new BalanceVolumeStep(68129m, 23.10m),
		new BalanceVolumeStep(68424m, 23.20m),
		new BalanceVolumeStep(68718m, 23.30m),
		new BalanceVolumeStep(69013m, 23.40m),
		new BalanceVolumeStep(69307m, 23.50m),
		new BalanceVolumeStep(69602m, 23.60m),
		new BalanceVolumeStep(69896m, 23.70m),
		new BalanceVolumeStep(70191m, 23.80m),
		new BalanceVolumeStep(70485m, 23.90m),
		new BalanceVolumeStep(70780m, 24.00m),
		new BalanceVolumeStep(71075m, 24.10m),
		new BalanceVolumeStep(71369m, 24.20m),
		new BalanceVolumeStep(71664m, 24.30m),
		new BalanceVolumeStep(71958m, 24.40m),
		new BalanceVolumeStep(72253m, 24.50m),
		new BalanceVolumeStep(72547m, 24.60m),
		new BalanceVolumeStep(72842m, 24.70m),
		new BalanceVolumeStep(73136m, 24.80m),
		new BalanceVolumeStep(73431m, 24.90m),
		new BalanceVolumeStep(73725m, 25.00m),
		new BalanceVolumeStep(74020m, 25.10m),
		new BalanceVolumeStep(74315m, 25.20m),
		new BalanceVolumeStep(74609m, 25.30m),
		new BalanceVolumeStep(74904m, 25.40m),
		new BalanceVolumeStep(75198m, 25.50m),
		new BalanceVolumeStep(75493m, 25.60m),
		new BalanceVolumeStep(75787m, 25.70m),
		new BalanceVolumeStep(76082m, 25.80m),
		new BalanceVolumeStep(76376m, 25.90m),
		new BalanceVolumeStep(76671m, 26.00m),
		new BalanceVolumeStep(76965m, 26.10m),
		new BalanceVolumeStep(77260m, 26.20m),
		new BalanceVolumeStep(77555m, 26.30m),
		new BalanceVolumeStep(77849m, 26.40m),
		new BalanceVolumeStep(78144m, 26.50m),
		new BalanceVolumeStep(78438m, 26.60m),
		new BalanceVolumeStep(78733m, 26.70m),
		new BalanceVolumeStep(79027m, 26.80m),
		new BalanceVolumeStep(79322m, 26.90m),
		new BalanceVolumeStep(79616m, 27.00m),
		new BalanceVolumeStep(79911m, 27.10m),
		new BalanceVolumeStep(80205m, 27.20m),
		new BalanceVolumeStep(80500m, 27.30m),
		new BalanceVolumeStep(80795m, 27.40m),
		new BalanceVolumeStep(81089m, 27.50m),
		new BalanceVolumeStep(81384m, 27.60m),
		new BalanceVolumeStep(81678m, 27.70m),
		new BalanceVolumeStep(81973m, 27.80m),
		new BalanceVolumeStep(82267m, 27.90m),
		new BalanceVolumeStep(82562m, 28.00m),
		new BalanceVolumeStep(82856m, 28.10m),
		new BalanceVolumeStep(83151m, 28.20m),
		new BalanceVolumeStep(83445m, 28.30m),
		new BalanceVolumeStep(83740m, 28.40m),
		new BalanceVolumeStep(84035m, 28.50m),
		new BalanceVolumeStep(84329m, 28.60m),
		new BalanceVolumeStep(84624m, 28.70m),
		new BalanceVolumeStep(84918m, 28.80m),
		new BalanceVolumeStep(85213m, 28.90m),
		new BalanceVolumeStep(85507m, 29.00m),
		new BalanceVolumeStep(85802m, 29.10m),
		new BalanceVolumeStep(86096m, 29.20m),
		new BalanceVolumeStep(86391m, 29.30m),
		new BalanceVolumeStep(86685m, 29.40m),
		new BalanceVolumeStep(86980m, 29.50m),
		new BalanceVolumeStep(87275m, 29.60m),
		new BalanceVolumeStep(87569m, 29.70m),
		new BalanceVolumeStep(87864m, 29.80m),
		new BalanceVolumeStep(88158m, 29.90m),
		new BalanceVolumeStep(88453m, 30.00m),
		new BalanceVolumeStep(88747m, 30.10m),
		new BalanceVolumeStep(89042m, 30.20m),
		new BalanceVolumeStep(89336m, 30.30m),
		new BalanceVolumeStep(89631m, 30.40m),
		new BalanceVolumeStep(89925m, 30.50m),
		new BalanceVolumeStep(90220m, 30.60m),
		new BalanceVolumeStep(90515m, 30.70m),
		new BalanceVolumeStep(90809m, 30.80m),
		new BalanceVolumeStep(91104m, 30.90m),
		new BalanceVolumeStep(91398m, 31.00m),
		new BalanceVolumeStep(91693m, 31.10m),
		new BalanceVolumeStep(91987m, 31.20m),
		new BalanceVolumeStep(92282m, 31.30m),
		new BalanceVolumeStep(92576m, 31.40m),
		new BalanceVolumeStep(92871m, 31.50m),
		new BalanceVolumeStep(93165m, 31.60m),
		new BalanceVolumeStep(93460m, 31.70m),
		new BalanceVolumeStep(93755m, 31.80m),
		new BalanceVolumeStep(94049m, 31.90m),
		new BalanceVolumeStep(94344m, 32.00m),
		new BalanceVolumeStep(94638m, 32.10m),
		new BalanceVolumeStep(94933m, 32.20m),
		new BalanceVolumeStep(95227m, 32.30m),
		new BalanceVolumeStep(95522m, 32.40m),
		new BalanceVolumeStep(95816m, 32.50m),
		new BalanceVolumeStep(96111m, 32.60m),
		new BalanceVolumeStep(96405m, 32.70m),
		new BalanceVolumeStep(96700m, 32.80m),
		new BalanceVolumeStep(96995m, 32.90m),
		new BalanceVolumeStep(97289m, 33.00m),
		new BalanceVolumeStep(97584m, 33.10m),
		new BalanceVolumeStep(97878m, 33.20m),
		new BalanceVolumeStep(98173m, 33.30m),
		new BalanceVolumeStep(98467m, 33.40m),
		new BalanceVolumeStep(98762m, 33.50m),
		new BalanceVolumeStep(99056m, 33.60m),
		new BalanceVolumeStep(99351m, 33.70m),
		new BalanceVolumeStep(99645m, 33.80m),
		new BalanceVolumeStep(99940m, 33.90m),
		new BalanceVolumeStep(100235m, 34.00m),
		new BalanceVolumeStep(100529m, 34.10m),
		new BalanceVolumeStep(100824m, 34.20m),
		new BalanceVolumeStep(101118m, 34.30m),
		new BalanceVolumeStep(101413m, 34.40m),
		new BalanceVolumeStep(101707m, 34.50m),
		new BalanceVolumeStep(102002m, 34.60m),
		new BalanceVolumeStep(102296m, 34.70m),
		new BalanceVolumeStep(102591m, 34.80m),
		new BalanceVolumeStep(102885m, 34.90m),
		new BalanceVolumeStep(103180m, 35.00m),
		new BalanceVolumeStep(103475m, 35.10m),
		new BalanceVolumeStep(103769m, 35.20m),
		new BalanceVolumeStep(104064m, 35.30m),
		new BalanceVolumeStep(104358m, 35.40m),
		new BalanceVolumeStep(104653m, 35.50m),
		new BalanceVolumeStep(104947m, 35.60m),
		new BalanceVolumeStep(105242m, 35.70m),
		new BalanceVolumeStep(105536m, 35.80m),
		new BalanceVolumeStep(105831m, 35.90m),
		new BalanceVolumeStep(106125m, 36.00m),
		new BalanceVolumeStep(106420m, 36.10m),
		new BalanceVolumeStep(106715m, 36.20m),
		new BalanceVolumeStep(107009m, 36.30m),
		new BalanceVolumeStep(107304m, 36.40m),
		new BalanceVolumeStep(107598m, 36.50m),
		new BalanceVolumeStep(107893m, 36.60m),
		new BalanceVolumeStep(108187m, 36.70m),
		new BalanceVolumeStep(108482m, 36.80m),
		new BalanceVolumeStep(108776m, 36.90m),
		new BalanceVolumeStep(109071m, 37.00m),
		new BalanceVolumeStep(109365m, 37.10m),
		new BalanceVolumeStep(109660m, 37.20m),
		new BalanceVolumeStep(109955m, 37.30m),
		new BalanceVolumeStep(110249m, 37.40m),
		new BalanceVolumeStep(110544m, 37.50m),
		new BalanceVolumeStep(110838m, 37.60m),
		new BalanceVolumeStep(111133m, 37.70m),
		new BalanceVolumeStep(111427m, 37.80m),
		new BalanceVolumeStep(111722m, 37.90m),
		new BalanceVolumeStep(112016m, 38.00m),
		new BalanceVolumeStep(112311m, 38.10m),
		new BalanceVolumeStep(112605m, 38.20m),
		new BalanceVolumeStep(112900m, 38.30m),
		new BalanceVolumeStep(113195m, 38.40m),
		new BalanceVolumeStep(113489m, 38.50m),
		new BalanceVolumeStep(113784m, 38.60m),
		new BalanceVolumeStep(114078m, 38.70m),
		new BalanceVolumeStep(114373m, 38.80m),
		new BalanceVolumeStep(114667m, 38.90m),
		new BalanceVolumeStep(114962m, 39.00m),
		new BalanceVolumeStep(115256m, 39.10m),
		new BalanceVolumeStep(115551m, 39.20m),
		new BalanceVolumeStep(115845m, 39.30m),
		new BalanceVolumeStep(116140m, 39.40m),
		new BalanceVolumeStep(116435m, 39.50m),
		new BalanceVolumeStep(116729m, 39.60m),
		new BalanceVolumeStep(117024m, 39.70m),
		new BalanceVolumeStep(117318m, 39.80m),
		new BalanceVolumeStep(117613m, 39.90m),
		new BalanceVolumeStep(117907m, 40.00m),
		new BalanceVolumeStep(118202m, 40.10m),
		new BalanceVolumeStep(118496m, 40.20m),
		new BalanceVolumeStep(118791m, 40.30m),
		new BalanceVolumeStep(119085m, 40.40m),
		new BalanceVolumeStep(119380m, 40.50m),
		new BalanceVolumeStep(119675m, 40.60m),
		new BalanceVolumeStep(119969m, 40.70m),
		new BalanceVolumeStep(120264m, 40.80m),
		new BalanceVolumeStep(120558m, 40.90m),
		new BalanceVolumeStep(120853m, 41.00m),
		new BalanceVolumeStep(121147m, 41.10m),
		new BalanceVolumeStep(121442m, 41.20m),
		new BalanceVolumeStep(121736m, 41.30m),
		new BalanceVolumeStep(122031m, 41.40m),
		new BalanceVolumeStep(122325m, 41.50m),
		new BalanceVolumeStep(122620m, 41.60m),
		new BalanceVolumeStep(122915m, 41.70m),
		new BalanceVolumeStep(123209m, 41.80m),
		new BalanceVolumeStep(123504m, 41.90m),
		new BalanceVolumeStep(123798m, 42.00m),
		new BalanceVolumeStep(124093m, 42.10m),
		new BalanceVolumeStep(124387m, 42.20m),
		new BalanceVolumeStep(124682m, 42.30m),
		new BalanceVolumeStep(124976m, 42.40m),
		new BalanceVolumeStep(125271m, 42.50m),
		new BalanceVolumeStep(125565m, 42.60m),
		new BalanceVolumeStep(125860m, 42.70m),
		new BalanceVolumeStep(126155m, 42.80m),
		new BalanceVolumeStep(126449m, 42.90m),
		new BalanceVolumeStep(126744m, 43.00m),
		new BalanceVolumeStep(127038m, 43.10m),
		new BalanceVolumeStep(127333m, 43.20m),
		new BalanceVolumeStep(127627m, 43.30m),
		new BalanceVolumeStep(127922m, 43.40m),
		new BalanceVolumeStep(128216m, 43.50m),
		new BalanceVolumeStep(128511m, 43.60m),
		new BalanceVolumeStep(128805m, 43.70m),
		new BalanceVolumeStep(129100m, 43.80m),
		new BalanceVolumeStep(129395m, 43.90m),
		new BalanceVolumeStep(129689m, 44.00m),
		new BalanceVolumeStep(129984m, 44.10m),
		new BalanceVolumeStep(130278m, 44.20m),
		new BalanceVolumeStep(130573m, 44.30m),
		new BalanceVolumeStep(130867m, 44.40m),
		new BalanceVolumeStep(131162m, 44.50m),
		new BalanceVolumeStep(131456m, 44.60m),
		new BalanceVolumeStep(131751m, 44.70m),
		new BalanceVolumeStep(132045m, 44.80m),
		new BalanceVolumeStep(132340m, 44.90m),
		new BalanceVolumeStep(132635m, 45.00m),
		new BalanceVolumeStep(132929m, 45.10m),
		new BalanceVolumeStep(133224m, 45.20m),
		new BalanceVolumeStep(133518m, 45.30m),
		new BalanceVolumeStep(133813m, 45.40m),
		new BalanceVolumeStep(134107m, 45.50m),
		new BalanceVolumeStep(134402m, 45.60m),
		new BalanceVolumeStep(134696m, 45.70m),
		new BalanceVolumeStep(134991m, 45.80m),
		new BalanceVolumeStep(135285m, 45.90m),
		new BalanceVolumeStep(135580m, 46.00m),
		new BalanceVolumeStep(135875m, 46.10m),
		new BalanceVolumeStep(136169m, 46.20m),
		new BalanceVolumeStep(136464m, 46.30m),
		new BalanceVolumeStep(136758m, 46.40m),
		new BalanceVolumeStep(137053m, 46.50m),
		new BalanceVolumeStep(137347m, 46.60m),
		new BalanceVolumeStep(137642m, 46.70m),
		new BalanceVolumeStep(137936m, 46.80m),
		new BalanceVolumeStep(138231m, 46.90m),
		new BalanceVolumeStep(138525m, 47.00m),
		new BalanceVolumeStep(138820m, 47.10m),
		new BalanceVolumeStep(139115m, 47.20m),
		new BalanceVolumeStep(139409m, 47.30m),
		new BalanceVolumeStep(139704m, 47.40m),
		new BalanceVolumeStep(139998m, 47.50m),
		new BalanceVolumeStep(140293m, 47.60m),
		new BalanceVolumeStep(140587m, 47.70m),
		new BalanceVolumeStep(140882m, 47.80m),
		new BalanceVolumeStep(141176m, 47.90m),
		new BalanceVolumeStep(141471m, 48.00m),
		new BalanceVolumeStep(141765m, 48.10m),
		new BalanceVolumeStep(142060m, 48.20m),
		new BalanceVolumeStep(142355m, 48.30m),
		new BalanceVolumeStep(142649m, 48.40m),
		new BalanceVolumeStep(142944m, 48.50m),
		new BalanceVolumeStep(143238m, 48.60m),
		new BalanceVolumeStep(143533m, 48.70m),
		new BalanceVolumeStep(143827m, 48.80m),
		new BalanceVolumeStep(144122m, 48.90m),
		new BalanceVolumeStep(144416m, 49.00m),
		new BalanceVolumeStep(144711m, 49.10m),
		new BalanceVolumeStep(145005m, 49.20m),
		new BalanceVolumeStep(145300m, 49.30m),
		new BalanceVolumeStep(145595m, 49.40m),
		new BalanceVolumeStep(145889m, 49.50m),
		new BalanceVolumeStep(146184m, 49.60m),
		new BalanceVolumeStep(146478m, 49.70m),
		new BalanceVolumeStep(146773m, 49.80m),
		new BalanceVolumeStep(147067m, 49.90m),
		new BalanceVolumeStep(147362m, 50.00m),
		new BalanceVolumeStep(147656m, 50.10m),
		new BalanceVolumeStep(147951m, 50.20m),
		new BalanceVolumeStep(148245m, 50.30m),
		new BalanceVolumeStep(148540m, 50.40m),
		new BalanceVolumeStep(148835m, 50.50m),
		new BalanceVolumeStep(149129m, 50.60m),
		new BalanceVolumeStep(149424m, 50.70m),
		new BalanceVolumeStep(149718m, 50.80m),
		new BalanceVolumeStep(150013m, 50.90m),
		new BalanceVolumeStep(150307m, 51.00m),
		new BalanceVolumeStep(150602m, 51.10m),
		new BalanceVolumeStep(150896m, 51.20m),
		new BalanceVolumeStep(151191m, 51.30m),
		new BalanceVolumeStep(151485m, 51.40m),
		new BalanceVolumeStep(151780m, 51.50m),
		new BalanceVolumeStep(152075m, 51.60m),
		new BalanceVolumeStep(152369m, 51.70m),
		new BalanceVolumeStep(152664m, 51.80m),
		new BalanceVolumeStep(152958m, 51.90m),
		new BalanceVolumeStep(153253m, 52.00m),
		new BalanceVolumeStep(153547m, 52.10m),
		new BalanceVolumeStep(153842m, 52.20m),
		new BalanceVolumeStep(154136m, 52.30m),
		new BalanceVolumeStep(154431m, 52.40m),
		new BalanceVolumeStep(154725m, 52.50m),
		new BalanceVolumeStep(155020m, 52.60m),
		new BalanceVolumeStep(155315m, 52.70m),
		new BalanceVolumeStep(155609m, 52.80m),
		new BalanceVolumeStep(155904m, 52.90m),
		new BalanceVolumeStep(156198m, 53.00m),
		new BalanceVolumeStep(156493m, 53.10m),
		new BalanceVolumeStep(156787m, 53.20m),
		new BalanceVolumeStep(157082m, 53.30m),
		new BalanceVolumeStep(157376m, 53.40m),
		new BalanceVolumeStep(157671m, 53.50m),
		new BalanceVolumeStep(157965m, 53.60m),
		new BalanceVolumeStep(158260m, 53.70m),
		new BalanceVolumeStep(158555m, 53.80m),
		new BalanceVolumeStep(158849m, 53.90m),
		new BalanceVolumeStep(159144m, 54.00m),
		new BalanceVolumeStep(159438m, 54.10m),
		new BalanceVolumeStep(159733m, 54.20m),
		new BalanceVolumeStep(160027m, 54.30m),
		new BalanceVolumeStep(160322m, 54.40m),
		new BalanceVolumeStep(160616m, 54.50m),
		new BalanceVolumeStep(160911m, 54.60m),
		new BalanceVolumeStep(161205m, 54.70m),
		new BalanceVolumeStep(161500m, 54.80m),
		new BalanceVolumeStep(161795m, 54.90m),
		new BalanceVolumeStep(162089m, 55.00m),
		new BalanceVolumeStep(162384m, 55.10m),
		new BalanceVolumeStep(162678m, 55.20m),
		new BalanceVolumeStep(162973m, 55.30m),
		new BalanceVolumeStep(163267m, 55.40m),
		new BalanceVolumeStep(163562m, 55.50m),
		new BalanceVolumeStep(163856m, 55.60m),
		new BalanceVolumeStep(164151m, 55.70m),
		new BalanceVolumeStep(164445m, 55.80m),
		new BalanceVolumeStep(164740m, 55.90m),
		new BalanceVolumeStep(165035m, 56.00m),
		new BalanceVolumeStep(165329m, 56.10m),
		new BalanceVolumeStep(165624m, 56.20m),
		new BalanceVolumeStep(165918m, 56.30m),
		new BalanceVolumeStep(166213m, 56.40m),
		new BalanceVolumeStep(166507m, 56.50m),
		new BalanceVolumeStep(166802m, 56.60m),
		new BalanceVolumeStep(167096m, 56.70m),
		new BalanceVolumeStep(167391m, 56.80m),
		new BalanceVolumeStep(167685m, 56.90m),
		new BalanceVolumeStep(167980m, 57.00m),
		new BalanceVolumeStep(168275m, 57.10m),
		new BalanceVolumeStep(168569m, 57.20m),
		new BalanceVolumeStep(168864m, 57.30m),
		new BalanceVolumeStep(169158m, 57.40m),
		new BalanceVolumeStep(169453m, 57.50m),
		new BalanceVolumeStep(169747m, 57.60m),
		new BalanceVolumeStep(170042m, 57.70m),
		new BalanceVolumeStep(170336m, 57.80m),
		new BalanceVolumeStep(170631m, 57.90m),
		new BalanceVolumeStep(170925m, 58.00m),
		new BalanceVolumeStep(171220m, 58.10m),
		new BalanceVolumeStep(171515m, 58.20m),
		new BalanceVolumeStep(171809m, 58.30m),
		new BalanceVolumeStep(172104m, 58.40m),
		new BalanceVolumeStep(172398m, 58.50m),
		new BalanceVolumeStep(172693m, 58.60m),
		new BalanceVolumeStep(172987m, 58.70m),
		new BalanceVolumeStep(173282m, 58.80m),
		new BalanceVolumeStep(173576m, 58.90m),
		new BalanceVolumeStep(173871m, 59.00m),
		new BalanceVolumeStep(174165m, 59.10m),
		new BalanceVolumeStep(174460m, 59.20m),
		new BalanceVolumeStep(174755m, 59.30m),
		new BalanceVolumeStep(175049m, 59.40m),
		new BalanceVolumeStep(175344m, 59.50m),
		new BalanceVolumeStep(175638m, 59.60m),
		new BalanceVolumeStep(175933m, 59.70m),
		new BalanceVolumeStep(176227m, 59.80m),
		new BalanceVolumeStep(176522m, 59.90m),
		new BalanceVolumeStep(176816m, 60.00m),
		new BalanceVolumeStep(177111m, 60.10m),
		new BalanceVolumeStep(177405m, 60.20m),
		new BalanceVolumeStep(177700m, 60.30m),
		new BalanceVolumeStep(177995m, 60.40m),
		new BalanceVolumeStep(178289m, 60.50m),
		new BalanceVolumeStep(178584m, 60.60m),
		new BalanceVolumeStep(178878m, 60.70m),
		new BalanceVolumeStep(179173m, 60.80m),
		new BalanceVolumeStep(179467m, 60.90m),
		new BalanceVolumeStep(179762m, 61.00m),
		new BalanceVolumeStep(180056m, 61.10m),
		new BalanceVolumeStep(180351m, 61.20m),
		new BalanceVolumeStep(180645m, 61.30m),
		new BalanceVolumeStep(180940m, 61.40m),
		new BalanceVolumeStep(181235m, 61.50m),
		new BalanceVolumeStep(181529m, 61.60m),
		new BalanceVolumeStep(181824m, 61.70m),
		new BalanceVolumeStep(182118m, 61.80m),
		new BalanceVolumeStep(182413m, 61.90m),
		new BalanceVolumeStep(182707m, 62.00m),
		new BalanceVolumeStep(183002m, 62.10m),
		new BalanceVolumeStep(183296m, 62.20m),
		new BalanceVolumeStep(183591m, 62.30m),
		new BalanceVolumeStep(183885m, 62.40m),
		new BalanceVolumeStep(184180m, 62.50m),
		new BalanceVolumeStep(184475m, 62.60m),
		new BalanceVolumeStep(184769m, 62.70m),
		new BalanceVolumeStep(185064m, 62.80m),
		new BalanceVolumeStep(185358m, 62.90m),
		new BalanceVolumeStep(185653m, 63.00m),
		new BalanceVolumeStep(185947m, 63.10m),
		new BalanceVolumeStep(186242m, 63.20m),
		new BalanceVolumeStep(186536m, 63.30m),
		new BalanceVolumeStep(186831m, 63.40m),
		new BalanceVolumeStep(187125m, 63.50m),
		new BalanceVolumeStep(187420m, 63.60m),
		new BalanceVolumeStep(187715m, 63.70m),
		new BalanceVolumeStep(188009m, 63.80m),
		new BalanceVolumeStep(188304m, 63.90m),
		new BalanceVolumeStep(188598m, 64.00m),
		new BalanceVolumeStep(188893m, 64.10m),
		new BalanceVolumeStep(189187m, 64.20m),
		new BalanceVolumeStep(189482m, 64.30m),
		new BalanceVolumeStep(189776m, 64.40m),
		new BalanceVolumeStep(190071m, 64.50m),
		new BalanceVolumeStep(190365m, 64.60m),
		new BalanceVolumeStep(190660m, 64.70m),
		new BalanceVolumeStep(190955m, 64.80m),
		new BalanceVolumeStep(191249m, 64.90m),
		new BalanceVolumeStep(191544m, 65.00m),
		new BalanceVolumeStep(191838m, 65.10m),
		new BalanceVolumeStep(192133m, 65.20m),
		new BalanceVolumeStep(192427m, 65.30m),
		new BalanceVolumeStep(192722m, 65.40m),
		new BalanceVolumeStep(193016m, 65.50m),
		new BalanceVolumeStep(193311m, 65.60m),
		new BalanceVolumeStep(193605m, 65.70m),
		new BalanceVolumeStep(193900m, 65.80m),
		new BalanceVolumeStep(194195m, 65.90m),
		new BalanceVolumeStep(194489m, 66.00m),
		new BalanceVolumeStep(194784m, 66.10m),
		new BalanceVolumeStep(195078m, 66.20m),
		new BalanceVolumeStep(195373m, 66.30m),
		new BalanceVolumeStep(195667m, 66.40m),
		new BalanceVolumeStep(195962m, 66.50m),
		new BalanceVolumeStep(196256m, 66.60m),
		new BalanceVolumeStep(196551m, 66.70m),
		new BalanceVolumeStep(196845m, 66.80m),
		new BalanceVolumeStep(197140m, 66.90m),
		new BalanceVolumeStep(197435m, 67.00m),
		new BalanceVolumeStep(197729m, 67.10m),
		new BalanceVolumeStep(198024m, 67.20m),
		new BalanceVolumeStep(198318m, 67.30m),
		new BalanceVolumeStep(198613m, 67.40m),
		new BalanceVolumeStep(198907m, 67.50m),
		new BalanceVolumeStep(199202m, 67.60m),
		new BalanceVolumeStep(199496m, 67.70m),
		new BalanceVolumeStep(199791m, 67.80m),
		new BalanceVolumeStep(200085m, 67.90m),
		new BalanceVolumeStep(200380m, 68.00m),
		new BalanceVolumeStep(200675m, 68.10m),
		new BalanceVolumeStep(200969m, 68.20m),
		new BalanceVolumeStep(201264m, 68.30m),
		new BalanceVolumeStep(201558m, 68.40m),
		new BalanceVolumeStep(201853m, 68.50m),
		new BalanceVolumeStep(202147m, 68.60m),
		new BalanceVolumeStep(202442m, 68.70m),
		new BalanceVolumeStep(202736m, 68.80m),
		new BalanceVolumeStep(203031m, 68.90m),
		new BalanceVolumeStep(203325m, 69.00m),
		new BalanceVolumeStep(203620m, 69.10m),
		new BalanceVolumeStep(203915m, 69.20m),
		new BalanceVolumeStep(204209m, 69.30m),
		new BalanceVolumeStep(204504m, 69.40m),
		new BalanceVolumeStep(204798m, 69.50m),
		new BalanceVolumeStep(205093m, 69.60m),
		new BalanceVolumeStep(205387m, 69.70m),
		new BalanceVolumeStep(205682m, 69.80m),
		new BalanceVolumeStep(205976m, 69.90m),
		new BalanceVolumeStep(206271m, 70.00m),
		new BalanceVolumeStep(206565m, 70.10m),
		new BalanceVolumeStep(206860m, 70.20m),
		new BalanceVolumeStep(207155m, 70.30m),
		new BalanceVolumeStep(207449m, 70.40m),
		new BalanceVolumeStep(207744m, 70.50m),
		new BalanceVolumeStep(208038m, 70.60m),
		new BalanceVolumeStep(208333m, 70.70m),
		new BalanceVolumeStep(208627m, 70.80m),
		new BalanceVolumeStep(208922m, 70.90m),
		new BalanceVolumeStep(209216m, 71.00m),
		new BalanceVolumeStep(209511m, 71.10m),
		new BalanceVolumeStep(209805m, 71.20m),
		new BalanceVolumeStep(210100m, 71.30m),
		new BalanceVolumeStep(210395m, 71.40m),
		new BalanceVolumeStep(210689m, 71.50m),
		new BalanceVolumeStep(210984m, 71.60m),
		new BalanceVolumeStep(211278m, 71.70m),
		new BalanceVolumeStep(211573m, 71.80m),
		new BalanceVolumeStep(211867m, 71.90m),
		new BalanceVolumeStep(212162m, 72.00m),
		new BalanceVolumeStep(212456m, 72.10m),
		new BalanceVolumeStep(212751m, 72.20m),
		new BalanceVolumeStep(213045m, 72.30m),
		new BalanceVolumeStep(213340m, 72.40m),
		new BalanceVolumeStep(213635m, 72.50m),
		new BalanceVolumeStep(213929m, 72.60m),
		new BalanceVolumeStep(214224m, 72.70m),
		new BalanceVolumeStep(214518m, 72.80m),
		new BalanceVolumeStep(214813m, 72.90m),
		new BalanceVolumeStep(215107m, 73.00m),
		new BalanceVolumeStep(215402m, 73.10m),
		new BalanceVolumeStep(215696m, 73.20m),
		new BalanceVolumeStep(215991m, 73.30m),
		new BalanceVolumeStep(216285m, 73.40m),
		new BalanceVolumeStep(216580m, 73.50m),
		new BalanceVolumeStep(216875m, 73.60m),
		new BalanceVolumeStep(217169m, 73.70m),
		new BalanceVolumeStep(217464m, 73.80m),
		new BalanceVolumeStep(217758m, 73.90m),
		new BalanceVolumeStep(218053m, 74.00m),
		new BalanceVolumeStep(218347m, 74.10m),
		new BalanceVolumeStep(218642m, 74.20m),
		new BalanceVolumeStep(218936m, 74.30m),
		new BalanceVolumeStep(219231m, 74.40m),
		new BalanceVolumeStep(219525m, 74.50m),
		new BalanceVolumeStep(219820m, 74.60m),
		new BalanceVolumeStep(220115m, 74.70m),
		new BalanceVolumeStep(220409m, 74.80m),
		new BalanceVolumeStep(220704m, 74.90m),
		new BalanceVolumeStep(220998m, 75.00m),
		new BalanceVolumeStep(221293m, 75.10m),
		new BalanceVolumeStep(221587m, 75.20m),
		new BalanceVolumeStep(221882m, 75.30m),
		new BalanceVolumeStep(222176m, 75.40m),
		new BalanceVolumeStep(222471m, 75.50m),
		new BalanceVolumeStep(222765m, 75.60m),
		new BalanceVolumeStep(223060m, 75.70m),
		new BalanceVolumeStep(223355m, 75.80m),
		new BalanceVolumeStep(223649m, 75.90m),
		new BalanceVolumeStep(223944m, 76.00m),
		new BalanceVolumeStep(224238m, 76.10m),
		new BalanceVolumeStep(224533m, 76.20m),
		new BalanceVolumeStep(224827m, 76.30m),
		new BalanceVolumeStep(225122m, 76.40m),
		new BalanceVolumeStep(225416m, 76.50m),
		new BalanceVolumeStep(225711m, 76.60m),
		new BalanceVolumeStep(226005m, 76.70m),
		new BalanceVolumeStep(226300m, 76.80m),
		new BalanceVolumeStep(226595m, 76.90m),
		new BalanceVolumeStep(226889m, 77.00m),
		new BalanceVolumeStep(227184m, 77.10m),
		new BalanceVolumeStep(227478m, 77.20m),
		new BalanceVolumeStep(227773m, 77.30m),
		new BalanceVolumeStep(228067m, 77.40m),
		new BalanceVolumeStep(228362m, 77.50m),
		new BalanceVolumeStep(228656m, 77.60m),
		new BalanceVolumeStep(228951m, 77.70m),
		new BalanceVolumeStep(229245m, 77.80m),
		new BalanceVolumeStep(229540m, 77.90m),
		new BalanceVolumeStep(229835m, 78.00m),
		new BalanceVolumeStep(230129m, 78.10m),
		new BalanceVolumeStep(230424m, 78.20m),
		new BalanceVolumeStep(230718m, 78.30m),
		new BalanceVolumeStep(231013m, 78.40m),
		new BalanceVolumeStep(231307m, 78.50m),
		new BalanceVolumeStep(231602m, 78.60m),
		new BalanceVolumeStep(231896m, 78.70m),
		new BalanceVolumeStep(232191m, 78.80m),
		new BalanceVolumeStep(232485m, 78.90m),
		new BalanceVolumeStep(232780m, 79.00m),
		new BalanceVolumeStep(233075m, 79.10m),
		new BalanceVolumeStep(233369m, 79.20m),
		new BalanceVolumeStep(233664m, 79.30m),
		new BalanceVolumeStep(233958m, 79.40m),
		new BalanceVolumeStep(234253m, 79.50m),
		new BalanceVolumeStep(234547m, 79.60m),
		new BalanceVolumeStep(234842m, 79.70m),
		new BalanceVolumeStep(235136m, 79.80m),
		new BalanceVolumeStep(235431m, 79.90m),
		new BalanceVolumeStep(235725m, 80.00m),
		new BalanceVolumeStep(236020m, 80.10m),
		new BalanceVolumeStep(236315m, 80.20m),
		new BalanceVolumeStep(236609m, 80.30m),
		new BalanceVolumeStep(236904m, 80.40m),
		new BalanceVolumeStep(237198m, 80.50m),
		new BalanceVolumeStep(237493m, 80.60m),
		new BalanceVolumeStep(237787m, 80.70m),
		new BalanceVolumeStep(238082m, 80.80m),
		new BalanceVolumeStep(238376m, 80.90m),
		new BalanceVolumeStep(238671m, 81.00m),
		new BalanceVolumeStep(238965m, 81.10m),
		new BalanceVolumeStep(239260m, 81.20m),
		new BalanceVolumeStep(239555m, 81.30m),
		new BalanceVolumeStep(239849m, 81.40m),
		new BalanceVolumeStep(240144m, 81.50m),
		new BalanceVolumeStep(240438m, 81.60m),
		new BalanceVolumeStep(240733m, 81.70m),
		new BalanceVolumeStep(241027m, 81.80m),
		new BalanceVolumeStep(241322m, 81.90m),
		new BalanceVolumeStep(241616m, 82.00m),
		new BalanceVolumeStep(241911m, 82.10m),
		new BalanceVolumeStep(242205m, 82.20m),
		new BalanceVolumeStep(242500m, 82.30m),
		new BalanceVolumeStep(242795m, 82.40m),
		new BalanceVolumeStep(243089m, 82.50m),
		new BalanceVolumeStep(243384m, 82.60m),
		new BalanceVolumeStep(243678m, 82.70m),
		new BalanceVolumeStep(243973m, 82.80m),
		new BalanceVolumeStep(244267m, 82.90m),
		new BalanceVolumeStep(244562m, 83.00m),
		new BalanceVolumeStep(244856m, 83.10m),
		new BalanceVolumeStep(245151m, 83.20m),
		new BalanceVolumeStep(245445m, 83.30m),
		new BalanceVolumeStep(245740m, 83.40m),
		new BalanceVolumeStep(246035m, 83.50m),
		new BalanceVolumeStep(246329m, 83.60m),
		new BalanceVolumeStep(246624m, 83.70m),
		new BalanceVolumeStep(246918m, 83.80m),
		new BalanceVolumeStep(247213m, 83.90m),
		new BalanceVolumeStep(247507m, 84.00m),
		new BalanceVolumeStep(247802m, 84.10m),
		new BalanceVolumeStep(248096m, 84.20m),
		new BalanceVolumeStep(248391m, 84.30m),
		new BalanceVolumeStep(248685m, 84.40m),
		new BalanceVolumeStep(248980m, 84.50m),
		new BalanceVolumeStep(249275m, 84.60m),
		new BalanceVolumeStep(249569m, 84.70m),
		new BalanceVolumeStep(249864m, 84.80m),
		new BalanceVolumeStep(250158m, 84.90m),
		new BalanceVolumeStep(250453m, 85.00m),
		new BalanceVolumeStep(250747m, 85.10m),
		new BalanceVolumeStep(251042m, 85.20m),
		new BalanceVolumeStep(251336m, 85.30m),
		new BalanceVolumeStep(251631m, 85.40m),
		new BalanceVolumeStep(251925m, 85.50m),
		new BalanceVolumeStep(252220m, 85.60m),
		new BalanceVolumeStep(252515m, 85.70m),
		new BalanceVolumeStep(252809m, 85.80m),
		new BalanceVolumeStep(253104m, 85.90m),
		new BalanceVolumeStep(253398m, 86.00m),
		new BalanceVolumeStep(253693m, 86.10m),
		new BalanceVolumeStep(253987m, 86.20m),
		new BalanceVolumeStep(254282m, 86.30m),
		new BalanceVolumeStep(254576m, 86.40m),
		new BalanceVolumeStep(254871m, 86.50m),
		new BalanceVolumeStep(255165m, 86.60m),
		new BalanceVolumeStep(255460m, 86.70m),
		new BalanceVolumeStep(255755m, 86.80m),
		new BalanceVolumeStep(256049m, 86.90m),
		new BalanceVolumeStep(256344m, 87.00m),
		new BalanceVolumeStep(256638m, 87.10m),
		new BalanceVolumeStep(256933m, 87.20m),
		new BalanceVolumeStep(257227m, 87.30m),
		new BalanceVolumeStep(257522m, 87.40m),
		new BalanceVolumeStep(257816m, 87.50m),
		new BalanceVolumeStep(258111m, 87.60m),
		new BalanceVolumeStep(258405m, 87.70m),
		new BalanceVolumeStep(258700m, 87.80m),
		new BalanceVolumeStep(258995m, 87.90m),
		new BalanceVolumeStep(259289m, 88.00m),
		new BalanceVolumeStep(259584m, 88.10m),
		new BalanceVolumeStep(259878m, 88.20m),
		new BalanceVolumeStep(260173m, 88.30m),
		new BalanceVolumeStep(260467m, 88.40m),
		new BalanceVolumeStep(260762m, 88.50m),
		new BalanceVolumeStep(261056m, 88.60m),
		new BalanceVolumeStep(261351m, 88.70m),
		new BalanceVolumeStep(261645m, 88.80m),
		new BalanceVolumeStep(261940m, 88.90m),
		new BalanceVolumeStep(262235m, 89.00m),
		new BalanceVolumeStep(262529m, 89.10m),
		new BalanceVolumeStep(262824m, 89.20m),
		new BalanceVolumeStep(263118m, 89.30m),
		new BalanceVolumeStep(263413m, 89.40m),
		new BalanceVolumeStep(263707m, 89.50m),
		new BalanceVolumeStep(264002m, 89.60m),
		new BalanceVolumeStep(264296m, 89.70m),
		new BalanceVolumeStep(264591m, 89.80m),
		new BalanceVolumeStep(264885m, 89.90m),
		new BalanceVolumeStep(265180m, 90.00m),
		new BalanceVolumeStep(265475m, 90.10m),
		new BalanceVolumeStep(265769m, 90.20m),
		new BalanceVolumeStep(266064m, 90.30m),
		new BalanceVolumeStep(266358m, 90.40m),
		new BalanceVolumeStep(266653m, 90.50m),
		new BalanceVolumeStep(266947m, 90.60m),
		new BalanceVolumeStep(267242m, 90.70m),
		new BalanceVolumeStep(267536m, 90.80m),
		new BalanceVolumeStep(267831m, 90.90m),
		new BalanceVolumeStep(268125m, 91.00m),
		new BalanceVolumeStep(268420m, 91.10m),
		new BalanceVolumeStep(268715m, 91.20m),
		new BalanceVolumeStep(269009m, 91.30m),
		new BalanceVolumeStep(269304m, 91.40m),
		new BalanceVolumeStep(269598m, 91.50m),
		new BalanceVolumeStep(269893m, 91.60m),
		new BalanceVolumeStep(270187m, 91.70m),
		new BalanceVolumeStep(270482m, 91.80m),
		new BalanceVolumeStep(270776m, 91.90m),
		new BalanceVolumeStep(271071m, 92.00m),
		new BalanceVolumeStep(271365m, 92.10m),
		new BalanceVolumeStep(271660m, 92.20m),
		new BalanceVolumeStep(271955m, 92.30m),
		new BalanceVolumeStep(272249m, 92.40m),
		new BalanceVolumeStep(272544m, 92.50m),
		new BalanceVolumeStep(272838m, 92.60m),
		new BalanceVolumeStep(273133m, 92.70m),
		new BalanceVolumeStep(273427m, 92.80m),
		new BalanceVolumeStep(273722m, 92.90m),
		new BalanceVolumeStep(274016m, 93.00m),
		new BalanceVolumeStep(274311m, 93.10m),
		new BalanceVolumeStep(274605m, 93.20m),
		new BalanceVolumeStep(274900m, 93.30m),
		new BalanceVolumeStep(275195m, 93.40m),
		new BalanceVolumeStep(275489m, 93.50m),
		new BalanceVolumeStep(275784m, 93.60m),
		new BalanceVolumeStep(276078m, 93.70m),
		new BalanceVolumeStep(276373m, 93.80m),
		new BalanceVolumeStep(276667m, 93.90m),
		new BalanceVolumeStep(276962m, 94.00m),
		new BalanceVolumeStep(277256m, 94.10m),
		new BalanceVolumeStep(277551m, 94.20m),
		new BalanceVolumeStep(277845m, 94.30m),
		new BalanceVolumeStep(278140m, 94.40m),
		new BalanceVolumeStep(278435m, 94.50m),
		new BalanceVolumeStep(278729m, 94.60m),
		new BalanceVolumeStep(279024m, 94.70m),
		new BalanceVolumeStep(279318m, 94.80m),
		new BalanceVolumeStep(279613m, 94.90m),
		new BalanceVolumeStep(279907m, 95.00m),
		new BalanceVolumeStep(280202m, 95.10m),
		new BalanceVolumeStep(280496m, 95.20m),
		new BalanceVolumeStep(280791m, 95.30m),
		new BalanceVolumeStep(281085m, 95.40m),
		new BalanceVolumeStep(281380m, 95.50m),
		new BalanceVolumeStep(281675m, 95.60m),
		new BalanceVolumeStep(281969m, 95.70m),
		new BalanceVolumeStep(282264m, 95.80m),
		new BalanceVolumeStep(282558m, 95.90m),
		new BalanceVolumeStep(282853m, 96.00m),
		new BalanceVolumeStep(283147m, 96.10m),
		new BalanceVolumeStep(283442m, 96.20m),
		new BalanceVolumeStep(283736m, 96.30m),
		new BalanceVolumeStep(284031m, 96.40m),
		new BalanceVolumeStep(284325m, 96.50m),
		new BalanceVolumeStep(284620m, 96.60m),
		new BalanceVolumeStep(284915m, 96.70m),
		new BalanceVolumeStep(285209m, 96.80m),
		new BalanceVolumeStep(285504m, 96.90m),
		new BalanceVolumeStep(285798m, 97.00m),
		new BalanceVolumeStep(286093m, 97.10m),
		new BalanceVolumeStep(286387m, 97.20m),
		new BalanceVolumeStep(286682m, 97.30m),
		new BalanceVolumeStep(286976m, 97.40m),
		new BalanceVolumeStep(287271m, 97.50m),
		new BalanceVolumeStep(287565m, 97.60m),
		new BalanceVolumeStep(287860m, 97.70m),
		new BalanceVolumeStep(288155m, 97.80m),
		new BalanceVolumeStep(288449m, 97.90m),
		new BalanceVolumeStep(288744m, 98.00m),
		new BalanceVolumeStep(289038m, 98.10m),
		new BalanceVolumeStep(289333m, 98.20m),
		new BalanceVolumeStep(289627m, 98.30m),
		new BalanceVolumeStep(289922m, 98.40m),
		new BalanceVolumeStep(290216m, 98.50m),
		new BalanceVolumeStep(290511m, 98.60m),
		new BalanceVolumeStep(290805m, 98.70m),
		new BalanceVolumeStep(291100m, 98.80m),
		new BalanceVolumeStep(291395m, 98.90m),
		new BalanceVolumeStep(291689m, 99.00m),
		new BalanceVolumeStep(291984m, 99.10m),
		new BalanceVolumeStep(292278m, 99.20m),
		new BalanceVolumeStep(292573m, 99.30m),
		new BalanceVolumeStep(292867m, 99.40m),
		new BalanceVolumeStep(293162m, 99.50m),
		new BalanceVolumeStep(293456m, 99.60m),
		new BalanceVolumeStep(293751m, 99.70m),
		new BalanceVolumeStep(294045m, 99.80m),
		new BalanceVolumeStep(294340m, 99.90m),
		new BalanceVolumeStep(294635m, 100.00m),
	};

	public LotSizeScalingStrategy()
	{
		_minimumBalance = Param(nameof(MinimumBalance), 20m)
			.SetDisplay("Minimum balance for scaling")
			.SetCanOptimize(false);
		_minimumVolume = Param(nameof(MinimumVolume), 0.01m)
			.SetDisplay("Starting volume")
			.SetCanOptimize(false);
		SetDisplay("Lot Size Scaling Strategy");
	}

	public decimal MinimumBalance
	{
		get => _minimumBalance.Value;
		set => _minimumBalance.Value = value;
	}

	public decimal MinimumVolume
	{
		get => _minimumVolume.Value;
		set => _minimumVolume.Value = value;
	}

	public decimal RecommendedVolume { get; private set; }

	/// <inheritdoc />
	protected override void OnStarted(DateTimeOffset time)
	{
		base.OnStarted(time);

		StartProtection();
		UpdateRecommendedVolume();
	}

	/// <inheritdoc />
	protected override void OnNewMyTrade(MyTrade trade)
	{
		base.OnNewMyTrade(trade);

		UpdateRecommendedVolume();
	}

	/// <inheritdoc />
	protected override void OnPnLChanged()
	{
		base.OnPnLChanged();

		UpdateRecommendedVolume();
	}

	// Updates the recommended volume using the current portfolio balance.
	private void UpdateRecommendedVolume()
	{
		var balance = Portfolio?.CurrentValue ?? MinimumBalance;
		var targetVolume = CalculateRecommendedVolume(balance);
		RecommendedVolume = targetVolume;
		Volume = targetVolume;
		Comment = $"Balance: {balance:F2} | Volume: {targetVolume:F2}";
	}

	// Finds the latest volume available for the provided balance level.
	private decimal CalculateRecommendedVolume(decimal balance)
	{
		var volume = MinimumVolume;

		foreach (var step in _steps)
		{
			if (balance < step.Balance)
				return volume;

			volume = step.Volume;
		}

		return volume;
	}
}

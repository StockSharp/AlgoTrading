# Стратегия Trade Channel ATR
[English](README.md) | [中文](README_cn.md)

Стратегия Trade Channel повторяет оригинального советника MetaTrader, торгующего от границ ценового канала с защитой по ATR. Система ждёт, пока границы канала останутся неизменными, и пока последняя свеча коснётся этих уровней или отклонится от них. При появлении сигнала стратегия открывает позицию в противоположную сторону и включает адаптивный трейлинг-стоп, измеряемый в пунктах.

Подход ориентирован на возврат к среднему внутри устойчивого ценового диапазона. Фильтр сигналов требует, чтобы канал был «плоским» (без обновления экстремумов) перед входом. Защитные стопы размещаются за границей канала на расстоянии среднего истинного диапазона, а трейлинг-стоп позволяет сохранить прибыль при продолжении движения.

## Детали

- **Условия входа**:
  - Шорт: верхняя граница канала совпадает с предыдущей границей, а последняя свеча либо пробивает её, либо закрывается между верхней границей и пивотом `(high + low + close) / 3`.
  - Лонг: нижняя граница канала совпадает с предыдущей границей, а последняя свеча либо пробивает её, либо закрывается между нижней границей и пивотом.
- **Направление**: обе стороны, одновременно допускается только одна позиция.
- **Условия выхода**:
  - Лонг: цена касается верхней границы канала, которая не изменилась.
  - Шорт: цена касается нижней границы канала, которая не изменилась.
  - Дополнительный трейлинг-стоп подтягивается вслед за ценой после прохождения `TrailingDistance` пунктов прибыли.
- **Стопы**: изначальный стоп-лосс на уровне `граница канала ± ATR`. После активации трейлинг-стоп заменяет исходный стоп.
- **Значения по умолчанию**:
  - `Volume` = 0.1m
  - `ChannelPeriod` = 20
  - `AtrPeriod` = 4
  - `TrailingDistance` = 30
  - `CandleType` = свечи 30 минут
- **Фильтры**:
  - Категория: Mean Reversion (возврат к среднему)
  - Направление: обе стороны
  - Индикаторы: Highest, Lowest, Average True Range
  - Стопы: ATR-стоп, трейлинг
  - Сложность: средняя
  - Таймфрейм: внутридневной (30 минут)
  - Сезонность: нет
  - Нейросети: нет
  - Дивергенции: нет
  - Уровень риска: средний

## Примечания

- Параметр `Volume` задаёт размер заявки, одновременно возможна только одна позиция.
- `TrailingDistance` задаётся в пунктах (шаг цены). При нуле трейлинг отключён.
- Перед началом торговли необходима история свечей для прогрева индикаторов Highest/Lowest и ATR.
- Стоп-заявки автоматически снимаются при закрытии позиции или сбросе стратегии.

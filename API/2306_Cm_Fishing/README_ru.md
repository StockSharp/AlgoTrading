# Стратегия CM Fishing

## Обзор

**CM Fishing** — это сеточная торговая стратегия, портированная из MQL‑скрипта `cm_fishing.mq4`. Стратегия открывает рыночные ордера, когда цена отходит от последнего уровня на заданное количество пунктов. Таким образом формируется сетка длинных или коротких позиций, которые закрываются при достижении заданной прибыли.

В данной реализации сохранена только торговая логика без графического интерфейса исходного скрипта. Все заявки отправляются через высокоуровневый API StockSharp.

## Параметры

| Название | Описание |
|----------|----------|
| `Buy` | Разрешить открытие длинных позиций. |
| `Sell` | Разрешить открытие коротких позиций. |
| `StepBuy` | Шаг цены вниз, после которого открывается дополнительная покупка. |
| `StepSell` | Шаг цены вверх, после которого открывается дополнительная продажа. |
| `CloseProfitBuy` | Прибыль для закрытия всех длинных позиций. |
| `CloseProfitSell` | Прибыль для закрытия всех коротких позиций. |
| `CloseProfit` | Прибыль для закрытия любой позиции независимо от направления. |
| `BuyVolume` | Объём каждой покупки. |
| `SellVolume` | Объём каждой продажи. |

## Логика торговли

1. Отслеживаются цены сделок в реальном времени.
2. Если цена опускается ниже последнего уровня на `StepBuy` пунктов и разрешены покупки, отправляется рыночный ордер Buy.
3. Если цена поднимается выше последнего уровня на `StepSell` пунктов и разрешены продажи, отправляется рыночный ордер Sell.
4. Поддерживается средняя цена входа текущей позиции.
5. Позиция закрывается, когда нереализованная прибыль превышает соответствующий параметр `CloseProfit*`.

Стратегия работает на тиковых данных и подходит для демонстрационных и обучающих целей.

## Примечания

- Графический интерфейс исходного скрипта не реализован.
- В любой момент времени поддерживается только чистая длинная или чистая короткая позиция.


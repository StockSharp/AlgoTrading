# Стратегия SUPERMACBOT by The Guardian Forex TV

## Общее описание
Стратегия **SUPERMACBOT by The Guardian Forex TV** переносит идею одноимённого советника MetaTrader в экосистему StockSharp. Комбинация индикатора MACD, двух простых скользящих средних и отдельной «трейлинг» средней формирует сводный сигнал, после чего стратегия открывает или закрывает позицию рыночными заявками. Работа ведётся только по закрытию свечей, что повышает стабильность и повторяемость результатов при тестировании и в реальной торговле.

## Логика торговли
1. **Источники данных** – подписка на настраиваемый тип свечей. Решения принимаются только после завершения свечи.
2. **Индикаторы** – на каждой свече пересчитываются MACD (быстрый/медленный/сигнальный периоды), быстрая и медленная SMA, а также отдельная SMA, имитирующая модуль трейлинга из исходного советника.
3. **Условия входа**
   - Лонг: гистограмма MACD пересекает вверх заданный порог, быстрая SMA находится выше медленной, цена закрытия выше трейлинг-SMA, открытых длинных позиций нет.
   - Шорт: гистограмма MACD пересекает вниз отрицательный порог, быстрая SMA ниже медленной, цена закрытия ниже трейлинг-SMA, открытых коротких позиций нет.
4. **Условия выхода**
   - Лонг закрывается при смене знака гистограммы MACD на отрицательный, при пересечении быстрой SMA вниз через медленную или при закрытии цены ниже трейлинг-SMA.
   - Шорт закрывается при смене знака гистограммы MACD на положительный, при пересечении быстрой SMA вверх через медленную или при закрытии цены выше трейлинг-SMA.
5. **Управление позицией** – стратегия держит только одну чистую позицию и не использует усреднение. Для добавления стоп-лоссов и ограничения капитала можно подключить стандартные риск-правила StockSharp.

## Параметры
| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| `CandleType` | Тип свечей для анализа. | Таймфрейм 1 минута |
| `FastMaPeriod` | Период быстрой простой SMA. | 12 |
| `SlowMaPeriod` | Период медленной простой SMA. | 26 |
| `MacdFastPeriod` | Быстрый EMA для MACD. | 12 |
| `MacdSlowPeriod` | Медленный EMA для MACD. | 24 |
| `MacdSignalPeriod` | Сигнальный EMA для MACD. | 9 |
| `HistogramThreshold` | Минимальная абсолютная величина гистограммы MACD для входа. | 0.0 |
| `TrailingPeriod` | Период трейлинг-SMA. | 12 |

Параметры оформлены через `StrategyParam<T>` и доступны для оптимизации в Designer.

## Практические рекомендации
- Перед запуском загрузите достаточный объём истории, чтобы индикаторы успели сформироваться.
- Стратегия работает с нетто-позицией, поэтому без конфликтов запускается в портфельном режиме.
- Для сложного манименеджмента и ордеров стоп/тейк используйте комбинирование со встроенными модулями StockSharp.

## Отличия от оригинального советника
- В версии StockSharp используется candle-close логика вместо событийной модели MetaTrader.
- Встроенный модуль фиксации прибыли/убытков заменён на систему выходов по трейлинг-SMA и смене направления индикаторов.
- Весовые коэффициенты сигналов заменены на настраиваемый порог гистограммы MACD, что позволяет подстраивать чувствительность.

## Дисклеймер
Любая торговля на финансовых рынках связана с риском. Перед работой на реальном счёте выполните полноценное тестирование стратегии.

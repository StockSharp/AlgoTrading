# Стратегия Renko Level EA
[English](README.md) | [中文](README_cn.md)

## Обзор
- Конвертация советника MetaTrader **Renko Level EA.mq5** на платформу StockSharp.
- Поддерживает виртуальную решётку Ренко из верхнего и нижнего уровней, рассчитываемых по параметру `BrickSize`.
- Работает с завершёнными свечами типа `CandleType` (по умолчанию таймфрейм 1 минута) и реагирует на смещение решётки.
- Не использует жёстких стопов и тейк-профитов — выход осуществляется только по встречному сигналу.

## Логика торговли
1. Первая завершённая свеча округляет цену закрытия до сетки Ренко и задаёт исходные границы.
2. Для каждой следующей свечи:
   - Если закрытие остаётся внутри диапазона, уровни не меняются.
   - Закрытие выше верхнего уровня переносит блок Ренко на следующий уровень вверх.
   - Закрытие ниже нижнего уровня переносит блок вниз.
3. Изменение верхнего уровня трактуется как смена направления.
   - Рост верхней границы → сигнал на покупку (если `ReverseSignals` выключен).
   - Снижение верхней границы → сигнал на продажу.
4. Флаги `ReverseSignals` и `AllowIncrease` повторяют параметры оригинального советника (реверс сигналов и разрешение на наращивание позиции).

## Управление позициями
- Перед открытием лонга стратегия закрывает текущий шорт; перед шортом — закрывает лонг.
- При `AllowIncrease = false` новая позиция открывается только если нет активной позиции в ту же сторону.
- При `AllowIncrease = true` разрешено добавлять объём `OrderVolume`, даже если позиция уже открыта.
- Специальные стопы и цели отсутствуют, закрытие происходит по реверсу или вручную.
- Метод `StartProtection()` запускается один раз для использования встроенных механизмов защиты.

## Параметры
| Имя | Описание | Значение по умолчанию | Оптимизация |
| --- | --- | --- | --- |
| `BrickSize` | Размер блока Ренко в шагах цены `Security.PriceStep`. Определяет необходимое движение для смещения уровней. | `30` | Да (10 → 100 шаг 10) |
| `OrderVolume` | Объём рыночной заявки. | `1` | Нет |
| `ReverseSignals` | Инвертирует действия «покупка/продажа». Полный аналог параметра *Reverse*. | `false` | Нет |
| `AllowIncrease` | Разрешает добавление к уже открытой позиции. Повторяет флаг *Increase*. | `false` | Нет |
| `CandleType` | Источник свечей для расчёта. По умолчанию свечи таймфрейма 1 минута, допускается любая поддерживаемая серия. | `TimeFrameCandleMessage(1m)` | Нет |

## Практические замечания
- Значение `BrickSize` автоматически масштабируется согласно шагу цены инструмента, поэтому подходит для форекса, фьючерсов и криптовалют.
- Решение принимается по цене закрытия свечи — внутрисессионные колебания учитываются лишь при формировании итогового закрытия.
- Комбинация `ReverseSignals` и `AllowIncrease` позволяет быстро протестировать контртрендовые и пирамидальные сценарии.
- Стратегия хорошо подходит для ситуаций, когда требуется следовать за пробоями Ренко без дополнительных фильтров.

## Классификация
- **Режим**: трендовая стратегия (пробой сетки Ренко).
- **Направление**: лонг и шорт.
- **Сложность**: средняя (собственная логика уровней при минимуме параметров).
- **Стопы**: нет, выходы по обратному сигналу.
- **Таймфрейм**: задаётся параметром `CandleType`.
- **Индикаторы**: пользовательская проекция уровней Ренко.

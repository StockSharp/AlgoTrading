# Стратегия Fractal WPR

Стратегия использует осциллятор Williams %R для генерации торговых сигналов при пересечении границ зон перекупленности и перепроданности. Она адаптирована из советника MQL5 и демонстрирует простой подход к торговле на разворотах импульса.

## Как это работает

1. Рассчитывается индикатор Williams %R с настраиваемым периодом на выбранном таймфрейме.
2. Две горизонтальные линии задают экстремальные зоны:
   - `HighLevel` обозначает область перекупленности (по умолчанию −30).
   - `LowLevel` обозначает область перепроданности (по умолчанию −70).
3. При параметре `Trend = Direct`:
   - Пробой вниз уровня `LowLevel` открывает длинную позицию и закрывает все короткие.
   - Пробой вверх уровня `HighLevel` открывает короткую позицию и закрывает все длинные.
4. При `Trend = Against` реакции на пересечения меняются местами.
5. Дополнительные параметры позволяют отдельно разрешать или запрещать открытие и закрытие длинных и коротких позиций.
6. Для защиты используются стоп‑лосс и тейк‑профит, задаваемые в тиках и подключаемые через высокоуровневый API.

Обрабатываются только завершённые свечи, что исключает влияние внутридневного шума.

## Параметры

- `WprPeriod` – период расчёта Williams %R.
- `HighLevel` – порог зоны перекупленности.
- `LowLevel` – порог зоны перепроданности.
- `Trend` – режим торговли (`Direct` или `Against`).
- `BuyPositionOpen` – разрешить открытие длинных позиций.
- `SellPositionOpen` – разрешить открытие коротких позиций.
- `BuyPositionClose` – разрешить закрытие длинных позиций.
- `SellPositionClose` – разрешить закрытие коротких позиций.
- `StopLossTicks` – расстояние стоп‑лосса в тиках.
- `TakeProfitTicks` – расстояние тейк‑профита в тиках.
- `CandleType` – таймфрейм свечей для анализа.

## Индикаторы

- Williams %R


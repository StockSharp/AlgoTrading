# Awesome Fx Trader

Стратегия переносит связку из каталога `MQL/8539`, состоящую из индикаторов **AwesomeFxTradera.mq4** и **t_ma.mq4**. Первый строит гистограмму Bill Williams Awesome Oscillator, окрашивая столбцы в зелёный или красный цвет в зависимости от изменения значения, второй отображает 34-периодную линейно-взвешенную среднюю (LWMA) и её сглаженную копию. В версии для StockSharp эти расчёты сохранены, а изменение «цветов» превращено в торговые сигналы.

## Логика оригинала

1. **AwesomeFxTradera.mq4** считает две экспоненциальные скользящие средние от **цены открытия** с периодами 8 и 13. Их разность записывается в `ExtBuffer0`. Если текущее значение больше предыдущего бара, столбик окрашивается в зелёный цвет, если меньше — в красный. Таким образом код отслеживает направление импульса, а не только знак относительно нуля.
2. **t_ma.mq4** выводит на график 34-периодную LWMA (`ExtMapBuffer1`) и 6-периодную простую среднюю от значений LWMA (`ExtMapBuffer2`), что позволяет оценивать ускорение или замедление тренда.

Индикаторы вместе показывают бычью фазу, когда осциллятор положительный и растёт, а LWMA находится выше своей сглаженной копии. Медвежья фаза соответствует обратному сочетанию.

## Реализация на StockSharp

`AwesomeFxTraderStrategy` подписывается на настраиваемые свечи (по умолчанию **M15**) и подаёт в расчёты цену открытия каждой завершённой свечи, чтобы повторить массивы MetaTrader.

1. На каждой свече пересчитываются быстрая и медленная EMA; их разница воспроизводит гистограмму.
2. LWMA длиной 34 бара отслеживает основной тренд, а 6-периодная SMA сглаживает её. Сравнение двух рядов показывает направление скользящей.
3. Логика `bool up` повторяется сравнением текущего и предыдущего значения гистограммы.
4. **Условия входа**:
   - Открывать длинную позицию, когда гистограмма положительна, растёт и LWMA выше своей SMA.
   - Открывать короткую позицию, когда гистограмма отрицательна, падает и LWMA ниже сглаженной линии.
5. **Выход и разворот**: противоположный сигнал закрывает текущую позицию и открывает новую в обратном направлении. Объём заявки увеличивается на абсолютное значение позиции, чтобы сначала закрыть старый ордер.

Дополнительные стопы или тейк-профиты в исходном коде не заданы, поэтому стратегия полагается на смену импульса. Для контроля добавлены информационные сообщения в лог с показаниями индикаторов.

## Параметры

| Имя | Значение по умолчанию | Описание |
| --- | --- | --- |
| `FastEmaPeriod` | 8 | Период быстрой EMA в расчёте осциллятора. |
| `SlowEmaPeriod` | 13 | Период медленной EMA. |
| `TrendLwmaPeriod` | 34 | Длина трендовой LWMA из `t_ma.mq4`. |
| `TrendSmoothingPeriod` | 6 | Окно SMA, сглаживающей LWMA. |
| `CandleType` | Таймфрейм 15 минут | Тип свечей, используемых во всех вычислениях. |

Все параметры описаны через `StrategyParam`, поэтому доступны в интерфейсе и для оптимизации.

## Соответствие файлов

| Файл MetaTrader | Файл StockSharp | Примечание |
| --- | --- | --- |
| `MQL/8539/AwesomeFxTradera.mq4` | `CS/AwesomeFxTraderStrategy.cs` | Воссоздана разность EMA по цене открытия и логика окраски столбиков. |
| `MQL/8539/t_ma.mq4` | `CS/AwesomeFxTraderStrategy.cs` | Реализована LWMA на 34 бара с 6-периодным сглаживанием. |

Python-реализация намеренно не добавлялась.

# Trend RDS
[English](README.md) | [中文](README_cn.md)

Стратегия Trend RDS ищет направленные последовательности свечей. Если три завершённые свечи формируют строго повышающиеся минимумы, это трактуется как бычий импульс; три строго понижающиеся максимумы задают медвежий сигнал. Защитное правило блокирует сделку, когда те же три бара одновременно создают и повышающиеся минимумы, и понижающиеся максимумы — обычно это признак сужающегося треугольника, а не тренда. Параметр `Reverse` позволяет при необходимости инвертировать направление сделок.

Торговля ведётся только внутри заданного временного окна (по умолчанию 09:00–12:00). Когда окно открыто и появляется допустимый паттерн, стратегия закрывает противоположную позицию, открывает рыночную заявку по цене закрытия сигнальной свечи и выставляет стоп-лосс и тейк-профит в пунктах. Размер пункта вычисляется из шага цены инструмента, что повторяет логику оригинального советника MetaTrader. Дополнительный трейлинг-стоп переносит защитный уровень вперёд после прохождения цены на величину стопа плюс шаг трейлинга; пересмотр стопа выполняется только в пределах торговой сессии.

Объём позиции пересчитывается при каждом входе. Стратегия выделяет долю капитала портфеля, заданную параметром `RiskPercent`, и делит её на денежный риск, соответствующий текущему стопу. Такой подход масштабирует объём одновременно с размером счёта и шириной стопа, при этом уважая минимальный `Volume`. Любой параметр риска, равный нулю, отключает соответствующую функцию и позволяет торговать фиксированным объёмом либо без защитных ордеров.

## Подробности
- **Условия входа**: Три последовательные свечи с повышающимися минимумами открывают покупку (или продажу, если активирован `Reverse`). Три последовательные свечи с понижающимися максимумами открывают продажу (или покупку в режиме реверса). Сигналы игнорируются, если эти же три свечи одновременно удовлетворяют обоим условиям.
- **Направление**: Работа в обе стороны с возможностью инверсии.
- **Условия выхода**: Рыночный выход при достижении стоп-лосса, тейк-профита или трейлинг-стопа.
- **Стопы**: Фиксированные стоп-лосс и тейк-профит в пунктах плюс ступенчатый трейлинг-стоп (оба трейлинг-параметра должны быть положительными).
- **Торговое окно**: Сделки совершаются только между `StartTime` и `EndTime` (по умолчанию 09:00–12:00 по времени площадки).
- **Размер позиции**: Расчёт по риску — доля капитала `RiskPercent` относительно текущей дистанции стопа (если рассчитать невозможно, используется `Volume`).
- **Значения по умолчанию**:
  - `StopLossPips` = 30
  - `TakeProfitPips` = 65
  - `TrailingStopPips` = 0
  - `TrailingStepPips` = 5
  - `RiskPercent` = 3
  - `StartTime` = 09:00
  - `EndTime` = 12:00
  - `Reverse` = false
- **Фильтры**:
  - Категория: Trend
  - Направление: Оба направления
  - Индикаторы: Прайс-экшен (максимумы/минимумы)
  - Стопы: Да
  - Сложность: Средняя
  - Таймфрейм: Внутридневной
  - Сезонность: Нет
  - Нейросети: Нет
  - Дивергенции: Нет
  - Уровень риска: Средний

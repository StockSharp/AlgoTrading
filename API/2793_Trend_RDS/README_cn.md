# Trend RDS
[English](README.md) | [Русский](README_ru.md)

Trend RDS 策略专注于价格行为中的方向性结构。当三根已完成的 K 线呈现严格递增的低点时，被视为新的多头动能；三根严格递减的高点则被视为空头机会。若同一组三根 K 线同时出现更高低点和更低高点（通常意味着收敛三角形），信号会被过滤掉，以避免在无明显趋势时入场。`Reverse` 参数可以按需反转多空方向。

策略只在可配置的时间窗口内交易（默认 09:00–12:00）。在窗口开启且出现有效信号时，会先平掉反向持仓，再按照信号 K 线的收盘价市价入场，并按照点数设置止损与止盈。点值由标的的最小报价步长换算，复现原始 MetaTrader 系统的处理方式。可选的移动止损在价格走出“止损距离 + 止损步长”后推进保护位，且仅在交易窗口内更新。

每次入场都会重新计算仓位。策略以 `RiskPercent` 指定的权益比例作为风险预算，再除以当前止损对应的货币风险，从而得到动态的下单数量，同时保证不低于 `Volume` 的最小值。若某个风险参数为零，则关闭该功能，可按固定手数或无保护单进场。

## 详情
- **入场条件**：三根连续 K 线形成更高低点时做多（启用 `Reverse` 时改为做空）；三根连续 K 线形成更低高点时做空（反向模式下改为做多）。若同一组三根 K 线同时满足两个条件，则忽略信号。
- **多空方向**：支持双向交易，可通过 `Reverse` 切换。
- **离场条件**：当跟踪的止损、止盈或移动止损被触发时以市价离场。
- **止损设置**：以点数定义的固定止损和止盈，可选的逐步移动止损（两个移动止损参数都需为正）。
- **交易时段**：仅在 `StartTime` 与 `EndTime` 之间下单（默认 09:00–12:00，按交易所时间）。
- **仓位管理**：按 `RiskPercent` 占用的账户权益与止损距离计算下单数量（无法计算时退回到 `Volume`）。
- **默认参数**：
  - `StopLossPips` = 30
  - `TakeProfitPips` = 65
  - `TrailingStopPips` = 0
  - `TrailingStepPips` = 5
  - `RiskPercent` = 3
  - `StartTime` = 09:00
  - `EndTime` = 12:00
  - `Reverse` = false
- **筛选标签**：
  - 分类：Trend
  - 方向：双向
  - 指标：价格行为（高点/低点）
  - 止损：是
  - 复杂度：中等
  - 周期：日内
  - 季节性：否
  - 神经网络：否
  - 背离：否
  - 风险等级：中等

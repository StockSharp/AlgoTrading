# Bands Price 策略

该策略是 MetaTrader 平台 **i-BandsPrice** 专家的移植。它利用布林带衡量价格在通道中的相对位置，并在值离开极端区域时做出反应。

## 逻辑

1. 根据设置的周期和偏差构建布林带。
2. 计算价格在带内的位置，范围在 -50 到 +50 之间。
3. 使用简单移动平均对该值进行平滑。
4. 生成颜色代码：
   - 当平滑值高于上限时为 `4`。
   - 当平滑值低于下限时为 `0`。
   - 其他数值表示中间区域。
5. 当指标从上方区域离开时（`4` → 非 `4`）做多。
6. 当指标从下方区域离开时（`0` → 正值）做空。
7. 当值变为非正时平多仓。
8. 当值变为非负时平空仓。

## 参数

| 名称 | 描述 |
|------|------|
| **BuyOpen** | 是否允许做多。|
| **SellOpen** | 是否允许做空。|
| **BuyClose** | 是否允许平多。|
| **SellClose** | 是否允许平空。|
| **BandsPeriod** | 布林带周期。|
| **BandsDeviation** | 带宽偏差。|
| **Smooth** | 内部值的平滑长度。|
| **UpLevel** | 上阈值，默认 `25`。|
| **DnLevel** | 下阈值，默认 `-25`。|
| **CandleType** | 计算所用的K线时间框架。|

## 说明

该策略展示了如何使用 `SubscribeCandles` 与 `Bind` 将 MetaTrader 指标逻辑迁移至 StockSharp 高级 API。

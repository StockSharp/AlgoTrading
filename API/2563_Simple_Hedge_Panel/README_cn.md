# 简易对冲面板策略
[English](README.md) | [Русский](README_ru.md)

简易对冲面板策略在 StockSharp 中复刻了 MetaTrader 5 «Simple Hedge Panel» 智能交易面板的行为。原始版本允许交易者配置最多五个交易框，每个框分别设置品种、方向和手数，然后通过一键执行所有开仓或平仓操作。本次移植保持同样的手动流程：启动策略时会一次性提交所有有效的市价单，停止策略或手动调用关闭方法时会把相关头寸全部平掉。

这是一款半自动执行工具，而不是依赖指标的量化策略。它不做任何行情分析，只是帮助交易者按照预设好的参数快速同步开仓或平仓，非常适合对冲相关资产、在多个工具之间拆分头寸，或者在手动管理的组合中同时建立多头和空头仓位。

## 使用步骤

1. 通过 `Slots` 参数设置要启用的槽位数量（1 至 5）。
2. 对每个槽位填写：
   - 交易品种（`Slot N Security`）。
   - 下单手数（`Slot N Volume`）。
   - 方向（`Slot N Buy` 为 `true` 表示买入，`false` 表示卖出）。
3. 绑定一个投资组合，并根据需要指定策略的默认 `Security`，以便在槽位未填写品种时作为回退选项。
4. 启动策略，即会像 MT5 面板的 “Open Hedge Positions” 按钮一样，同时发送所有通过验证的市价单。
5. 停止策略或在运行过程中调用 `CloseConfiguredPositions()`，即可对所有相关品种执行市价平仓，效果等同于面板的 “Close Hedge Positions” 按钮。

## 参数说明

- **Slots**：要处理的槽位数量。超出 1–5 的数值会被自动限制并写入日志。
- **Slot N Security**：槽位对应的品种。如果留空，则使用策略的默认 `Security`。
- **Slot N Volume**：市价单手数。必须大于 0 才会下单。
- **Slot N Buy**：当值为 `true` 时发送买单，为 `false` 时发送卖单。

各槽位互不影响，可以对不同的品种同时建立多头或空头。当某个槽位缺少必要信息时，策略会跳过该槽并记录日志，提示操作者原因。

## 交易逻辑

- 只有在指定了投资组合的情况下才会发单；若缺少组合，会记录错误并终止操作。
- 每次执行开仓或平仓都会重新校验槽位配置，单个槽位的错误不会阻碍其他槽位的执行。
- 内部的 `_positionsOpened` 标志可以避免在未平仓之前重复提交同一组订单，从而模拟原面板的工作流程。
- `CloseConfiguredPositions()` 会查询投资组合中各品种的当前仓位，只要仓位不为零便发送市价平仓指令。该方法可在任何时刻调用。

## 额外提示

- 策略不会自动订阅蜡烛或指标数据，它仅负责执行手动设定的市价单。
- 可以在多个槽位中使用同一品种，也可以混合独立的品种和默认品种。
- 所有日志信息均使用英文，以符合代码规范的要求。
- 槽位参数面向人工操作，不建议在优化器中使用；它们更适合于真实或模拟盘中的手动对冲场景。

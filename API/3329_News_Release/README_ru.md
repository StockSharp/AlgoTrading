# Стратегия News Release

Стратегия повторяет ключевые механики экспертного советника **NewsReleaseEA**: заранее выставляет симметричные стоп‑ордера перед выходом новости и активно сопровождает открытую позицию.

## Основные идеи

- Пять входных параметров (время новости, временные окна до/после, базовое расстояние и шаг между ордерами) определяют момент размещения и уровни заявок.
- Непосредственно перед событием публикуется пара Buy Stop и Sell Stop. Первая пара ставится на расстоянии `DistancePips` от текущего ask/bid, следующие пары смещаются на `StepPips`.
- Все отложенные ордера остаются активными до истечения `PostNewsMinutes` минут после новости. По окончании окна стратегия отменяет их и, при необходимости, закрывает открытую позицию.
- После срабатывания любой заявки противоположные ордера снимаются автоматически, а позиция управляется правилами стоп‑лосса, тейк‑профита, перевода в безубыток и трейлинга (все значения указываются в пунктах).
- Модуль безубытка активируется, когда цена проходит `BreakEvenTriggerPips` в прибыльную сторону, и закрывает сделку, если цена возвращается к уровню входа плюс `BreakEvenOffsetPips` (для лонга) или минус этот сдвиг (для шорта).
- Трейлинг отслеживает максимальное/минимальное значение после входа. Как только расстояние до текущей цены превысит `TrailingPips`, позиция закрывается для фиксации прибыли.
- Флаг `TradeOnce` соответствует параметру «TradeOneTimePerNews» из оригинального советника и запрещает повторный запуск после завершения первой сделки.

## Параметры

- `NewsTime` – момент выхода новости.
- `PreNewsMinutes` – за сколько минут до события выставлять ордера.
- `PostNewsMinutes` – сколько минут держать ордера после новости.
- `OrderPairs` – количество пар Buy Stop/Sell Stop.
- `DistancePips` – расстояние (в пунктах) до первой пары от текущих цен.
- `StepPips` – дополнительный шаг между соседними парами.
- `OrderVolume` – объем каждого отложенного ордера.
- `TradeOnce` – разрешить только одну сделку на событие.
- `UseStopLoss` / `StopLossPips` – включить стоп‑лосс и задать расстояние.
- `UseTakeProfit` / `TakeProfitPips` – включить тейк‑профит и задать расстояние.
- `UseBreakEven`, `BreakEvenTriggerPips`, `BreakEvenOffsetPips` – параметры перевода в безубыток.
- `UseTrailing` / `TrailingPips` – включить трейлинг и определить его шаг.
- `CloseAfterEvent` – закрывать позицию после завершения пост‑новостного окна.

## Заметки

- Стратегия использует только поток Level1 (`SubscribeLevel1`), поэтому реагирует на изменения bid/ask без ожидания закрытия свечи.
- Пункты переводятся в абсолютные цены через `PriceStep` инструмента; если шаг цены неизвестен, используется значение 1 для безопасного расчёта.
- Все защитные правила закрывают позицию рыночной заявкой (`ClosePosition()`), что сохраняет реактивный стиль управления, присущий оригинальному EA.
- Python‑версия преднамеренно отсутствует.

# Стратегия мониторинга среднего движения в пунктах

## Обзор
**AveragePipMovementTickSecondsStrategy** переносит логику советника MQL «Average Pip Movement based on Tick & Seconds» на высокоуровневый API StockSharp. Стратегия непрерывно обрабатывает котировки bid/ask, конвертирует изменения в пункты и рассчитывает скользящие средние как по движению цены, так и по спреду. Сделки не совершаются — решение предназначено исключительно для оперативного анализа волатильности и оценок торговых издержек.

## Подписки и индикаторы
- Выполняется подписка на данные Level1 выбранного инструмента; каждая обновлённая котировка сразу же используется в расчётах.
- Задействуются два индикатора `SimpleMovingAverage`:
  - Первый принимает абсолютные приращения между последовательными ценами bid (в пересчёте на пункты) и формирует среднее движение на один тик.
  - Второй получает мгновенный спред между ask и bid, также приведённый к пунктам, и вычисляет средний спред на тик.
- Результаты учитываются только после формирования индикаторов, что соответствует исходной реализации с кольцевым буфером.

## Параметры
| Параметр | Значение по умолчанию | Описание |
|----------|------------------------|----------|
| `MaxTicks` | `100` | Количество последних тиков, участвующих в расчётах. При значении 100 анализируется 99 разностей цен bid и 100 измерений спреда. |
| `CheckIntervalSeconds` | `1` | Интервал между расширенными отчётами в лог (секунды). Как только время с предыдущего отчёта превышает порог, стратегия выводит дополнительную сводку. |

Оба параметра доступны для оптимизации.

## Поведение в работе
1. В методе `OnStarted` стратегия считывает размер шага цены (`Security.PriceStep`) и на его основе определяет величину пункта. Одновременно инициализируются оба индикатора.
2. Каждый приход сообщения Level1:
   - Обновляет текущие значения bid и ask.
   - Передаёт абсолютное изменение bid в индикатор среднего движения, если имеется предыдущая цена.
   - Направляет текущий спред в индикатор среднего спреда, когда известны обе стороны котировки.
3. После формирования индикаторов публикуются два вида сообщений:
   - **Тиковый лог** — фиксирует актуальные значения средних по движению и спреду при каждом новом расчёте.
   - **Периодический отчёт** — формируется по истечении заданного количества секунд и воспроизводит информативный блок `Comment` из MQL-версии.

## Торговые действия
Стратегия не выставляет заявок и может использоваться параллельно с другими алгоритмами как источник служебной телеметрии.

## Особенности конверсии
- Кольцевые массивы MQL заменены индикаторами `SimpleMovingAverage`, что соответствует требованиям по отказу от ручных коллекций.
- Спред вычисляется как разница между лучшим ask и bid, после чего автоматически переводится в пункты через минимальный шаг цены инструмента.
- Все комментарии в коде написаны на английском языке, а подписка реализована через `SubscribeLevel1().Bind(...)` в соответствии с методическими указаниями.

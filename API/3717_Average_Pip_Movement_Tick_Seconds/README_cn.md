# 平均点差波动监控策略

## 概述
**AveragePipMovementTickSecondsStrategy** 使用 StockSharp 的高级 API 重现了 MQL 专家顾问 “Average Pip Movement based on Tick & Seconds” 的监控功能。策略持续接收买一/卖一报价，计算相邻报价之间的点数变化以及买卖价差的平均值，并将结果记录在日志中。该实现不会发送任何交易指令，仅用于实时分析短期波动性与交易成本。

## 数据订阅与指标
- 订阅所选证券的 Level1 行情，逐条处理买价与卖价。
- 使用两个 `SimpleMovingAverage`（简单移动平均）指标：
  - 第一个指标接收相邻买价的绝对差值（换算成点），输出每跳平均点波动。
  - 第二个指标接收即时点差（同样以点计），输出每跳平均点差。
- 只有在指标形成有效值后才使用结果，等价于原始 MQL 版本在缓冲区填满后才计算的逻辑。

## 参数
| 参数 | 默认值 | 说明 |
|------|--------|------|
| `MaxTicks` | `100` | 计算平均值时参考的最新跳数。值为 100 时，策略会分析 99 个连续买价差值和 100 个价差样本。 |
| `CheckIntervalSeconds` | `1` | 周期性总结日志之间的间隔（秒）。当距离上一次总结的时间超过该值时，策略会输出额外的周期报告。 |

所有参数都允许在优化器中调节。

## 运行流程
1. 在 `OnStarted` 中，根据 `Security.PriceStep` 推导点值并初始化两个移动平均指标。
2. 每次收到 Level1 更新时：
   - 刷新最新的买价与卖价。
   - 在存在前一个买价时，将绝对差值送入“点波动”指标。
   - 在同时拥有买价与卖价时，将即时点差送入“点差”指标。
3. 当两个平均值都形成之后，策略会输出两类信息：
   - **逐跳日志**：每当得到新的点波动平均值时输出，同时包含当前的平均点差。
   - **周期报告**：当距离上一次总结的时间超过设定的秒数时输出，对应 MQL 版本中图表注释区域的文本。

## 交易规则
策略从不提交订单，可与其他交易策略同时运行，用于提供辅助的市场监控数据。

## 转换说明
- 原始脚本中的循环缓冲区被两个简单移动平均指标所替代，避免了手工维护集合，并符合平台约定。
- 点差通过卖价减买价得到，并使用品种的最小价格步长转换成点值。
- 源码中的注释全部为英文，同时使用 `SubscribeLevel1().Bind(...)` 等高级封装以遵守转换准则。

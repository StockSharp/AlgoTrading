# Ma2Cci Ema 策略
[English](README.md) | [Русский](README_ru.md)

该策略结合两条指数移动平均线 (EMA) 的金叉/死叉信号与 CCI 指标突破零轴的确认。仓位规模与止损距离基于 ATR 波动率及可配置的风险百分比计算，从而复现原始 MetaTrader 专家的风控逻辑。

## 详情

- **数据**：通过 `CandleType` 参数选择的时间周期蜡烛（默认 1 小时）。
- **入场**：当快速 EMA 向上穿越慢速 EMA 且 CCI 同时突破零轴时做多；快速 EMA 向下穿越并且 CCI 跌破零轴时做空。
- **出场**：多头在快速 EMA 再次跌破慢速 EMA 或价格触及固定止损时平仓；空头在快速 EMA 再次上穿慢速 EMA 或触及空头止损时平仓。
- **风险**：止损距离取 ATR(`AtrPeriod`) 与 `MinStopPoints`×价格最小变动单位两者的较大值。下单数量等于账户当前价值乘以 `RiskPercent`，再除以止损距离。
- **适用市场**：趋势性较强的外汇与股指等 24 小时市场，同样适合其它具有明确动量波段的资产。
- **运行环境**：需要稳定的流动性与连续报价，使 EMA/CCI 信号与 ATR 风险控制能够协同发挥作用。

## 参数

- `CandleType` – 计算所使用的蜡烛类型和周期。
- `FastMaPeriod` – 快速 EMA 的周期（默认 10）。
- `SlowMaPeriod` – 慢速 EMA 的周期（默认 37）。
- `CciPeriod` – CCI 指标的观察窗口（默认 39）。
- `AtrPeriod` – 用于估算波动率并设置止损的 ATR 周期（默认 3）。
- `RiskPercent` – 每笔交易愿意承担的账户风险百分比（默认 2%）。
- `MinStopPoints` – 最小止损距离（以价格跳动点数表示），模拟原始 EA 的最小点差过滤器（默认 15）。

## 备注

- 止损在开仓时确定，不会跟随价格移动，严格控制单笔风险。
- 若经纪商未提供组合当前价值，策略会退回使用 `Volume` 参数或合约允许的最小数量。
- 建议在流动性不足或震荡剧烈时暂停运行，以避免过多的假信号与频繁止损。

[English](README.md) | [中文](README_cn.md)

Стратегия **Alert MACD Slow** повторяет советника MetaTrader 4 `Alert_MACD_Slow.mq4`. Она отслеживает основную линию MACD и две экспоненциальные средние, формируя текстовые оповещения при появлении признаков пробоя. Торговые заявки не отправляются — конверсия полностью соответствует оригиналу, который лишь показывал всплывающие сообщения.

## Основная идея

1. Подписаться на выбранную серию свечей и подать данные в MACD(3, 20, 9) вместе с быстрыми и медленными EMA (20 и 65 периодов).
2. Сохранять значения MACD для четырёх предыдущих завершённых свечей, чтобы воспроизвести переходы наклонов из MQL-кода.
3. Запоминать максимумы и минимумы двух последних свечей, имитируя фильтры пробоя `High[1]/High[2]` и `Low[1]/Low[2]`.
4. Когда быстрая EMA находится выше (или ниже) медленной, а закрытие свечи пробивает сохранённые максимумы (или минимумы) и MACD разворачивается вверх (или вниз) под нулевой линией, вывести соответствующее сообщение в журнал.

## Параметры

| Имя | Значение по умолчанию | Описание |
| --- | --- | --- |
| `MacdFastPeriod` | `3` | Длина быстрой EMA внутри расчёта MACD. |
| `MacdSlowPeriod` | `20` | Длина медленной EMA для MACD. |
| `MacdSignalPeriod` | `9` | Период сигнальной EMA индикатора MACD. |
| `QuickEmaPeriod` | `20` | Период быстрой трендовой EMA (`Ma_Quick`). |
| `SlowEmaPeriod` | `65` | Период медленной трендовой EMA (`Ma_Slow`). |
| `CandleType` | `TimeFrame(30m)` | Тип свечей для индикаторов; выбирайте таймфрейм под свой график. |

## Детали логики оповещений

- **Память наклона MACD**: Стратегия сдвигает прошлые значения MACD внутри себя, не используя `GetValue`, что соответствует правилам конверсии и сохраняет исходные сравнения (`Macd_1 > Macd_2` и т.д.).
- **Проверка пробоя**: Закрытие выше прошлых максимумов или ниже прошлых минимумов служит заменой проверкам bid/ask из MetaTrader, где использовалась текущая котировка и исторические экстремумы свечей.
- **Трендовый фильтр**: Оповещения возникают только при правильном расположении быстрой и медленной EMA, как и в MQL-советнике.
- **Логирование**: Сообщения печатаются через `AddInfoLog` и содержат четыре сохранённых значения MACD и уровни пробоя для удобства анализа.
- **Без торговли**: Поскольку оригинал не открывал позиции, конверсия также остаётся сигнализатором без сделок.

## Типовой сценарий использования

1. Привяжите стратегию к инструменту, выберите подходящий тип свечей и при необходимости скорректируйте периоды индикаторов.
2. Запустите стратегию и дождитесь формирования MACD и EMA (для вычислений требуется несколько свечей).
3. Следите за журналом: при бычьем сигнале появится запись `SET UP LONG`, при медвежьем — `SET UP SHORT_VALUE`. Суффикс сохранён в точности как в оригинале.
4. Используйте выводимые значения для ручного решения или дальнейшей автоматизации.

## Классификация

- **Категория**: Оповещения / Подтверждение пробоев тренда
- **Торговое направление**: Нет (только сигналы)
- **Стиль исполнения**: Событийная обработка завершённых свечей
- **Тип данных**: Свечи выбранного типа `CandleType`
- **Сложность**: Средняя (несколько фильтров, но простое хранение состояния)
- **Управление рисками**: Не требуется (сделки не открываются)

Такая адаптация использует подписки StockSharp, биндинг индикаторов и журнал стратегии, сохраняя поведение MQL-советника, ориентированного на оповещения.

[English](README.md) | [中文](README_cn.md)

Стратегия воссоздаёт канал Center of Gravity из оригинального эксперта MQL4, решая задачу полиномиальной регрессии на последних барах. Центр канала берётся из свободного члена решения метода наименьших квадратов, а ширина формируется на основе стандартного отклонения цен закрытия за тот же интервал. Нижняя граница равна центру минус масштабированное отклонение, что соответствует буферу `stdl`, к которому обращался исходный робот.

Во время работы поддерживается скользящая очередь закрытий длиной **Bars Back**. Каждый завершённый бар инициирует пересчёт коэффициентов регрессии с помощью метода Гаусса для системы нормальных уравнений. Это позволяет обойтись без хранения полной истории свечей и даёт ту же геометрию канала, что и пользовательский индикатор. При вырожденной матрице пересчёт пропускается, чтобы избежать нестабильных торговых решений.

Торговая логика повторяет эксперта: когда минимум текущей свечи остаётся выше нижней границы отклонения (`lowerBand < Low` в обозначениях MQL), стратегия трактует это как отскок к среднему. При отсутствии длинной позиции закрываются возможные шорты и отправляется рыночная покупка с объёмом стратегии. Последние значения центра и границ доступны через свойства только для чтения и могут использоваться для визуализации.

Блок управления риском необязателен. **Stop Loss Distance** и **Take Profit Distance** задаются в абсолютных ценовых единицах. При ненулевых значениях стратегия запоминает цену входа в длинную позицию и проверяет экстремумы свечи, чтобы определить достижение стопа или цели. Если параметры равны нулю, позицию можно сопровождать вручную либо внешними модулями.

### Параметры
- **Candle Type** – таймфрейм свечей, на которых строится регрессионный канал.
- **Bars Back** – количество баров истории, участвующих в расчёте канала (по умолчанию 125).
- **Polynomial Degree** – степень полиномиальной регрессии, задающая кривизну канала (по умолчанию 2).
- **Std Multiplier** – множитель стандартного отклонения при формировании границ (по умолчанию 1).
- **Stop Loss Distance** – необязательное расстояние стоп-лосса в ценовых единицах (0 отключает).
- **Take Profit Distance** – необязательное расстояние тейк-профита в ценовых единицах (0 отключает).

Стратегия обрабатывает только завершённые свечи, использует рыночные заявки для входа и не открывает коротких позиций, так как в исходном коде ветка продаж была закомментирована.

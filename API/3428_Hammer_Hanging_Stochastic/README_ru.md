# Hammer Hanging Stochastic
[English](README.md) | [中文](README_cn.md)

Стратегия переносит логику советника MetaTrader "Expert_AH_HM_Stoch" на высокоуровневый API StockSharp. Используются свечные модели Молот/Повешенный в сочетании с подтверждением от стохастического осциллятора, что позволяет ловить развороты после резких импульсов.

Обработка сигналов происходит только после формирования свечи. Для фильтрации применяются значения линии %D стохастика, а выход из позиции осуществляется при выходе индикатора из зон перепроданности/перекупленности.

## Детали

- **Условия входа**:
  - Лонг: бычий молот и значение стохастика %D (по предыдущей свече) ниже уровня перепроданности.
  - Шорт: медвежий повешенный и значение стохастика %D (по предыдущей свече) выше уровня перекупленности.
- **Направление**: Лонг и шорт.
- **Выход**: Закрытие при пересечении стохастиком настраиваемых уровней восстановления и экстремумов.
- **Стопы**: Через `StartProtection()` (используются настройки по счёту, при необходимости можно задать стоп-лосс/тейк-профит).
- **Значения по умолчанию**:
  - `CandleType` = TimeSpan.FromHours(1)
  - `StochPeriodK` = 15
  - `StochPeriodD` = 49
  - `StochPeriodSlow` = 25
  - `OversoldLevel` = 30
  - `OverboughtLevel` = 70
  - `ExitLowerLevel` = 20
  - `ExitUpperLevel` = 80
  - `MaxBodyRatio` = 0.35
  - `LowerShadowMultiplier` = 2.5
  - `UpperShadowMultiplier` = 0.3
- **Фильтры**:
  - Категория: Паттерны + осциллятор
  - Направление: Обе стороны
  - Индикаторы: Свечные модели, Stochastic
  - Стопы: Поддерживаются через `StartProtection`
  - Сложность: Средняя
  - Таймфрейм: Свинг/внутридневной (дефолт 1 час)
  - Сезонность: Нет
  - Нейросети: Нет
  - Дивергенция: Нет
  - Уровень риска: Средний

## Алгоритм работы

1. Подписывается на выбранные свечи и стохастик через `BindEx`, используя высокоуровневый API.
2. Определяет свечные модели Молот и Повешенный по соотношению тела и теней.
3. Подтверждает входы значением линии %D стохастика на предыдущей свече.
4. Закрывает позиции при выходе стохастика из зон перепроданности/перекупленности, повторяя логику оригинального советника.
5. При наличии области графика отображает свечи, осциллятор и собственные сделки.

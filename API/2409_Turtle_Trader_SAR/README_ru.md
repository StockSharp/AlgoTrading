[English](README.md) | [中文](README_cn.md)

Turtle Trader SAR — это конвертация оригинальной MQL5 стратегии Turtle с возможностью трейлинг-стопа по Parabolic SAR в StockSharp.
Стратегия торгует пробои каналов Дончиана, рассчитывает размер позиции на основе риска по ATR и наращивает прибыльные позиции.

## Как работает

1. **Расчёт индикаторов**
   - ATR(20) для оценки волатильности.
   - Каналы Дончиана по периодам `ShortPeriod` и `ExitPeriod`.
   - Опционально Parabolic SAR для трейлинг-стопа.
2. **Размер позиции**
   - В каждой сделке используется `RiskFraction` от текущего капитала.
   - Количество лотов ограничено параметром `MaxUnits`.
3. **Вход в рынок**
   - Закрытие выше максимума `ShortPeriod` — покупка.
   - Закрытие ниже минимума `ShortPeriod` — продажа.
4. **Пирамидинг**
   - Каждые `AddInterval` ATR в сторону профита добавляется новая позиция до `MaxUnits`.
5. **Выход из рынка**
   - Пробой канала `ExitPeriod` в противоположную сторону.
   - Стоп по ATR (`StopAtr`) и опционный тейк-профит (`TakeAtr`).
   - При `UseSar=true` добавляется трейлинг по Parabolic SAR.

## Параметры

- `ExitPeriod` = 10
- `ShortPeriod` = 20
- `LongPeriod` = 55
- `RiskFraction` = 0.01
- `MaxUnits` = 4
- `AddInterval` = 1
- `StopAtr` = 1
- `TakeAtr` = 1
- `UseSar` = false
- `SarStep` = 0.02
- `SarMax` = 0.2
- `CandleType` = 1 день

## Теги

- **Категория**: Следование тренду
- **Направление**: Оба
- **Индикаторы**: ATR, Highest, Lowest, Parabolic SAR
- **Стопы**: ATR / SAR
- **Сложность**: Средняя
- **Таймфрейм**: Дневной
- **Сезонность**: Нет
- **Нейросети**: Нет
- **Дивергенция**: Нет
- **Уровень риска**: Средний

# Стратегия Exp BrainTrend2 AbsolutelyNoLagLwma X2MACandle MMRec

## Обзор
Стратегия переносит многоуровневый советник MetaTrader в инфраструктуру StockSharp и использует три согласованных фильтра:

1. **BrainTrend2** – индикатор ATR отслеживает сжатие и расширение волатильности и задаёт контекст тренда.
2. **AbsolutelyNoLagLwma** – линейно взвешенное скользящее среднее показывает текущее направление без значительной задержки.
3. **X2MACandle** – пара экспоненциальных средних оценивает «цвет» свечи и подтверждает импульс.

Сделка открывается только тогда, когда все фильтры указывают в одну сторону. Выход выполняется по динамическим уровням стоп-лосса и тейк-профита, рассчитываемым на базе ATR, что имитирует модуль MMRec из исходного алгоритма.

## Логика торговли
- **Покупка**: закрытие свечи выше LWMA и одновременное положение быстрой EMA выше медленной. Новый вход допускается только после исчезновения предыдущего бычьего сигнала, чтобы избежать каскада сделок.
- **Продажа**: закрытие ниже LWMA и расположение быстрой EMA ниже медленной. Для коротких позиций действуют те же правила подтверждения и паузы.
- **Управление рисками**: стоп и тейк пересчитываются на каждой свече по текущему значению ATR. При достижении уровня позиция закрывается рыночным ордером.

## Параметры
| Имя | Описание |
| --- | --- |
| `CandleType` | Таймфрейм свечей, по умолчанию 6 часов как в оригинальном советнике. |
| `AtrPeriod` | Период расчёта индикатора ATR. |
| `LwmaLength` | Длина линейно взвешенного скользящего среднего. |
| `FastMaLength` | Период быстрой EMA для фильтра свечей. |
| `SlowMaLength` | Период медленной EMA для фильтра свечей. |
| `StopLossAtrMultiplier` | Множитель ATR для расчёта защитного стопа. |
| `TakeProfitAtrMultiplier` | Множитель ATR для расчёта цели по прибыли. |

Параметры оформлены через `StrategyParam<T>`, что облегчает оптимизацию в StockSharp.

## Примечания
- В оригинале использовались нестандартные буферы индикаторов. В портированной версии применяются доступные индикаторы StockSharp, создающие аналогичные сигналы.
- Управление позицией упрощено до полной фиксации позиции по достижению целей. Волатильностные уровни на основе ATR обеспечивают адаптивность, аналогичную модулю MMRec.
- Все комментарии в коде написаны на английском языке в соответствии с требованиями.

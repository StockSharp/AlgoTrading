# EA Breakeven Stop Manager 策略
[English](README.md) | [Русский](README_ru.md)

该策略复刻了 MetaTrader 5 的 `eaBreakeven` 专家顾问。它本身**不会**生成入场信号，而是专注于在已有头寸上自动锁定利润：当浮动收益达到预设阈值时，将止损移动到开仓价并加上一个安全缓冲区。

## 核心思想

- 适合希望使用 StockSharp 管理保护性止损，而由其他系统负责入场的用户。
- 支持任何提供买一 / 卖一报价的品种，可同时处理多头和空头。
- 使用品种的 `PriceStep` 将“点数”转换成真实价格增量，与原始 MQL5 程序的计算方式一致。

## 工作流程

1. 订阅 Level1 数据，实时跟踪最新买价与卖价。
2. 当没有持仓时保持空闲。
3. 对于**多头仓位**：
   - 等待买价至少高于平均开仓价 `BreakevenPoints` 个点。
   - 条件满足后，将内部止损设为 `开仓价 + DistancePoints`。
   - 如果买价回落到该水平，立即通过市价单平仓以锁定利润。
4. 对于**空头仓位**：
   - 等待卖价至少低于平均开仓价 `BreakevenPoints` 个点。
   - 将保护价位设为 `开仓价 - DistancePoints`。
   - 一旦卖价反弹至该价位，使用市价单回补空头。
5. 可选的通知功能会在每次把止损移至保本位置时写入日志。

原版 EA 会直接修改平台中的止损订单；本策略通过在触发价位时发送市价单，实现同样的收益保护效果。

## 参数说明

- `BreakevenPoints`（默认 **15**）
  - 启动保本移动前所需的浮动盈利点数。
  - 设为负值即可完全关闭保本逻辑。
- `DistancePoints`（默认 **5**）
  - 从开仓价计算的缓冲区，决定最终锁定的利润。
- `EnableNotifications`（默认 **true**）
  - 启用后，每次更新止损都会在日志中记录提示。

## 信号与委托

- **入场**：无，需外部策略提供。
- **离场**：当价格触及内部保存的保本价位时发送市价单。
- **委托类型**：仅使用市价单，不挂出限价或止损单。

## 风险控制

- 只有在头寸获得足够利润后才会触发保本，避免过早退出。
- 缓冲区确保止损落在盈利区域而非原始开仓价。
- 平仓后自动重置内部状态，为下一笔交易做好准备。

## 使用建议

- 与任何自主产生信号的策略配合使用，交由本策略管理止损。
- 在真实交易和回测中均可运行，前提是有 Level1 报价。
- 请确认证券元数据中 `PriceStep` 设置正确，以保证点值换算准确。

## 默认标签

- 分类：风险管理
- 方向：多头与空头
- 指标：无
- 止损：保本
- 复杂度：入门
- 时间框架：不限（适用于tick、日内或日线数据）
- 季节性：无
- 神经网络：无
- 背离：无
- 风险级别：低

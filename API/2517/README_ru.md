# Стратегия Boll Trade Breakout
[English](README.md) | [中文](README_cn.md)

Эта стратегия переносит эксперта **BollTrade** из MetaTrader в StockSharp. Она торгует пробои полос Боллинджера с
настраиваемым буфером (в пунктах) и при необходимости масштабирует объём сделок в зависимости от баланса. Все решения о
входе принимаются только по закрытым свечам, а позиции сопровождаются фиксированными уровнями стоп-лосса и тейк-профита.

## Идея

- Подписывается на выбранный таймфрейм и рассчитывает полосы Боллинджера с заданным периодом и отклонением.
- Добавляет дополнительный отступ (`Band Offset`) поверх верхней и нижней полос, чтобы отфильтровать ложные импульсы.
- Открывает **покупку**, когда свеча закрывается ниже нижней полосы минус заданный отступ.
- Открывает **продажу**, когда свеча закрывается выше верхней полосы плюс отступ.
- Одновременно может быть открыта только одна позиция; пока активная сделка не завершена, новые входы не рассматриваются.

## Управление сделкой

- После открытия позиции сразу вычисляются уровни стоп-лосса и тейк-профита (в пунктах) и проверяются на каждой закрытой
  свече. При достижении любого из уровней позиция закрывается рыночной заявкой.
- Параметр `Scale Volume` включает динамическое изменение объёма: базовое значение рассчитывается из стартового баланса и
  размера лота, что полностью повторяет оригинальную реализацию в MQL. Максимальный объём ограничен 500 лотами для контроля
  риска.
- Размер пункта вычисляется по `PriceStep` инструмента. Если шаг цены очень мал (как на форекс), он умножается на 10, чтобы
  получить стандартный пункт, аналогично тому, как это делалось в MetaTrader.

## Параметры

| Название | Описание | Значение по умолчанию |
| -------- | -------- | --------------------- |
| `Candle Type` | Таймфрейм для расчёта сигналов. | Свечи 15 минут |
| `Bollinger Period` | Количество баров в расчёте полос Боллинджера. | 4 |
| `Bollinger Deviation` | Коэффициент ширины полос Боллинджера. | 2 |
| `Band Offset` | Дополнительный буфер в пунктах перед подтверждением сигнала. | 3 |
| `Take Profit (pips)` | Дистанция до тейк-профита в пунктах. | 3 |
| `Stop Loss (pips)` | Дистанция до стоп-лосса в пунктах. | 20 |
| `Base Volume` | Базовый размер позиции в лотах при отключённом масштабировании. | 1 |
| `Scale Volume` | Масштабирование объёма в зависимости от баланса. | Включено |

## Рекомендации

- Наиболее логичное применение — валютные пары и CFD, где понятие «пункт» естественно. Однако стратегия также работает на
  фьючерсах и акциях, если корректно задан `PriceStep` инструмента.
- В расчёте участвуют только завершённые свечи, поэтому внутрибарабанные ложные пробои, которые откатывают до закрытия,
  игнорируются.
- Параметры стопа и тейка фиксированы, поэтому их следует адаптировать под волатильность выбранного инструмента и таймфрейм.
- В MetaTrader защита реализована через серверные ордера. В StockSharp те же уровни контролируются внутри стратегии путём
  проверки экстремумов свечей.

## Содержимое

- `CS/BollTradeStrategy.cs` — реализация стратегии на C#.
- `README.md` — документация на английском языке.
- `README_ru.md` — русскоязычное описание (текущий файл).
- `README_cn.md` — документация на китайском.

Python-версия по требованию не создавалась.

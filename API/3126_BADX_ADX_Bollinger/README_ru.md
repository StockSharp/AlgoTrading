# Стратегия BADX ADX Bollinger

## Обзор

Стратегия повторяет эксперта BADX из MetaTrader на базе высокоуровневого API StockSharp. Она сочетает **индекс направленного движения (ADX)** и **полосы Боллинджера**, чтобы работать в диапазонных условиях: когда ADX опускается ниже заданного порога и цена касается внешней полосы, система открывает позицию против движения, рассчитывая на возврат к среднему. Стоп-лосс, тейк-профит и опциональный трейлинг-стоп обслуживаются автоматически через `StartProtection`.

## Как это работает

1. Подписывается на выбранный тип свечей и с помощью высокоуровневого `BindEx` передаёт данные в индикаторы `AverageDirectionalIndex` и `BollingerBands`.
2. Для каждой закрытой свечи обработчик получает значение ADX, а также верхнюю и нижнюю границы полос Боллинджера.
3. Если ADX ниже `AdxLevel`, рынок считается флетовым:
   - При закрытии ниже нижней полосы и отсутствии позиции стратегия покупает по рынку.
   - При закрытии выше верхней полосы и отсутствии позиции стратегия продаёт по рынку.
4. Риск-параметры переводят величины в пунктах в абсолютные ценовые смещения. Стоп-лосс, тейк-профит и при необходимости трейлинг-стоп выставляются сразу после входа посредством менеджера защитных ордеров.
5. Одновременно допускается только одна позиция. Выход осуществляется защитными ордерами или срабатыванием трейлинга.

## Параметры

- **CandleType** (`DataType`): Таймфрейм для расчёта индикаторов. По умолчанию 15 минут.
- **AdxPeriod** (`int`): Период усреднения ADX. По умолчанию 30.
- **AdxLevel** (`decimal`): Максимальное значение ADX, при котором рынок рассматривается как боковой. По умолчанию 20.
- **BollingerPeriod** (`int`): Период средней в полосах Боллинджера. По умолчанию 10.
- **BollingerDeviation** (`decimal`): Множитель стандартного отклонения для полос Боллинджера. По умолчанию 1.5.
- **StopLossPips** (`decimal`): Размер стоп-лосса в пунктах. По умолчанию 50.
- **TakeProfitPips** (`decimal`): Размер тейк-профита в пунктах. По умолчанию 50.
- **TrailingStopPips** (`decimal`): Размер трейлинг-стопа в пунктах. По умолчанию 5.
- **TrailingStepPips** (`decimal`): Минимальное улучшение цены в пунктах для переноса трейлинга. По умолчанию 5.

## Использование

1. Подключите стратегию к инструменту и установите желаемые параметры.
2. Запустите стратегию: она автоматически подпишется на свечи, инициализирует индикаторы и настроит защитные ордера.
3. При наличии поддержки графиков можно наблюдать свечи, полосы Боллинджера и сделки на отдельной панели.
4. При необходимости адаптируйте параметры стопов и трейлинга под волатильность инструмента или собственные предпочтения.

## Примечания

- Обрабатываются только завершённые свечи, чтобы исключить преждевременные сигналы.
- Размер пункта вычисляется из `PriceStep`; для инструментов с 3 или 5 знаками после запятой пункт умножается на 10, что соответствует логике оригинального эксперта.
- По умолчанию `Volume` равен `1`. Измените свойство `Volume`, если требуется другой торговый объём.
- Все комментарии в коде написаны на английском языке в соответствии с требованиями репозитория.

# Стратегия CloseDeleteEA

## Обзор
CloseDeleteEA — это утилита для массового закрытия позиций и удаления отложенных заявок.
Стратегия периодически проверяет портфель и отправляет рыночные или отменяющие команды по заданным фильтрам.
Решение полезно в ситуациях экстренного выхода из рынка, когда ручное управление сделками занимает слишком много времени.

## Основные возможности
- Закрытие длинных и/или коротких позиций рыночными заявками.
- Отмена подходящих отложенных заявок.
- Фильтр по прибыли/убытку, позволяющий избегать отдельных позиций.
- Возможность ограничить обработку только текущим инструментом или задействовать весь портфель.
- Фильтрация по идентификатору стратегии, аналогично magic number из MetaTrader.

## Параметры
| Название | Описание |
| --- | --- |
| `CloseBuyPositions` | Закрывать длинные позиции, удовлетворяющие фильтрам. |
| `CloseSellPositions` | Закрывать короткие позиции, удовлетворяющие фильтрам. |
| `CloseMarketPositions` | Включить модуль закрытия рыночных позиций. |
| `CancelPendingOrders` | Включить удаление отложенных заявок. |
| `CloseOnlyProfitable` | Закрывать позиции только при неотрицательной прибыли. |
| `CloseOnlyLosing` | Закрывать позиции только при неположительном результате. |
| `ApplyToCurrentSecurity` | Обрабатывать только инструмент стратегии; при значении `false` просматривается весь портфель. |
| `TargetStrategyId` | Фильтрация по идентификатору стратегии (пустое значение — все сделки). |
| `TimerInterval` | Частота срабатывания таймера управления. |

## Рекомендации по использованию
1. Подключите стратегию к коннектору с выбранным портфелем.
2. Настройте параметры фильтрации перед запуском.
3. Запустите стратегию — она автоматически завершит работу после обработки всех подходящих позиций и заявок.
4. Помните, что отмена возможна только для заявок, доступных стратегии через коннектор.

## Отличия от версии MQL
- StockSharp оперирует агрегированными позициями, поэтому вместо закрытия конкретных тикетов используется работа с суммарным объёмом.
- Фильтр по идентификатору стратегии заменяет оригинальный magic number.
- Графические элементы очистки чарта MetaTrader не реализованы.

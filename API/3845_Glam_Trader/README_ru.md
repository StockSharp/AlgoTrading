# Glam Trader (мультифреймовая фильтрация)

## Общее описание
Стратегия воспроизводит советник MetaTrader "GLAM Trader", объединяя сигналы сразу с трёх таймфреймов:

- **EMA(3)** на 15-минутных свечах фиксирует краткосрочный тренд.
- **Фильтр Лагерра** с параметром gamma 0.7 на пятиминутных свечах показывает, где находится цена относительно сглаженной траектории.
- **Awesome Oscillator** на часовом графике добавляет компонент импульса в стиле Билла Уильямса.

Сделка открывается только при полном согласии всех индикаторов, что позволяет отсеять ложные сигналы, возникающие при анализе одного таймфрейма.

## Логика работы
1. **Подготовка данных**
   - 15-минутные свечи подключены к `ExponentialMovingAverage` длиной `EmaPeriod` (по умолчанию 3).
   - 5-минутные свечи поступают в `LaguerreFilter` с параметром `LaguerreGamma`.
   - Часовые свечи подключены к `AwesomeOscillator`.
   - Для каждого таймфрейма сохраняется последнее закрытие готовой свечи, чтобы повторить сравнение "значение индикатора против цены" из оригинального советника.
2. **Условия входа**
   - **Покупка**: EMA находится выше текущего закрытия 15-минутной свечи, Лагерр выше последнего закрытия на M5, а Awesome Oscillator выше закрытия последней часовой свечи.
   - **Продажа**: все три условия выполняются в противоположном направлении.
3. **Управление рисками**
   - Раздельные расстояния стоп-лосса и тейк-профита в пунктах для длинных и коротких позиций.
   - Трейлинг-стоп активируется, когда цена проходит минимум заданное число пунктов в сторону прибыли, и затем подтягивается без отката назад.
   - Любой защитный сценарий (тейк-профит, стоп-лосс, трейлинг) закрывает позицию целиком рыночным ордером, как и в версии на MQL.

## Параметры
| Параметр | Описание | Значение по умолчанию |
| --- | --- | --- |
| `TradeVolume` | Объём ордера при входе. | 0.1 |
| `PrimaryCandleType` | Таймфрейм, на котором рассчитывается EMA и принимается решение. | Свечи 15 минут |
| `LaguerreCandleType` | Таймфрейм для фильтра Лагерра. | Свечи 5 минут |
| `AwesomeCandleType` | Таймфрейм для Awesome Oscillator. | Свечи 60 минут |
| `EmaPeriod` | Длина EMA на основном таймфрейме. | 3 |
| `LaguerreGamma` | Параметр gamma фильтра Лагерра. | 0.7 |
| `LongStopLossPoints` | Стоп-лосс для длинных позиций (в пунктах). | 20 |
| `ShortStopLossPoints` | Стоп-лосс для коротких позиций (в пунктах). | 20 |
| `LongTakeProfitPoints` | Тейк-профит для длинных позиций (в пунктах). | 50 |
| `ShortTakeProfitPoints` | Тейк-профит для коротких позиций (в пунктах). | 50 |
| `LongTrailingPoints` | Дистанция трейлинг-стопа для лонгов (в пунктах). | 15 |
| `ShortTrailingPoints` | Дистанция трейлинг-стопа для шортов (в пунктах). | 15 |

## Примечания
- Хранятся только последние значения индикаторов — дополнительные массивы цен не создаются.
- Все комментарии и сообщения в коде написаны на английском языке в соответствии с требованиями проекта.
- Подбирайте параметры, учитывая `PriceStep` инструмента, чтобы защитные уровни соответствовали минимальному шагу цены на бирже.

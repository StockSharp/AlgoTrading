# 通道交易策略
[English](README.md) | [Русский](README_ru.md)

这是一套逆势通道策略，当唐奇安通道的上下边界保持不变时在极值附近反向建仓。策略把最新的高点/低点与
上一根K线计算出的通道边界和枢轴价（pivot）进行比较，从而判断是否在通道内反手。仓位保护基于ATR设定
的初始止损，并配合可调的移动止损，在价格向有利方向发展时锁定利润。

## 详情

- **入场条件**：
  - 做空：上轨未变化，并且上一根K线的最高价触及上轨，或前一收盘价位于枢轴与上轨之间。
  - 做多：下轨未变化，并且上一根K线的最低价触及下轨，或前一收盘价位于枢轴与下轨之间。
- **方向**：多、空双向。
- **出场条件**：
  - 做多：若上轨保持不变且价格触及上轨，或触发ATR止损/移动止损则平仓。
  - 做空：若下轨保持不变且价格触及下轨，或触发ATR止损/移动止损则平仓。
- **止损设置**：
  - 多单初始止损放在 `support - ATR`，空单初始止损放在 `resistance + ATR`。
  - 当盈利超过 `TrailingStopPips`（按照最小价格步长转换）时，移动止损开始跟随最佳价格。
- **默认参数**：
  - `ChannelPeriod` = 20（唐奇安通道长度）
  - `AtrPeriod` = 4（ATR 平滑周期）
  - `Volume` = 1 手/合约
  - `TrailingStopPips` = 30 个最小价格步长
  - `CandleType` = 1 小时时间框架
- **筛选标签**：
  - 类型：通道 / 均值回归
  - 方向：双向
  - 指标：唐奇安通道、ATR
  - 止损：ATR 固定止损 + 移动止损
  - 复杂度：中等
  - 时间框架：日内
  - 季节性：无
  - 神经网络：无
  - 背离：无
  - 风险等级：中等

## 备注

- 枢轴价计算公式为 `(上轨 + 下轨 + 前一收盘价) / 3`，与原始 MQL 程序保持一致。
- 策略同一时间只持有一个净头寸，只有完全平仓之后才会反向。
- `TrailingStopPips` 以“点”为单位，会乘以交易品种的 `PriceStep` 得到真实的价格偏移量。

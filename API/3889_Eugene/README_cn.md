# Eugene 策略

## 摘要

Eugene 策略将 MetaTrader 4 专家顾问 “Eugene” 移植到 StockSharp 的高级 API。算法默认处理 1 小时K线，寻找由前一根内部K线向外突破并回撤至前一根K线三分之一位置所确认的行情。当突破得到确认后，策略按突破方向建仓，出现相反信号时会进行反向。

## 交易逻辑

1. **内部K线识别**：上一根K线必须完全包含在更早一根K线的范围内。其收盘方向决定该内部K线被标记为黑色（看跌）或白色（看涨）。
2. **“鸟”过滤器**：若内部K线之后还有同色K线，则被认定为“鸟”形态。黑鸟会禁止做多，白鸟会禁止做空，对应原始 MQL 策略中的保护条件。
3. **确认价位**：根据上一根K线的实体或影线计算两个三分之一位置的确认价：
   - 多头确认价 = 前收盘价减去（实体或下影线）三分之一；
   - 空头确认价 = 前收盘价加上（实体或上影线）三分之一。
4. **时段过滤**：若当前K线在 08:00 或之后开盘，即使没有回撤也视为确认成立。
5. **突破条件**：
   - 做多需要当前K线创出新高，同时保持更高的最低价，并与两根之前的K线区间重叠；
   - 做空使用对称条件，即创出新低、保持更低的最高价并与更早的区间重叠。
6. **仓位管理**：在建立新仓位前会先平掉相反方向的持仓。每根K线最多允许一次做多与一次做空，保持与 `Counter_buy` 和 `Counter_sell` 的原始限制一致。

## 参数

| 名称 | 说明 | 默认值 |
| --- | --- | --- |
| `Trade Volume` | 市价单下单手数。 | `0.1` |
| `Candle Type` | 参与分析的K线周期。 | `1 小时` |

## 图表

若可使用图表区域，策略会绘制价格K线以及自身的成交，用于直观查看突破行为。

## 说明

- 移植版本保留了原始策略的 08:00 会话过滤条件。若交易不同市场，请调整合适的周期。
- 原始 MQL 文件未实现止损或止盈逻辑，因此风险管理需由外部环境完成。

# Стратегия Eugene

## Краткое описание

Стратегия Eugene переносит оригинального советника MetaTrader 4 «Eugene» на высокоуровневый API StockSharp. Алгоритм по умолчанию анализирует часовые свечи и ищет пробои внутренних баров, подтверждённые откатом к одной трети предыдущей свечи. После подтверждения пробоя стратегия входит по направлению пробоя и при появлении обратного сигнала переворачивает позицию.

## Логика торговли

1. **Поиск внутренней свечи** – предыдущая свеча должна полностью находиться внутри диапазона свечи двумя барами ранее. Направление её закрытия определяет, является ли свеча «чёрной» (медвежьей) или «белой» (бычьей).
2. **Фильтры «птиц»** – если за внутренней свечой следует свеча того же цвета, такая комбинация отмечается как «птица». Чёрные птицы блокируют покупки, белые – продажи. Это повторяет защитный фильтр оригинального советника.
3. **Уровни подтверждения** – рассчитываются две цены подтверждения на уровне одной трети тела или тени предыдущей свечи:
   - Длинный уровень располагается на одной трети ниже предыдущего закрытия (используется тело бычьей свечи или тень медвежьей).
   - Короткий уровень располагается на одной трети выше предыдущего закрытия (тело медвежьей свечи или тень бычьей).
4. **Сессионный фильтр** – если текущая свеча открылась в 08:00 или позже, подтверждение считается выполненным даже без отката.
5. **Условие пробоя** – сигнал на покупку требует обновления максимумов текущей свечой при условии более высокого минимума и перекрытия диапазона свечи два бара назад. Для продажи используются зеркальные условия с обновлением минимумов и понижением максимумов.
6. **Управление позицией** – перед открытием новой сделки стратегия закрывает противоположную позицию. На каждой свече допускается не более одной покупки и одной продажи, что повторяет ограничения `Counter_buy` и `Counter_sell` из исходного кода.

## Параметры

| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| `Trade Volume` | Объём рыночных заявок. | `0.1` |
| `Candle Type` | Таймфрейм анализируемых свечей. | `1 час` |

## Отображение на графике

При наличии окна графика стратегия отображает анализируемые свечи и выполненные сделки, что помогает оценить характер пробоев.

## Примечания

- В реализации для StockSharp сохранён часовой фильтр торговой сессии оригинального советника. При работе на других рынках или таймзонах подберите подходящий таймфрейм.
- В исходном MQL-файле отсутствует управление стоп-лоссом и тейк-профитом, поэтому портированная версия оставляет управление рисками на усмотрение пользователя.

# EA MA Email Alert Strategy
[English](README.md) | [中文](README_cn.md)

## Обзор
- Полностью воспроизводит эксперта MetaTrader 4 «EA_MA_Email», отслеживая набор экспоненциальных скользящих средних (EMA), рассчитанных по ценам открытия свечей.
- Формирует записи в журнале, имитирующие исходные email-уведомления, когда выбранные пары EMA пересекаются вверх или вниз.
- Работает как вспомогательный модуль без торговли: стратегия не выставляет заявок и может использоваться только для отслеживания пересечений.

## Настройка индикаторов
- **EMA 20, EMA 50, EMA 100, EMA 200**
  - Все индикаторы получают на вход цену открытия свечи, что соответствует реализации MQL.
  - Параметр `CandleType` определяет таймфрейм свечей и, соответственно, момент обновления EMA.

## Логика сигналов
1. Стратегия подписывается на выбранный тип свечей и подает цены открытия в четыре EMA.
2. После формирования всех EMA сохраняются предыдущие и текущие значения для каждой активированной пары.
3. Бычий сигнал возникает, когда быстрая EMA была ниже медленной на прошлом баре и закрывается выше нее на текущем баре.
4. Медвежий сигнал возникает, когда быстрая EMA была выше медленной ранее и закрывается ниже на текущем баре.
5. Для каждого события создается сообщение с темой и телом, как в MT4, включая инструмент, направление пересечения, название периода, время закрытия и цену.

## Параметры
| Параметр | Тип | Значение по умолчанию | Описание |
|----------|-----|-----------------------|----------|
| `SendEmailAlert` | `bool` | `true` | Включить запись имитации email-уведомлений в лог стратегии. |
| `Monitor20Over50` | `bool` | `false` | Отслеживать пересечения EMA 20 и EMA 50. |
| `Monitor20Over100` | `bool` | `false` | Отслеживать пересечения EMA 20 и EMA 100. |
| `Monitor20Over200` | `bool` | `false` | Отслеживать пересечения EMA 20 и EMA 200. |
| `Monitor50Over100` | `bool` | `false` | Отслеживать пересечения EMA 50 и EMA 100. |
| `Monitor50Over200` | `bool` | `true` | Отслеживать пересечения EMA 50 и EMA 200. |
| `Monitor100Over200` | `bool` | `false` | Отслеживать пересечения EMA 100 и EMA 200. |
| `CandleType` | `DataType` | `TimeSpan.FromHours(1).TimeFrame()` | Тип свечей, определяющий расчет EMA и время формирования сигналов. |

## Формат оповещений
- Пример темы: `EURUSD 50>200 PERIOD_H1`
- Пример тела: `Date and Time: 2024-05-08 13:00:00; Instrument: EURUSD; Close: 1.07543`
- Каждое событие записывается через `AddInfoLog`, что позволяет направлять уведомления в любой внешний сервис.

## Примечания по использованию
- Уведомления формируются только на закрытии свечи, поэтому внутрисессионные колебания не учитываются до завершения бара.
- Справочник периодов переводит стандартные таймфреймы MetaTrader (M1, M5, M15, M30, H1, H4, D1, W1, MN1) в те же текстовые обозначения, что и оригинальный эксперт.
- Отключите `SendEmailAlert`, чтобы остановить логирование и сохранить расчеты EMA, например при использовании совместно с другими стратегиями.
- Стратегия безопасна для работы на реальных счетах, поскольку никогда не выставляет заявки.

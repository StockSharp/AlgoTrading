# Up3x1 Investor 策略
[English](README.md) | [Русский](README_ru.md)

该策略是对 MetaTrader 顾问 Up3x1 Investor 的移植。它监控所选周期内最新收盘的 K 线，当上一根 K 线的高低区间和实体长度足够大时，会在下一根 K 线的开始方向开仓。

默认设置适合在 1 小时级别的主要外汇品种运行，但各项阈值可以针对其它市场进行调整。策略同一时间只持有一笔仓位，订单数量由策略的 `Volume` 属性决定。

## 交易逻辑

- **信号来源**：参数 `CandleType` 对应的周期（默认 1 小时）。
- **入场条件**：
  - 计算上一根 K 线的高低价差以及开盘价与收盘价的绝对差值。
  - 如果上一根 K 线收阳且两项数值均超过阈值，则建立多头仓位。
  - 如果上一根 K 线收阴且两项数值均超过阈值，则建立空头仓位。
  - 持仓期间不再开新仓。
- **仓位管理**：
  - 止损和止盈以点数配置，通过 `Security.PriceStep` 转换为实际价格。设置为 0 表示关闭该功能。
  - 当价格相对入场价上涨（下跌）超过 `TrailingStopPips + TrailingStepPips` 时启动跟踪止损。
  - 跟踪止损只有在新的止损价相对原止损至少接近 `TrailingStepPips` 点时才会移动。
  - 当价格触及止损、止盈或跟踪止损价格时平仓。

## 参数说明

| 参数 | 说明 |
|------|------|
| `CandleType` | 信号使用的 K 线类型（默认 1 小时）。 |
| `RangeThresholdPips` | 上一根 K 线的最低要求高低价差（点数）。 |
| `BodyThresholdPips` | 上一根 K 线的最低要求实体长度（点数）。 |
| `StopLossPips` | 止损点数，0 表示不使用。 |
| `TakeProfitPips` | 止盈点数，0 表示不使用。 |
| `TrailingStopPips` | 跟踪止损与当前价格之间的距离，0 表示关闭跟踪。 |
| `TrailingStepPips` | 每次调整跟踪止损所需的额外点数。 |

> **提示：** 所有点数参数都会乘以 `Security.PriceStep`。请确认标的资产的价格步长设置正确，以获得精确的换算。

## 使用建议

1. 启动前请指定交易的 `Security` 以及连接的交易通道。
2. 根据标的资产的波动性调整各项点数阈值。对于 5 位小数的外汇报价，10 点通常等于 0.0010。
3. 通过调整策略 `Volume` 控制下单手数。本移植版本简化了原 EA 的风控逻辑，以保持透明度。
4. 信号基于已收盘的 K 线生成，订单会在确认扩张形态后立即发送。

# Стратегия RSI Eraser
[English](README.md) | [中文](README_cn.md)

RSI Eraser — это прямой перенос советника MetaTrader 5, созданного Владимиром Карпутовым.
Стратегия анализирует часовые свечи, рассчитывает индекс относительной силы (RSI) и отслеживает разворотные моменты около нейтрального уровня 50.
Входы фильтруются диапазоном предыдущего дня, а размер позиции рассчитывается как фиксированный процент от капитала счёта.

## Основная идея

- **Основной таймфрейм** — часовые свечи используются для сигналов и работы индикатора.
- **Фильтр** — завершённые дневные свечи предоставляют максимум и минимум вчерашнего дня.
- **Индикатор** — классический RSI с настраиваемым периодом усреднения.
- **Направление** — покупки при RSI выше нейтрального уровня, продажи при RSI ниже.
- **Риск** — объём позиции определяется исходя из расстояния до стоп-лосса и выбранного процента риска.

## Правила входа

1. Дождаться закрытия часовой свечи и вычислить значение RSI.
2. Убедиться, что доступна хотя бы одна завершённая дневная свеча.
3. **Покупка**
   - RSI строго выше нейтрального порога (по умолчанию 50).
   - Предлагаемый стоп (цена входа − расстояние стоп-лосса) не должен оказаться ниже минимума вчерашнего дня с учётом буфера.
   - Сделка отклоняется, если в текущий календарный день уже была открыта длинная позиция.
4. **Продажа**
   - RSI строго ниже нейтрального порога.
   - Предлагаемый стоп (цена входа + расстояние стоп-лосса) не должен оказаться выше максимума вчерашнего дня с буфером.
   - Сделка отклоняется, если в текущий день уже была открыта короткая позиция.
5. При выполнении условий отправляется рыночный ордер с объёмом, рассчитанным по риску.
   Если открыта противоположная позиция, новый ордер закрывает её и разворачивается в одну операцию.

## Правила выхода

- Начальные стоп-лосс и тейк-профит рассчитываются по заданному расстоянию в пунктах и множителю прибыли.
- Мониторинг выполняется на закрытых свечах:
  - Длинная позиция закрывается при достижении стопа или тейк-профита.
  - Короткая позиция закрывается при достижении стопа или тейк-профита.
- Защита безубытка: когда цена проходит в прибыль не менее исходного стопа,
  стоп переносится в точку входа (для шортов — вниз).
- При отсутствии позиции все уровни риска очищаются, чтобы избежать устаревших значений.

## Управление риском

- Параметр `RiskPercent` задаёт долю капитала, которую разрешено рискнуть в сделке.
- Объём позиции равен `risk_amount / stop_distance`; при отсутствии данных по капиталу используется базовое значение `Volume`.
- Дневной буфер добавляет защитный запас вокруг вчерашнего диапазона, предотвращая входы со слишком тесными стопами.

## Значения по умолчанию

- `RsiPeriod` = 14
- `RsiNeutralLevel` = 50
- `StopLossPips` = 50
- `TakeProfitMultiplier` = 3
- `DailyBufferPips` = 10
- `RiskPercent` = 5%
- `CandleType` = 1 час
- `DailyCandleType` = 1 день

## Особенности реализации

- Используются подписки на часовые и дневные свечи через высокоуровневый API StockSharp.
- Комментарии и сообщения в журнал пишутся на английском языке согласно правилам репозитория.
- Логика безубытка и ограничение «не более одной сделки в день для каждого направления» повторяют оригинальный алгоритм MetaTrader.

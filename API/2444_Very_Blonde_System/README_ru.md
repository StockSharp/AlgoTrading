# Стратегия Very Blonde System

Сеточная контртрендовая стратегия, основанная на оригинальной системе "Very Blonde System" для MetaTrader. Стратегия ищет большое отклонение текущей цены от недавних экстремумов и открывает сделку в противоположном направлении.

## Логика стратегии
1. Вычисляется максимальный максимум и минимальный минимум за последние *Count Bars* свечей.
2. При отсутствии открытых позиций:
   - Если расстояние от текущей цены до недавнего максимума превышает *Limit* тиков, выполняется покупка по рынку.
   - Если расстояние от текущей цены до недавнего минимума превышает *Limit* тиков, выполняется продажа по рынку.
   - После входа размещаются четыре отложенных ордера каждые *Grid* тиков, при этом объём на каждом уровне удваивается.
3. При наличии позиции:
   - Если суммарная прибыль превышает *Amount* денежных единиц, позиция закрывается, а все ордера снимаются.
   - Если параметр *Lock Down* больше нуля, после движения цены в прибыль на указанное количество тиков активируется защита безубытка. При возврате цены к уровню входа позиции закрываются.

## Параметры
| Имя | Описание |
|------|---------|
| `CountBars` | Количество свечей для поиска максимумов и минимумов. |
| `Limit` | Минимальная дистанция от экстремума в тиках для открытия сделки. |
| `Grid` | Расстояние в тиках между дополнительными ордерами сетки. |
| `Amount` | Целевая прибыль в деньгах для закрытия всех позиций. |
| `LockDown` | Дистанция в тиках для включения защиты безубытка. |
| `CandleType` | Тип свечей для расчётов. |

Стратегия использует рыночные ордера для входа и лимитные ордера для построения сетки. Все комментарии в коде написаны на английском языке.

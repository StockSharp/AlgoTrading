# 手动交易轻量面板策略

## 概述
**手动交易轻量工具策略** 复刻了 MT4 "Manual Trading Lightweight Utility" 面板，在 StockSharp 高层策略 API 中提供同样的交互功能。策略把原本的按钮、文本框等控件转换成参数，操作者可以在界面上切换市价、挂单限价或挂单止损，调整自动价格计算方式，配置手数与风险控制，而无需自定义图表对象。

该策略适用于主观交易。操作者通过修改 `Send Buy Order` 或 `Send Sell Order` 参数来触发订单。策略会立即响应命令，同时持续根据最新买卖价更新建议触发价与止损/止盈。

## 主要特性
- **手动下单**：买卖两侧均支持市价、限价和止损委托。
- **自动报价**：实时追踪买卖价，生成与 MT4 面板相同的挂单价格建议。
- **手动价格模式**：当需要输入自定义触发价时也能自动校正至交易所最小价格步长。
- **手数管理**：可配置全局手数，或在开启 `Lot Control` 后分别设置买卖手数。
- **止损/止盈管理**：在策略层模拟 MT4 订单附带的保护参数，自动监控市场价格并平仓。
- **参数同步反馈**：所有关键计算结果都会实时写回到参数中，方便在界面上查看。

## 转换说明
- MT4 中的图表对象全部替换为策略参数，并按功能分组，方便在 Hydra/Terminal 中使用。
- StockSharp 不会直接把保护单附加到挂单上，因此策略通过行情监控自行触发止损/止盈。
- 所有以点数表示的偏移量都会结合品种的 `PriceStep` 与 `VolumeStep` 信息，确保符合交易所约束。

## 使用步骤
1. 在 Hydra 或 Terminal 中把策略绑定到目标证券和投资组合。
2. 设置默认手数、价格偏移以及风险参数。
3. 如需区分买卖手数，可开启 `Lot Control` 并分别调整 `Sell Volume` 与 `Buy Volume`。
4. 选择订单类型以及价格模式（自动跟随或手动输入）。
5. 把 `Send Buy Order` 或 `Send Sell Order` 置为 `true` 以发送订单；策略处理完成后会自动复位为 `false`。
6. 当仓位打开时，策略会根据成交价计算止损/止盈并在到价后平仓。

## 文件列表
- `CS/ManualTradingLightweightUtilityPanelStrategy.cs` – 策略源码。
- `README.md` – 英文说明。
- `README_cn.md` – 中文说明（本文件）。
- `README_ru.md` – 俄文说明。


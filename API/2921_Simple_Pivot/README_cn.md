# Simple Pivot 策略
[English](README.md) | [Русский](README_ru.md)

该策略复刻自 MetaTrader 5 专家顾问 “SimplePivot”。它持续比较当前 K 线的开盘价与上一根 K 线的枢轴价，总是保持单向持仓。
当方向改变时，策略会先平掉当前仓位，然后立刻在反向建立新的头寸。

## 概述

- **交易风格**：始终在场的波段逻辑。
- **适用市场**：任何能够提供所选周期 K 线数据的品种。
- **周期**：通过 *Candle Type* 参数设置（默认 1 小时 K 线）。
- **下单方式**：使用 *Volume* 参数指定数量的市价单。

## 工作原理

### 枢轴计算

1. 首先等待至少一根完成的 K 线作为初始化。
2. 枢轴价定义为上一根 K 线最高价与最低价的算术平均值。
3. 保存上一根 K 线的最高价与最低价，以便在下一根 K 线收盘时立即得到新的枢轴。

### 方向判定

1. 默认方向为做多。
2. 如果当前 K 线开盘价低于上一根的最高价、同时高于枢轴价，则切换为做空方向。
3. 当目标方向与上一笔成交方向一致时，维持原有仓位，不再重复开仓。

### 仓位管理

1. 当目标方向与当前持仓不同，先通过反向市价单将仓位平掉。
2. 平仓后立即按照 *Volume* 参数的数量，以市价单建立新的头寸。
3. 每根收盘 K 线重复上述流程，策略始终保持多头或空头状态。

## 参数

- **Volume**：每次开仓使用的数量；在换向时也用同样的数量平仓。
- **Candle Type**：用于计算枢轴和入场信号的 K 线类型。默认是 1 小时周期，可根据需要调整。

## 额外说明

- 策略只在 K 线完全收盘 (`CandleStates.Finished`) 后才评估信号，避免在形成阶段重复触发。
- 不设置止损和止盈；只有当枢轴规则要求改变方向时才退出。
- 由于策略始终持仓，若需要控制风险（如最大回撤或交易时段过滤），应在外部另行加入。

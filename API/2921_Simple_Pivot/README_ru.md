# Стратегия Simple Pivot
[English](README.md) | [中文](README_cn.md)

Эта стратегия повторяет эксперта MetaTrader 5 «SimplePivot». Она постоянно сравнивает цену открытия текущей свечи с пивотом
предыдущей свечи и всегда держит позицию в одном направлении. Когда направление меняется, стратегия закрывает текущую позицию и
немедленно открывает новую в противоположную сторону.

## Обзор

- **Режим торговли**: Постоянное присутствие в рынке.
- **Инструменты**: Любые инструменты, для которых доступны свечи выбранного таймфрейма.
- **Таймфреймы**: Настраиваются параметром *Candle Type* (по умолчанию свечи 1 часа).
- **Заявки**: Рыночные заявки объёмом, заданным параметром *Volume*.

## Как работает

### Расчёт пивота

1. Ожидание первой завершённой свечи для инициализации расчёта.
2. Пивот предыдущей свечи равен среднему арифметическому между её максимумом и минимумом.
3. Максимум и минимум предыдущей свечи сохраняются, чтобы пивот для следующей итерации был готов сразу после закрытия новой
   свечи.

### Определение направления

1. Базовое направление — покупка (лонг).
2. Если текущая свеча открывается ниже максимума предыдущей свечи, но выше рассчитанного пивота, направление меняется на продажу
   (шорт).
3. Если требуемое направление совпадает с последней открытой сделкой, позиция сохраняется без дополнительных действий.

### Управление позицией

1. При смене направления текущая позиция закрывается встречной рыночной заявкой.
2. После выхода на «нулевую» позицию рыночная заявка объёмом *Volume* открывает новую сделку в нужном направлении.
3. На каждой завершённой свече процесс повторяется, поэтому стратегия всегда находится либо в лонге, либо в шорте.

## Параметры

- **Volume**: Объём входа для каждой сделки. Тем же объёмом закрывается позиция при смене направления.
- **Candle Type**: Тип свечных данных, используемых для расчёта пивота и сигналов. По умолчанию — часовой таймфрейм, но можно
  выбрать любой доступный.

## Дополнительные замечания

- Логика реагирует только на полностью сформированные свечи (`CandleStates.Finished`), чтобы избежать повторных сигналов во время
  формирования свечи.
- Стопы и тейк-профиты не используются; выход происходит исключительно при смене торгового направления.
- Поскольку стратегия всегда в рынке, при необходимости дополнительные фильтры риска (лимит просадки, торговые сессии и т.д.)
  следует реализовывать отдельно.

# Zs1 Forex Instruments 策略

该策略复现了 MetaTrader 专家顾问 **Zs1_www_forex-instruments_info** 的对冲网格逻辑。算法会同时开出买入和卖出头寸，跟踪价格相对起始点的移动，并根据五个离散区域执行原始 EA 的分支逻辑。保留下来的锚定方向会按马丁格尔系数加仓，而整个仓位在达到盈亏平衡时会整体平仓。

## 核心行为

- 按配置的基础手数同时市价买入和卖出，建立初始对冲。
- 只要其中一条腿获得盈利就立即平仓，保留另一条作为锚定方向。
- 使用 `Orders Space (pips)` 参数计算价格区间。当价格跨越新区间时，执行与原版 EA 相同的处理：
  - 区域 −2：若浮动盈利为正则立即平仓，否则沿趋势反向加仓。
  - 区域 −1：按锚定方向的相反方向加仓。
  - 区域 0：沿锚定方向加仓。
  - 区域 +1：若浮动盈利为正则平仓，否则开出与上一单相反的方向。
- 当持仓数量不少于三笔时，只要浮动盈亏不为负就会立即平仓。
- 所有仓位平掉后，会自动开始下一轮循环。

## 参数

| 名称 | 说明 |
| --- | --- |
| `Orders Space (pips)` | 相邻网格层之间的点差距离。 |
| `Zone Offset (pips)` | 确认区间突破时需要额外突破的缓冲。 |
| `Initial Volume` | 初始对冲及后续马丁加仓所使用的基础手数。 |

## 说明

- 马丁格尔系数遵循原策略的隧道序列（1, 3, 6, 12, ...）。
- 在发送订单前会根据标的物的最小/最大手数以及步进限制对下单数量做校验。
- 所有决策基于 Level1 的买一/卖一报价更新，从而贴近 MQL 版本的逐笔逻辑。

# Стратегия MaDelta
[English](README.md) | [中文](README_cn.md)

Стратегия MaDelta анализирует разницу между быстрой и медленной скользящими средними. Разница масштабируется коэффициентом и возводится в третью степень, образуя осциллятор `px`. Два динамических порога, разделённых значением `Delta` (в пунктах), отслеживают последние максимум и минимум `px`. Когда `px` пробивает верхний порог, стратегия переходит в бычий режим; когда `px` опускается ниже нижнего порога, стратегия становится медвежьей. Текущие позиции, противоречащие новому сигналу, закрываются, после чего открывается сделка в нужном направлении.

Подход позволяет захватывать импульсные движения, когда расстояние между двумя средними быстро расширяется. Возведение в куб усиливает сильные движения и отсекает мелкие колебания. Параметр `Delta` определяет, насколько далеко должен пройти `px`, прежде чем будет зафиксирован разворот, что помогает избежать ложных сигналов на спокойном рынке.

## Детали

- **Условия входа**:
  - **Лонг**: `px > hi` устанавливает `trade = 1` и открывает длинную позицию при отсутствии позиций.
  - **Шорт**: `px < lo` устанавливает `trade = -1` и открывает короткую позицию при отсутствии позиций.
- **Логика разворота**:
  - Появление сигнала на покупку при открытом шорте приводит к закрытию шорта маркет-ордерами и открытию лонга.
  - Сигнал на продажу при открытом лонге закрывает позицию маркет-ордерами и открывает шорт.
- **Индикаторы**:
  - Быстрая скользящая средняя (SMA) с периодом `FastMaPeriod`.
  - Медленная скользящая средняя (EMA) с периодом `SlowMaPeriod`.
  - Осциллятор: `px = ((Multiplier * 0.1) * (FastMA - SlowMA))^3`.
- **Параметры**:
  - `Delta` – ширина канала high/low в пунктах.
  - `Multiplier` – масштабирует разницу между средними перед возведением в куб.
  - `FastMaPeriod` – период быстрой SMA.
  - `SlowMaPeriod` – период медленной EMA.
  - `Volume` – объём заявки при входе.
  - `CandleType` – таймфрейм используемых свечей.
- **Прочее**:
  - Работа только по завершённым свечам.
  - Нет явных стопов; позиции разворачиваются по противоположному сигналу.
  - Используется высокоуровневый API с привязкой индикаторов и автоматической визуализацией.

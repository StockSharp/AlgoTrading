# Стратегия YTG ADX Level Cross
[English](README.md) | [中文](README_cn.md)

Эта стратегия переносит эксперт Yuriy Tokman `_ADX.mq5` на высокоуровневый API StockSharp. Она отслеживает индикатор Average Directional Index и реагирует, когда линии +DI или -DI прорывают заданные уровни. Ордера открываются только по одному, что полностью повторяет исходный MQL-алгоритм, а защитные стоп-лосс и тейк-профит в пунктах выставляются автоматически.

## Краткое описание

- **Режим рынка**: рассчитана на трендовые участки или импульсные пробои, когда всплеск DI подтверждает силу движения.
- **Направление**: может открывать как длинные, так и короткие позиции, но никогда не удерживает обе одновременно.
- **Таймфрейм**: задаётся параметром `CandleType` (по умолчанию часовые свечи).
- **Данные**: расчёт ADX/DI выполняется по завершённым свечам индикатора `AverageDirectionalIndex`.

## Логика торговли

1. Подписаться на выбранную серию свечей и создать индикатор ADX с периодом `AdxPeriod`.
2. Для каждой завершённой свечи сохранять значения +DI и -DI, оставляя в буфере ровно тот объём истории, который требуется параметру `Shift`. Значение 1, как в оригинале, анализирует предыдущую закрытую свечу.
3. **Вход в лонг**: когда смещённое значение +DI превышает `LevelPlus`, а предыдущее значение было ниже порога, при отсутствии открытой позиции отправляется рыночная покупка.
4. **Вход в шорт**: когда смещённое значение -DI превышает `LevelMinus`, а предыдущее значение было ниже уровня, при нулевой позиции выполняется рыночная продажа.
5. Выход осуществляется только за счёт защитных заявок, выставленных через `StartProtection`: фиксированный тейк-профит и стоп-лосс в пунктах, аналогичные параметрам `TP` и `SL` оригинального советника.

Дополнительно стратегия не усредняется, не переоткрывает сделки во время активной позиции и не применяет фильтры — поведение полностью соответствует лёгкой логике исходной версии.

## Параметры

| Параметр | Значение по умолчанию | Описание |
|----------|-----------------------|----------|
| `CandleType` | Часовой таймфрейм | Таймфрейм подписки, по которому рассчитывается ADX. |
| `AdxPeriod` | 28 | Длина индикатора ADX и линий Directional Movement. |
| `LevelPlus` | 5 | Порог, который должна пробить линия +DI для открытия длинной позиции. |
| `LevelMinus` | 5 | Порог, который должна пробить линия -DI для открытия короткой позиции. |
| `Shift` | 1 | Количество закрытых свечей, на которых проверяется пробой (1 = предыдущая свеча). |
| `TakeProfitPoints` | 500 | Размер тейк-профита в пунктах. Внутри умножается на шаг цены инструмента. |
| `StopLossPoints` | 500 | Размер стоп-лосса в пунктах. |
| `TradeVolume` | 0.1 | Базовый объём рыночных ордеров, соответствует параметру `Lots` в MQL-версии. |

## Управление рисками

- Метод `StartProtection` пересчитывает значения стопа и тейка из пунктов в абсолютные цены, используя `PriceStep` инструмента.
- Дополнительные механизмы (трейлинг, перенос в безубыток) не используются — выход всегда происходит по заранее заданным уровням.

## Рекомендации

- Слишком маленькие пороги DI приводят к частым «пилящим» сделкам, большие значения позволяют ждать по-настоящему сильных импульсов.
- Параметр `Shift` можно увеличить, если требуется подтверждение на более ранних свечах, например при торговле на старших таймфреймах.
- Так как стратегия работает только с одной позицией, не рекомендуется вмешиваться вручную или запускать параллельные алгоритмы на том же счёте, чтобы не нарушить внутренний контроль позиции.

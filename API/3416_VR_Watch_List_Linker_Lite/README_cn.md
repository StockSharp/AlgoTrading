# VR Watch List Linker Lite

## 概述
VR Watch List Linker Lite 复刻了 MetaTrader 中将所有打开图表与当前符号及周期同步的工具。StockSharp 版本会维护一个可配置的标的列表，使其始终跟随策略所选的主图。所有链接的标的都会订阅同一份蜡烛序列、共享同一时间框架，并在出现偏移时自动重新订阅。该组件适合用于多个监控面板必须同时跟随同一标的的场景，无需逐一手动切换。

该策略不会执行交易。它仅负责行情数据的协调：启动并监视订阅，但不会发送任何订单。

## 同步逻辑
### 链接流程
* 策略启动时会构建需要维护的标的列表。主标的是可选项，但启用后将成为参考图表，其蜡烛时间被视为基准。
* 每个链接标的（包含主标的，当其启用时）都会订阅配置好的蜡烛 `DataType`。所有成功的链接都会写入日志，便于审计。
* 当蜡烛到来时会更新各标的最近的开盘时间。主图的开盘时间被视为其他标的需要跟随的时间戳。

### 偏移检测与恢复
* 当任一链接标的生成完结蜡烛时，其时间戳会与主图的开盘时间进行比较。
* 若时间戳不同，策略会根据 `Restart On Mismatch` 参数选择立即重新订阅，或仅记录一次不一致事件。
* 重新订阅会释放当前订阅，并用相同设置创建新的订阅，强制数据流重新与主图同步。

## 参数
| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| `Candle Type` | 主图与所有链接标的共用的蜡烛 `DataType`。仅支持基于 `TimeFrameCandleMessage` 的类型。 | M1 周期 |
| `Linked Securities` | 需要跟随主图的额外标的列表。留空时只管理主标的。 | 空 |
| `Include Primary` | 启用后，策略的主标的被视为参考图表。禁用后仅同步外部列表。 | `true` |
| `Restart On Mismatch` | 当链接标的的蜡烛时间与主图不一致时，是否自动重建订阅。 | `true` |

## 使用步骤
1. 为策略指定需要控制的主标的（当 **Include Primary** 为启用状态时，该标的会成为主图）。
2. 在 **Linked Securities** 中填入希望跟随主图的其他标的。重复或为空的项目会被忽略。
3. 选择共享的 **Candle Type** 时间框架。只要基于 `TimeFrameCandleMessage`，自定义周期也可使用。
4. 启动策略。日志会确认每个链接标的，并在之后提示重新订阅或偏移事件。

停止或重置策略会释放所有订阅，防止遗留的数据通道。重新启动策略会重新创建所有订阅。

## 其他说明
* 策略从不发送订单，适用于数据对齐、看板或分析型叠加场景。
* 手动调整时间框架或链接列表后，需要重启策略以重新建立订阅。
* 本策略没有 Python 版本，仅在 API 包中提供 C# 实现。

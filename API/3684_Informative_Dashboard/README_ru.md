# Стратегия Informative Dashboard

Informative Dashboard — это перенос эксперта MetaTrader 5 «Informative Dashboard EA» на высокоуровневый API StockSharp. Исходная программа создаёт панель на графике и непрерывно обновляет статистику счёта: имя аккаунта, прибыль/убыток за текущий день, величину просадки, число открытых позиций и заявок, а также спред. В версии StockSharp сохраняется тот же мониторинг, но данные выводятся в поле `Comment` стратегии. Торговых действий по-прежнему нет — это исключительно информационный дашборд.

## Особенности реализации

- **Только высокоуровневый API.** Используются `SubscribeLevel1()` для получения лучшего Bid/Ask и подписка на свечи с настраиваемым интервалом для периодических обновлений в моменты затишья. Никаких низкоуровневых обращений к коннектору или ручного перебора истории не требуется.
- **Полное соответствие расчётам MQL.**
  - Дневной результат рассчитывается как разница между текущим `PnL` и значением в начале торгового дня — аналог функции `DailyPL()`.
  - Просадка вычисляется по формуле `(equity − balance) / balance * 100%`, идентичной выражению `(AccountEquity - AccountBalance) / AccountBalance` в MetaTrader.
  - Поле «Pos & Orders» складывает текущую агрегированную позицию (`Position`) и количество заявок в состояниях `None`, `Pending`, `Active`.
  - Спред определяется как `Ask - Bid` по последним котировкам Level 1; отрицательные величины обнуляются, чтобы исключить визуальные артефакты.
- **Дашборд через комментарий.** Вся статистика записывается в `Comment`, что позволяет обойтись без панели, но передать ту же информацию, что и оригинальный эксперт.
- **Автоматический переход на новый день.** При смене даты (`CurrentTime.Date`) дневная база PnL сбрасывается, поэтому показатели всегда отражают текущую сессию.
- **Обновление по событиям.** Метод `UpdateDashboard()` вызывается при:
  - изменении котировок Level 1;
  - изменении состояния заявок;
  - изменении позиции;
  - изменении PnL;
  - закрытии таймерной свечи (если включена).
  Таким образом воспроизводится непрерывный цикл `OnTick()` из исходного кода.

## Параметры

| Имя | Значение по умолчанию | Описание |
| --- | --------------------- | -------- |
| `RefreshIntervalSeconds` | 30 | Интервал между принудительными обновлениями дашборда (в секундах). Значение > 0 запускает подписку на свечи соответствующего таймфрейма, чтобы обновления выполнялись даже без новых котировок. |

## Структура файлов

- `CS/InformativeDashboardStrategy.cs` — реализация дашборда на C# с использованием высокоуровневого API StockSharp.
- `README.md` — документация на английском языке.
- `README_cn.md` — документация на китайском языке.
- `README_ru.md` — документация на русском языке (этот файл).

## Рекомендации по использованию

1. Перед запуском стратегии назначьте `Security` и `Portfolio`. Если инструмент не задан, таймерная подписка не активируется, но при поступлении котировок комментарий всё равно обновится.
2. Подключайте коннектор с поддержкой потоков Level 1, чтобы значение спреда оставалось корректным.
3. Стратегия предназначена только для мониторинга и не вызывает методы `BuyMarket`, `SellMarket` и т. д., что полностью повторяет поведение MetaTrader-панели.

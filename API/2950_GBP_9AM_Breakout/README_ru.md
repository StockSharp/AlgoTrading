# Стратегия GBP 9 AM Breakout

## Общая информация

**GBP 9 AM Breakout Strategy** — это адаптация классического советника MetaTrader "GBP9AM" на платформу StockSharp. Алгоритм формирует рыночный «стреддл» вокруг открытия Лондонской сессии (09:00 по местному времени), выставляя отложенные ордера Buy Stop и Sell Stop на задаваемом расстоянии в пунктах от текущей цены. Стратегия стремится захватить импульсное движение после открытия торгов при строгом контроле риска с помощью стоп-лоссов и тейк-профитов.

## Логика работы

1. Стратегия отслеживает завершённые свечи выбранного таймфрейма (по умолчанию — 1 минута), чтобы синхронизироваться с биржевым временем.
2. В начале каждого торгового дня состояние сбрасывается — формируется только один набор отложенных ордеров в сутки.
3. Как только время свечи достигает заданных параметров `LookHour` и `LookMinute`, алгоритм:
   - Отменяет все активные отложенные заявки и закрывает открытые позиции, чтобы избежать конфликтов.
   - Вычисляет цены входа, стоп-лоссов и тейк-профитов с учётом шага цены инструмента и корректировкой под 3/5-значные котировки.
   - Размещает ордера Buy Stop и Sell Stop на указанной дистанции в пунктах от цены закрытия последней свечи.
4. При срабатывании одного из ордеров противоположный немедленно снимается. Далее стратегия отслеживает рынок и закрывает позицию по достижении стоп-лосса или тейк-профита внутри дня.
5. Опциональный параметр `UseCloseHour` позволяет автоматически закрывать позиции и удалять отложенные ордера в заданный час окончания сессии.

## Параметры

| Параметр | Описание |
|----------|----------|
| `Volume` | Объём заявки для обеих сторон стреддла.
| `LookHour` | Час (0–23), соответствующий 09:00 Лондона в часовом поясе поставщика котировок.
| `LookMinute` | Минуты внутри часа, когда следует выставлять отложенные ордера.
| `CloseHour` | Час, в который стратегия принудительно закрывает позиции и удаляет ордера.
| `UseCloseHour` | Включает или отключает автоматический выход по времени.
| `TakeProfitPips` | Дистанция до тейк-профита в пунктах от цены входа.
| `BuyDistancePips` | Дистанция в пунктах для ордера Buy Stop выше текущей цены.
| `SellDistancePips` | Дистанция в пунктах для ордера Sell Stop ниже текущей цены.
| `BuyStopLossPips` | Размер стоп-лосса в пунктах для длинных позиций.
| `SellStopLossPips` | Размер стоп-лосса в пунктах для коротких позиций.
| `CandleType` | Тип свечей, используемый для тайминга и сопровождения сделки (по умолчанию — минутные).

## Управление рисками

- Для каждой сделки одновременно задаются уровни стоп-лосса и тейк-профита, что обеспечивает симметричное соотношение риск/прибыль.
- Закрытие позиций к окончанию сессии позволяет не переносить сделки через ночь (если параметр не отключён).
- Поскольку ордера выставляются только один раз в день, стратегия не «переторговывает» во время флэта.

## Рекомендации по использованию

1. Настройте `LookHour` под локальную зону данных: например, при потоке котировок UTC+1 для Лондона используйте значение 10.
2. Подбирайте расстояния в пунктах с учётом текущей волатильности пары GBP/USD или другой выбранной GBP-пары.
3. Работайте с инструментами, у которых корректно задан шаг цены (`PriceStep`), чтобы пересчёт пунктов был точным.
4. Следите за маржинальными требованиями брокера — увеличение `Volume` требует соответствующего запаса средств, как и в оригинальной версии советника.

## Состав папки

- `CS/Gbp9AmBreakoutStrategy.cs` — реализация стратегии на C# с использованием высокоуровневого API StockSharp.
- `README.md` — документация на английском языке.
- `README_ru.md` — русская документация (текущий файл).
- `README_cn.md` — документация на китайском языке.

Python-версия намеренно не предоставляется в соответствии с требованиями проекта.

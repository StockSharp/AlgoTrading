# Стратегия Swap Status

## Обзор

Стратегия подписывается на поток Level1 по выбранному списку валютных пар и сообщает, является ли ночной своп (Swap Long и Swap Short) положительным, отрицательным или нулевым. Она объединяет функциональность трёх исходных советников MetaTrader (`Swap.mq4`, `SwapMajorPairs.mq4`, `SwapExoticPairs.mq4`), предоставляя те же наборы инструментов и выводя понятные подписи при изменении статуса.

## Основные отличия от MetaTrader

1. **Источник данных.** В StockSharp информация о свопах приходит через поля `Level1Fields.SwapBuy` и `Level1Fields.SwapSell`. Если брокер их не передаёт, стратегия просто ждёт появления данных и ничего не рассчитывает вручную.
2. **Вывод сообщений.** Вместо функции `Comment` используется `LogInfo`. Каждое сообщение содержит словесную оценку (Positive/Negative/Zero) и числовое значение свопа для сравнения с терминалом.
3. **Списки наблюдения.** В MetaTrader поставлялись три отдельных советника. В порте они объединены в один параметром `Preset` (основной инструмент, мажоры, миноры, экзотические пары) плюс возможность добавить произвольные тикеры через `Custom symbols`.
4. **Фильтр повторов.** Стратегия пишет в журнал только при смене статуса, чтобы избежать лишнего шума и одновременно отразить актуальные обновления.

## Параметры

| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| `Preset` | Предопределённая группа инструментов (основной инструмент, мажоры, миноры, экзотика). | `PrimarySymbol` |
| `Custom symbols` | Необязательный список дополнительных тикеров через запятую. | *(пусто)* |

## Как это работает

1. При запуске стратегия определяет список инструментов из выбранного пресета, дополнительной строки и основного `Strategy.Security` (в режиме `PrimarySymbol`).
2. Для каждого инструмента оформляется подписка на Level1, после чего стратегия ждёт появления полей `SwapBuy` и `SwapSell`.
3. Когда оба значения получены, вычисляется словесный статус Positive/Negative/Zero и выводится в журнал.
4. Последние статусы кэшируются, поэтому новые сообщения появляются только при изменении значения.

## Рекомендации по использованию

- Убедитесь, что подключение брокера или источника данных действительно передаёт свопы; иначе стратегия не будет ничего выводить.
- Пресеты используют тикеры в стиле MetaTrader (`EURUSD`, `USDJPY` и т.п.). Если ваш провайдер применяет суффиксы, скорректируйте коды в параметрах.
- Стратегия не выставляет заявки; она носит информационный характер и безопасна для подключения к демо или тестовой среде.

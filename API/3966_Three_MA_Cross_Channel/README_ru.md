# Стратегия «Three MA Cross Channel»

## Обзор
**Three MA Cross Channel** — конвертация советника MetaTrader `3MaCross_EA` на платформу StockSharp. Стратегия отслеживает три настраиваемые скользящие средние и открывает сделки, когда быстрые средние пересекают медленную. Для управления выходами используется опциональный канал Дончиана, что повторяет логику исходного скрипта с индикатором «Price Channel».

## Логика торговли
- **Покупка**: обе быстрые средние закрываются выше медленной и любая из них совершает восходящее пересечение медленной на текущей свече.
- **Продажа**: обе быстрые средние закрываются ниже медленной и любая из них пересекает медленную сверху вниз на текущей свече.
- **Выход из позиции**:
  - Появление сигнала противоположного направления.
  - При включённом канале Дончиана: закрытие лонга при пробое нижней границы и закрытие шорта при пробое верхней границы.
  - Необязательные фиксированные уровни тейк-профита и стоп-лосса, выраженные в абсолютных ценовых шагах.

Анализ выполняется только после закрытия свечи (аналог параметра `TradeAtCloseBar`). Стратегия удерживает одну позицию — перед открытием новой позиции противоположного направления текущая закрывается.

## Параметры
| Имя | Тип | Значение по умолчанию | Описание |
|-----|-----|----------------------|----------|
| `FastLength` | `int` | `2` | Период быстрой скользящей средней. |
| `MediumLength` | `int` | `4` | Период средней скользящей средней. |
| `SlowLength` | `int` | `30` | Период медленной скользящей средней. |
| `ChannelLength` | `int` | `15` | Окно канала Дончиана для выходов. |
| `FastType` | `MovingAverageTypeEnum` | `EMA` | Тип расчёта быстрой средней (SMA, EMA, SMMA, WMA). |
| `MediumType` | `MovingAverageTypeEnum` | `EMA` | Тип расчёта средней средней. |
| `SlowType` | `MovingAverageTypeEnum` | `EMA` | Тип расчёта медленной средней. |
| `TakeProfit` | `decimal` | `0` | Дистанция тейк-профита в абсолютных ценовых единицах; `0` отключает. |
| `StopLoss` | `decimal` | `0` | Дистанция стоп-лосса в абсолютных ценовых единицах; `0` отключает. |
| `UseChannelStop` | `bool` | `true` | Включение выходов по каналу Дончиана. |
| `CandleType` | `DataType` | `TimeSpan.FromMinutes(1).TimeFrame()` | Тип свечей для расчётов. |

## Примечания
- Все средние рассчитываются по цене закрытия и могут настраиваться отдельно, как и параметры `FasterMode`, `MediumMode`, `SlowerMode` в MetaTrader.
- Значения `TakeProfit` и `StopLoss` задаются в абсолютных единицах цены (например, `0.0010` ≈ 10 пунктов для пятизначной котировки) и проверяются на закрытии свечи.
- При активном `UseChannelStop` стратегия воспроизводит автоматический выход, основанный на индикаторе «Price Channel».
- На график выводятся три скользящие средние, канал Дончиана и сделки для визуального контроля.

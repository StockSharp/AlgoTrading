# Стратегия Auto RXD V1.67 (C#)

В каталоге представлен порт советника **Auto_RXD_V1.67** с платформы MetaTrader 4 на StockSharp. Оригинальный советник использует три перцептрона на основе линейных взвешенных средних и дополняет их набором классических индикаторов. Реализация на C# сохраняет адаптивную логику перцептронов, схему управления риском через ATR и основные фильтры, благодаря чему поведение стратегии остаётся близким к версии MQL, но выполняется через высокоуровневый API StockSharp.

## Основная идея

* Три перцептрона на базе LWMA формируют сигналы:
  * **Supervisor** – главный фильтр, контролирующий обе стороны при `Mode = AiFilter`.
  * **Long** – анализирует бычий импульс при `Mode = AiLong`.
  * **Short** – анализирует медвежий импульс при `Mode = AiShort`.
* Блок подтверждения может задействовать ADX, MACD (в том числе с требованием пересечения), гистограмму OsMA, параболический SAR, RSI, CCI, Awesome Oscillator и Accelerator Oscillator.
* Выходы задаются фиксированным расстоянием в пунктах или рассчитываются динамически как доля ATR.

## Режимы работы

| Режим | Описание |
|-------|----------|
| `Indicator` | Сделки открываются только после подтверждения индикаторами. |
| `Grid` | В порте выключен (оставлен ради совместимости). |
| `AiShort` | Используется только короткий перцептрон. |
| `AiLong` | Используется только длинный перцептрон. |
| `AiFilter` | Supervisor подтверждает сигналы длинного и короткого перцептронов. |

## Параметры

* **General** – тип свечей, объём позиции, торговое окно по времени, флаг разрешения новых сделок.
* **Risk** – использование ATR, период ATR, фиксированные TP/SL для лонгов и шортов.
* **Perceptrons** – периоды LWMA, сдвиги, четыре веса и порог активации для каждого перцептрона.
* **Filters** – настройки ADX, MACD, OsMA, SAR, RSI, CCI, AO, AC.

## Алгоритм

1. Подписаться на свечи выбранного таймфрейма.
2. Привязать LWMA-перцептроны, ATR, MACD, ADX, SAR, RSI, CCI, AO и AC.
3. После формирования всех индикаторов вычислить значения перцептронов и проверить фильтры в соответствии с выбранным режимом.
4. При появлении сигнала закрыть противоположную позицию, открыть рыночную сделку нужного объёма и задать защитные уровни `SetStopLoss`/`SetTakeProfit`.
5. Если включён менеджер закрытия, позиции закрываются при смене направления SAR.

## Использование

1. Откройте решение в StockSharp Designer.
2. Добавьте **AutoRxdV167Strategy** в схему и подключите её к нужному инструменту и таймфрейму.
3. Настройте веса перцептронов, фильтры и параметры риска.
4. Запустите тестирование или торговлю. На графике отображаются LWMA, MACD, ADX и совершённые сделки.

## Состав

* `CS/AutoRxdV167Strategy.cs` – код стратегии.
* `README.md` – описание на английском.
* `README_cn.md` – описание на китайском.
* `README_ru.md` – описание на русском.

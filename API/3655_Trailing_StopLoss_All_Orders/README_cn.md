# Trailing StopLoss All Orders 策略

该策略将 MetaTrader 脚本“Trailing_StopLoss_for All_orders_and_symbols”的思路移植到 StockSharp 中。策略本身不会开仓，只负责跟踪指定证券的已有净头寸，在浮动盈利达到设定值后逐步推进虚拟跟踪止损。

## 工作流程

1. 订阅目标品种的逐笔成交数据，等待出现多头或空头仓位。
2. 当价格沿盈利方向运行至少 `Trail Start (pips)` 时，启动跟踪逻辑。
3. 记录激活后出现的最佳价格，将保护价维持在距离该价格 `Trail Distance (pips)` 的位置，同时不会越过建仓价，确保至少可以保本退出。
4. 当成交价突破跟踪水平时，策略会以市价单立即平掉剩余仓位。

该实现继承了原脚本“管理所有订单”的理念，但在 StockSharp 中作用于策略的汇总仓位。

## 参数

| 名称 | 说明 | 默认值 |
| ---- | ---- | ------ |
| `Trail Start (pips)` | 启动跟踪前所需的盈利点数，设置为 `0` 可立即启用。 | `20` |
| `Trail Distance (pips)` | 跟踪止损与最佳价格之间保持的点数距离，必须为正数。 | `10` |

两个参数都会按照合约的 `PriceStep` 转换为价格增量，从而保持与原 MQL 脚本一致的点值设置。

## 提示

- 策略只管理已有仓位的风险，不主动下单。
- 跟踪止损为虚拟执行，触发时直接发送市价单，而不是挂出实际的止损单。
- 需要实时成交数据；在回测中请使用包含逐笔信息或足够精细的行情数据。

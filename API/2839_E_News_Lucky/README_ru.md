# Стратегия E-News Lucky

## Обзор
**E-News Lucky** — порт советника MetaTrader `e-News-Lucky` на платформу StockSharp. Стратегия автоматизирует классический новостной пробой:

- В заданное время `PlacementTime` выставляются отложенные ордера Buy Stop и Sell Stop симметрично относительно текущей цены на расстоянии `DistancePips`.
- При исполнении одного из ордеров противоположный снимается, а к позиции привязываются стартовые уровни стоп-лосса и тейк-профита согласно выбранным отступам в пунктах.
- При необходимости можно включить трейлинг через параметры `TrailingStopPips` и `TrailingStepPips`, чтобы фиксировать прибыль по мере движения цены в нужную сторону.
- В момент `CancelTime` все оставшиеся отложенные ордера удаляются, а открытые позиции закрываются, чтобы не держать риск за пределами торгового окна.

Для контроля времени и работы трейлинга используется серия свечей (`CandleType`, по умолчанию минутная). Индикаторы не применяются.

## Параметры
| Имя | Описание |
| --- | --- |
| `Volume` | Объём каждого отложенного ордера. Стратегия размещает одинаковые Buy Stop и Sell Stop. |
| `StopLossPips` | Отступ между ценой входа и защитным стоп-лоссом в пунктах. Ноль отключает стоп. |
| `TakeProfitPips` | Отступ до тейк-профита в пунктах. Ноль отключает цель. |
| `TrailingStopPips` | Дистанция трейлинг-стопа в пунктах. Должна быть больше нуля для активации трейлинга. |
| `TrailingStepPips` | Минимальный прирост в пунктах, после которого трейлинг переносит стоп. Помогает избегать «дребезга». |
| `DistancePips` | Расстояние от текущей цены до отложенных ордеров в пунктах. |
| `PlacementTime` | Время (серверное), когда выставляются отложенные ордера. Значение по умолчанию — 10:30. |
| `CancelTime` | Время удаления отложенных ордеров и закрытия позиций. По умолчанию — 22:30. |
| `CandleType` | Тип свечей для расчётов. По умолчанию — 1 минута. |

## Особенности реализации
- Размер пункта рассчитывается как в оригинальном советнике: для инструментов с 3 или 5 знаками цена шага умножается на 10.
- Перед отправкой заявок цены нормализуются к минимальному шагу инструмента.
- Трейлинг сравнивает последнюю закрытую цену с `PositionPrice` и переносит защитный стоп только при превышении `TrailingStopPips` и `TrailingStepPips`.
- Каждый торговый день стратегия заново выставляет отложенные ордера при наступлении `PlacementTime`, а в `CancelTime` гарантированно выходит в ноль по позициям.

## Рекомендации по использованию
1. Запускайте стратегию на ликвидных инструментах с узким спредом — предполагается новостная волатильность.
2. Настройте `PlacementTime` и `CancelTime` в соответствии с релевантными экономическими событиями.
3. Подбирайте отступы в пунктах под текущую волатильность инструмента: большие значения снижают количество ложных пробоев, маленькие позволяют входить раньше, но повышают риск пилы.
4. Если нужен фиксированный стоп, оставьте `TrailingStopPips` равным нулю.
5. Во время важных новостей контролируйте проскальзывание и изменение спреда, чтобы убедиться в корректном исполнении отложенных ордеров.

# Стратегия SilverTrend CrazyChart
[English](README.md) | [中文](README_cn.md)

Стратегия является портом советника MetaTrader «Exp_SilverTrend_CrazyChart» на платформу StockSharp. Логика использует два буфер
a индикатора SilverTrend CrazyChart: текущую линию и смещённую линию. Когда смещённая линия пересекает текущую, стратегия открыв
ает позицию в сторону доминирующего канала и закрывает противоположную.

## Детали

- **Условия входа**:
  - **Покупка**: на предыдущем завершённом сигналом баре текущая линия располагалась выше смещённой, а на анализируемом баре теку
щая линия опустилась ниже или коснулась смещённой. Входы можно отключить параметром `AllowBuyEntry`.
  - **Продажа**: на предыдущем сигналом баре текущая линия была ниже смещённой, а на текущем баре поднялась выше или коснулась см
ещённой. Входы можно отключить параметром `AllowSellEntry`.
- **Направление торговли**: длинные и короткие позиции.
- **Условия выхода**:
  - Длинные позиции закрываются при пересечении линий в противоположном направлении (`AllowBuyExit`) либо по стоп-лоссу/тейк-про
iту.
  - Короткие позиции закрываются, когда текущая линия обгоняет смещённую (`AllowSellExit`), а также при срабатывании стоп-лосса и
i тейк-профита.
- **Стопы**: используются абсолютные расстояния от цены входа (`StopLossPoints` и `TakeProfitPoints`). Значение 0 отключает соотв
eтствующий предел.
- **Фильтры**:
  - `SignalBar` задаёт, сколько полностью сформированных свечей назад оценивается пересечение.
  - `CandleType` определяет таймфрейм расчёта индикатора.

## Параметры

- `CandleType` – тип свечей, подаваемых на индикатор (по умолчанию часовые).
- `Length` – период качания (`SSP`) для индикатора SilverTrend CrazyChart.
- `KMin` – коэффициент смещения для расчёта смещённой линии.
- `KMax` – коэффициент смещения для расчёта текущей линии.
- `SignalBar` – количество завершённых свечей назад для оценки сигнала.
- `AllowBuyEntry` / `AllowSellEntry` – разрешение на открытие длинных/коротких позиций.
- `AllowBuyExit` / `AllowSellExit` – разрешение на закрытие длинных/коротких позиций.
- `StopLossPoints` – абсолютная дистанция для стоп-лосса длинных и тейк-профита коротких позиций.
- `TakeProfitPoints` – абсолютная дистанция для тейк-профита длинных и стоп-лосса коротких позиций.
- `Volume` – базовый размер заявки стратегии.

## Логика индикатора

Встроенный `SilverTrendCrazyChartIndicator` повторяет буферы оригинала:

- По параметрам `Length`, `KMin` и `KMax` формируется канал на основе максимума и минимума за период.
- «Текущая» линия соответствует нулевому буферу MetaTrader и реагирует на последнюю свечу без задержки.
- «Смещённая» линия соответствует первому буферу и отстаёт на `Length + 1` бар для совпадения с рисунком исходного индикатора.

Покупка возникает, когда смещённая линия пересекает текущую снизу вверх, а продажа – при обратном пересечении. Параметр `SignalB
a` гарантирует использование только закрытых свечей, как и в оригинальном советнике.

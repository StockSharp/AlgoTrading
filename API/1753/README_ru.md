# Сетка VR Setka Grid

Стратегия реализует в StockSharp систему сеточного трейдинга "VR---SETKAa3hM" из MetaTrader 4. Ордера на покупку или продажу открываются при отклонении цены от дневного диапазона на заданный процент. При включённом мартингейле объём каждой новой позиции увеличивается. Средняя цена входа по всем ордерам используется для выставления общего тейк-профита.

## Параметры
- `Distance`: расстояние между уровнями сетки в пунктах.
- `TakeProfit`: тейк-профит для первого ордера в пунктах.
- `Correction`: добавочный профит в пунктах, прибавляемый к средней цене при нескольких ордерах.
- `SignalPercent`: процент отклонения от дневного диапазона для формирования сигнала.
- `UseMartingale`: включение увеличения объёма по мартингейлу.
- `CandleType`: таймфрейм свечей для расчётов.

## Логика
1. По завершённой свече рассчитывается положение закрытия относительно дневного максимума и минимума.
2. Если предыдущая свеча бычья и цена ниже дневного максимума на указанный процент, открывается или добавляется покупка.
3. Если предыдущая свеча медвежья и цена выше дневного минимума на указанный процент, открывается или добавляется продажа.
4. Дополнительные ордера ставятся каждый раз, когда цена идёт против позиции на `Distance` пунктов.
5. Когда цена возвращается к средней цене плюс `Correction` для покупок или минус `Correction` для продаж, все ордера закрываются рыночным ордером.

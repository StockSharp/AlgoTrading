# Стратегия DT RSI EXP1
[English](README.md) | [中文](README_cn.md)

Порт воспроизводит советник MT4 **DT-RSI-EXP1**. Алгоритм анализирует колебания RSI на 15-минутных свечах, чтобы найти двойные вершины и впадины около уровней 60/40. Лонг открывается, когда две последовательные вершины RSI удовлетворяют условиям, между ними нет впадин ниже 40, а фильтр тренда на 4-часовом графике направлен вниз. Для шорта условия зеркальные: две впадины, отсутствие вершин выше 60 и восходящий фильтр. К каждой позиции привязывается фиксированный стоп-лосс и тейк-профит, дополнительно можно включить трейлинг-стоп. Как и в оригинале, позиции принудительно закрываются при достижении RSI экстремумов 70/30.

## Подробности

- **Вход в рынок**:
  - **Лонг**: две вершины RSI, вторая выше 60, между ними нет впадин ниже 40; EMA на таймфрейме 240 минут (замена RFTL) ниже предыдущего закрытия; RSI(1) пересекает прогнозируемую линию шеи вверх, RSI(2) остаётся ниже, RSI(2) < 50 и RSI(0) < 55.
  - **Шорт**: две впадины RSI, вторая ниже 40, между ними нет вершин выше 60; EMA на 240-минутном графике выше предыдущего закрытия; RSI(1) пробивает линию шеи вниз, RSI(2) > 50 и RSI(0) > 47.
- **Направление**: обе стороны.
- **Выход**:
  - Экстремумы RSI (RSI > 70 для лонгов, RSI < 30 для шортов).
  - Срабатывание стоп-лосса или тейк-профита, рассчитанных в шагах цены.
  - Опциональный трейлинг-стоп после прохождения `TrailingStopPoints`.
- **Стопы**: фиксированные стоп-лосс и тейк-профит + трейлинг по желанию.
- **Значения по умолчанию**:
  - `CandleType` = 15 минут.
  - `TrendCandleType` = 240 минут (EMA-фильтр).
  - `RsiPeriod` = 47.
  - `StopLossPoints` = 26.
  - `TakeProfitPoints` = 76.
  - `TrailingStopPoints` = 0 (выключен).
- **Фильтры**:
  - Категория: трендовые входы по структурам RSI.
  - Направление: обе.
  - Индикаторы: RSI, EMA тренда.
  - Стопы: есть.
  - Сложность: средняя (много условий на свинги).
  - Таймфрейм: внутридневной (M15 + H4).
  - Сезонность: нет.
  - Нейросети: нет.
  - Дивергенция: нет.
  - Риск: средний.

## Параметры

| Имя | Значение | Описание | Оптимизация |
| --- | -------- | -------- | ----------- |
| `CandleType` | 15 минут | Базовый поток свечей для RSI и сигналов. | Да |
| `TrendCandleType` | 240 минут | Старший таймфрейм для EMA (аналог MT4 RFTL). | Да |
| `RsiPeriod` | 47 | Период RSI на основном таймфрейме. | Да |
| `StopLossPoints` | 26 | Дистанция стоп-лосса в шагах цены. | Да |
| `TakeProfitPoints` | 76 | Дистанция тейк-профита в шагах цены. | Да |
| `TrailingStopPoints` | 0 | Шаг трейлинг-стопа в шагах цены (`0` отключает). | Да |

## Заметки

- Индикатор MT4 `RFTL` заменён EMA с периодом 10 на 240-минутном графике. При необходимости измените таймфрейм или период EMA, чтобы ближе воспроизвести оригинал.
- Убедитесь, что у инструмента корректно настроены `PriceStep` и `StepPrice`, иначе значения в пунктах не совпадут с брокером.
- Трейлинг активируется только после прохождения цены дальше `TrailingStopPoints` от входа и никогда не расширяет исходный риск.

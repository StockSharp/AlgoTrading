# Стратегия ADX & MA

## Общее описание

Данная стратегия представляет собой порт эксперта MetaTrader **ADX_MA (fortrader)** на платформу StockSharp.
Она сочетает сглаженную скользящую среднюю (SMMA) и индикатор среднего направленного движения (ADX),
чтобы сделки открывались только при подтверждённом пересечении и достаточной силе тренда.
Как и оригинал, порт использует несимметричное управление рисками: для покупок задан увеличенный
зазор стопов и трейлинга, для продаж параметры значительно более жёсткие.

## Логика работы

1. Строится SMMA по медианной цене свечей и ADX с заданными периодами.
2. Сигналы рассчитываются только на закрытых свечах, имитируя вызовы `iClose(...,1)` и `iClose(...,2)` в MQL4.
3. Покупка выполняется, когда предыдущая свеча закрылась выше SMMA, свеча до неё — ниже, а ADX выше порога.
4. Продажа выполняется, когда предыдущая свеча закрылась ниже SMMA, ещё более ранняя — выше, и ADX превышает порог.
5. Управление позицией включает:
   - закрытие при смене направления относительно SMMA;
   - индивидуальные уровни стоп-лосса и тейк-профита в пунктах;
   - опциональный трейлинг, который подтягивается по мере движения цены в нужную сторону.

Все ценовые смещения пересчитываются из пунктов по шагу цены инструмента. Если шаг не задан, используется значение 1.

## Параметры

| Название | Описание |
| -------- | -------- |
| `SMMA Period` | Период сглаженной скользящей средней (по умолчанию 21). |
| `ADX Period` | Период индикатора ADX (по умолчанию 14). |
| `ADX Threshold` | Минимальное значение ADX для разрешения входа (по умолчанию 16). |
| `Long Take Profit (pips)` | Тейк-профит для длинных позиций в пунктах (по умолчанию 1300). |
| `Long Stop Loss (pips)` | Стоп-лосс для длинных позиций в пунктах (по умолчанию 30). |
| `Long Trailing Stop (pips)` | Трейлинг-стоп для длинных позиций в пунктах (по умолчанию 270). |
| `Short Take Profit (pips)` | Тейк-профит для коротких позиций в пунктах (по умолчанию 160). |
| `Short Stop Loss (pips)` | Стоп-лосс для коротких позиций в пунктах (по умолчанию 50). |
| `Short Trailing Stop (pips)` | Трейлинг-стоп для коротких позиций в пунктах (по умолчанию 20). |
| `Volume` | Объём заявки при открытии новой позиции (по умолчанию 0.1). |
| `Candle Type` | Тип свечей, используемых в расчётах (по умолчанию минутные). |

Все параметры доступны для оптимизации, а значения по умолчанию соответствуют настройкам оригинального советника.

## Дополнительные замечания

- Трейлинг активируется только после того, как цена пройдёт в прибыль не меньше указанного расстояния.
- Противоположный сигнал закрывает текущую позицию перед открытием новой.
- При наличии области графика стратегия автоматически отображает свечи, индикаторы и собственные сделки.
- Автоматические тесты не поставляются; рекомендуется провести собственное тестирование в терминале или на истории.

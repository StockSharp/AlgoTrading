# Стратегия сканирования бинарных опционов

## Общее описание
Стратегия повторяет поведение советника MetaTrader из файла
`Binary Option Symbol.mq4`. Задача — отфильтровать доступные инструменты и
вывести те, что соответствуют бинарным опционам. В MQL это достигается проверкой
`MODE_PROFITCALCMODE == 2` и `MODE_STOPLEVEL == 0` для каждого символа. В
StockSharp мы используем метаданные, которые поставщик данных записывает в
`Security.ExtensionInfo`, чтобы реализовать аналогичный фильтр.

## Логика стратегии
1. Считывается параметр `Symbols` и разбивается по запятым, точкам с запятой или
   пробельным символам.
2. Для каждого идентификатора выполняется поиск `Security` через
   `SecurityProvider.LookupById`.
3. Из `ExtensionInfo` извлекаются поля `ProfitCalcMode` и `StopLevel`.
4. Если значения совпадают с параметрами `ProfitCalcMode` и `StopLevel`
   (по умолчанию 2 и 0), стратегия пишет информационное сообщение о найденном
   бинарном опционе.
5. При отсутствии данных выводится отладочный лог, что позволяет проверить
   конфигурацию подключения.
6. Если список `Symbols` пуст, анализируется только инструмент, присвоенный
   свойству `Security` стратегии.

## Параметры
| Параметр | Описание | Значение по умолчанию |
|----------|----------|-----------------------|
| `Symbols` | Перечень идентификаторов через запятую/точку с запятой/пробел. При пустом значении используется текущий инструмент стратегии. | *(пусто)* |
| `ProfitCalcMode` | Требуемый режим расчёта прибыли (аналог `MODE_PROFITCALCMODE`). | `2` |
| `StopLevel` | Требуемый уровень стопа (аналог `MODE_STOPLEVEL`). | `0` |

## Рекомендации по использованию
- Убедитесь, что адаптер заполняет ключи `ProfitCalcMode` и `StopLevel` в
  `ExtensionInfo`. Без них фильтр не сработает.
- Если инструмент не найден, выводится предупреждение. Проверьте идентификатор
  и наличие инструмента в соединении.
- Стратегия не отправляет заявок и безопасна для запуска в любой среде.
- Логи можно использовать для построения списков бинарных опционов или
  настройки других торговых роботов.

## Отличия от оригинального MQL-скрипта
- В MetaTrader доступна функция `SymbolsTotal`, тогда как в StockSharp список
  задаётся вручную через `Symbols`. Это даёт полный контроль над областью
  поиска.
- Вместо вызовов `MarketInfo` читаются данные из `Security.ExtensionInfo`, что
  соответствует рекомендациям по высокоуровневому API.
- Добавлены подробные сообщения журнала, объясняющие причины принятия или
  отклонения инструмента.

## Быстрый старт
1. Подключитесь к бирже через терминал StockSharp или собственное приложение.
2. Создайте экземпляр `BinaryOptionSymbolScannerStrategy`.
3. Заполните параметр `Symbols`, например: `EURUSD, NAS100, XAUUSD, EURGBP`.
4. Запустите стратегию и изучите информационные сообщения вида
   `Binary option symbol detected: EURUSD`.

Полученный список инструментов можно использовать для дальнейшего анализа или
настройки торговых стратегий под бинарные опционы.

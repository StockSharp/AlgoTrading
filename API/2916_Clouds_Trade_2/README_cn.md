# Clouds Trade 2 策略
[English](README.md) | [Русский](README_ru.md)

本策略为 Vladimir Karputov 的 "cloud's trade 2" EA 的 C# 版本。它结合了两次最近的比尔·威廉姆斯分形信号以及在超买/超卖区域的随机指标交叉来捕捉突破。风控部分复刻原始输入，提供固定止损止盈、带步长的移动止损以及按金额和点数锁定利润的功能。

## 交易逻辑

- **数据源**：单一时间框蜡烛线（默认 15 分钟）。
- **指标**：
  - 随机指标，使用可配置的 %K 回溯长度、平滑长度和 %D 平滑。
  - 五根蜡烛的滑动高低价窗口，用于重建上下分形。
- **开仓条件**：
  - **做多**：最新的两个有效分形均为下分形，或 %D 下降到 20 以下并向下穿越 %K。当前不得持有仓位，并且“每日一次”过滤器允许开仓。
  - **做空**：最新两个分形均为上分形，或 %D 升至 80 以上并向上穿越 %K。
- **平仓与风控**：
  - 以入场价为基准的固定止损与止盈距离。
  - 可选的移动止损，仅在浮盈超过“移动距离 + 步长”后上调（或下调）止损。
  - 当未实现收益达到设定的金额或点数时立即平仓。
  - 为贴近 MQL 版本，止损/止盈通过检查蜡烛最高价与最低价进行模拟。

## 参数说明

- **Order Volume**：每次开仓的基础手数。
- **Stop/Take Offsets**：止损与止盈的绝对价格距离；若要还原原始 EA 的“点”设置，需要根据交易品种的最小价格变动来调整。
- **Trailing Stop & Step**：移动止损的距离与最小步长。
- **Min Profit (Currency / Points)**：按金额或价格差触发的提前平仓阈值。
- **Use Fractals / Use Stochastic**：分别启用分形或随机指标信号。
- **One Trade Per Day**：限制每天只开一次新仓。
- **Stochastic Settings**：%K、Slowing 与 %D 的长度。
- **Candle Type**：用于计算信号的蜡烛时间框架。

## 备注

- 盈亏判断采用“价格变动 × 仓位”近似原策略中的佣金和掉期调整。
- 移动止损的触发条件与 MQL 脚本一致，需要超过设定距离再加步长才会移动。
- 在外汇品种中，可将止损/止盈距离设为所需点数乘以 `Point`（例如五位报价的 50 点 ≈ 0.005）。

# Стратегия Clouds Trade 2
[English](README.md) | [中文](README_cn.md)

Переписанная на C# версия советника «cloud's trade 2» от Владимира Карпутова. Алгоритм ищет прорывы, подтверждённые двумя последовательными фракталами Билла Уильямса и разворотом стохастика в зонах перекупленности/перепроданности. Управление позицией полностью повторяет параметры оригинала: фиксированный стоп‑лосс и тейк‑профит, трал с шагом и пороги фиксации прибыли.

## Логика торговли

- **Данные**: свечи одного таймфрейма (по умолчанию 15 минут).
- **Индикаторы**:
  - Стохастический осциллятор с настраиваемыми периодами %K, сглаживания и линии %D.
  - Скользящее окно из пяти свечей для восстановления верхних и нижних фракталов.
- **Вход в сделку**:
  - **Покупка**: два последних фрактала — нижние, либо %D опустилась ниже 20 и пересекла %K сверху вниз. Позиция должна быть закрыта, фильтр «одна сделка в день» должен разрешать вход.
  - **Продажа**: два последних фрактала — верхние, либо %D поднялась выше 80 и пересекла %K снизу вверх.
- **Выход и защита**:
  - Фиксированные стоп и тейк от цены входа.
  - Опциональный трейлинг, который двигает стоп только после превышения прибыли на величину трейлинга плюс шаг.
  - Закрытие позиции при достижении заданной прибыли в деньгах или пунктах.
  - Стоп‑ордера имитируются проверкой максимумов и минимумов свечи, как в MQL‑версии.

## Параметры

- **Order Volume** — объём входа.
- **Stop/Take Offsets** — абсолютные ценовые смещения стопа и тейка; подбирайте под шаг цены инструмента для копирования «пипсов» из оригинала.
- **Trailing Stop & Step** — расстояние и минимальный шаг для перемещения трейлинга.
- **Min Profit (Currency / Points)** — досрочное закрытие при достижении прибыли.
- **Use Fractals / Use Stochastic** — включение отдельных сигналов.
- **One Trade Per Day** — ограничение на один вход в сутки.
- **Stochastic Settings** — параметры стохастика (%K, Slowing, %D).
- **Candle Type** — таймфрейм используемых свечей.

## Замечания

- Расчёт прибыли приближённый: вместо комиссии и свопа используется движение цены, умноженное на размер позиции.
- Логика трейлинга повторяет MQL: стоп переносится только при превышении прибыли на сумму трейлинга и шага.
- Для Форекса установите смещения стопа/тейка равными количеству пунктов, умноженному на `Point` инструмента (пример: 50 пунктов ≈ 0.005 для пятизначных котировок).

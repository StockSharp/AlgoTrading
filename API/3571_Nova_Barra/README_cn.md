# Nova Barra

## 概述
Nova Barra 是 MetaTrader 5 示例 `NovaBarra.mq5` 的直接移植。原始脚本演示了一个可复用的模式：识别专家顾问接收到的第一个 tick，并把它与后续完成的 K 线区分开。StockSharp 版本完全依赖事件驱动，通过高级 API 订阅已完成的蜡烛，并在其开盘时间发生变化时作出响应。

该策略不会发送任何订单。它会在发现新蜡烛或收到仍在形成中的蜡烛更新时输出信息日志，因此非常适合作为轻量级诊断组件，在需要快速了解蜡烛边界的复杂策略中复用。

## 策略逻辑
### 蜡烛订阅
* **可配置周期** —— 提供一个参数以选择蜡烛类型（默认 1 分钟）。策略启动后立即订阅该数据。
* **完成状态筛选** —— 只处理状态为 `Finished` 的蜡烛，与 MetaTrader 中的“新蜡烛”条件保持一致。

### 事件处理
* **首个检测到的蜡烛** —— 第一根完成的蜡烛会初始化内部参考时间，并记录日志，表明策略接管了一个已经在进行中的蜡烛。
* **常规新蜡烛** —— 每当蜡烛开盘时间发生变化，就记录新蜡烛并打印其开盘价。
* **蜡烛内更新** —— 如果处理器再次收到同一根蜡烛的通知（例如部分更新），会记录该更新属于当前仍在形成中的蜡烛，而不是新的蜡烛。
* **通用后续操作** —— 无论是第一根还是后续蜡烛，都会调用共享方法输出开盘时间和收盘价，对应原始代码中可插入更多操作的占位部分。

## 参数
* **Candle Type** —— 选择用于检测新蜡烛的蜡烛数据序列。由于该组件定位为工具而非交易策略，因此禁用优化。

## 使用说明
* 将策略附加到任意品种，即可观察 StockSharp 如何报告蜡烛完成。日志会显示首根蜡烛、每根新蜡烛以及当前蜡烛内的所有更新。
* 代码全部使用英文注释，便于理解和扩展移植逻辑。
* 不包含风险管理或下单流程，示例专注于事件检测。

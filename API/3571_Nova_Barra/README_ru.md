# Nova Barra

## Обзор
Nova Barra — прямой порт примера MetaTrader 5 `NovaBarra.mq5`. Изначальный скрипт демонстрирует повторно используемый шаблон: как определить самый первый тик, обработанный экспертом, и отличить его от последующих завершённых баров. Версия на StockSharp остаётся полностью событийной: стратегия подписывается на завершённые свечи через высокоуровневый API и реагирует на изменение их времени открытия.

Стратегия не выставляет заявки. Она выводит информативные сообщения в журнал всякий раз, когда обнаруживает новый бар или получает обновления внутри всё ещё формирующейся свечи. Благодаря этому её удобно использовать как лёгкий диагностический модуль в составе более сложных стратегий, которым нужна оперативная информация о границах свечей.

## Логика стратегии
### Подписка на свечи
* **Настраиваемый таймфрейм** — единственный параметр позволяет выбрать тип свечей (по умолчанию таймфрейм 1 минута). Стратегия подписывается на поток сразу после запуска.
* **Фильтр завершённых свечей** — обрабатываются только свечи в состоянии `Finished`, что повторяет условие «появилась новая свеча» из MetaTrader.

### Обработчики событий
* **Первый обнаруженный бар** — первая завершённая свеча инициализирует внутреннее время отсчёта и записывает в журнал, что стратегия подключилась к уже идущей свече.
* **Обычный новый бар** — при каждом изменении времени открытия свечи стратегия фиксирует новый бар и выводит его цену открытия.
* **Обновления внутри бара** — если обработчик снова получает уведомление об этой же свече (например, частичное обновление), в журнал записывается, что обновление относится к текущей формирующейся свече, а не к новой.
* **Общие действия после нового бара** — и первая, и последующие свечи вызывают общий метод, который выводит время открытия и цену закрытия. Это отражает ту часть оригинального кода, куда можно добавить дополнительные действия.

## Параметры
* **Candle Type** — выбирает ряд свечных данных, по которому определяется появление нового бара. Оптимизация отключена, потому что компонент предназначен как служебный инструмент, а не торговая стратегия.

## Рекомендации по использованию
* Подключите стратегию к любому инструментуу, чтобы увидеть, как StockSharp сообщает о завершении свечей. В журнале появятся записи о первой свече, каждом новом баре и всех обновлениях внутри текущей свечи.
* Код снабжён подробными комментариями на английском языке, что упрощает понимание и расширение логики портирования.
* Управление рисками и размещение заявок отсутствуют — пример сфокусирован исключительно на детекции событий.

# Fortrader 10 Pips 策略

## 概述
**Fortrader 10 Pips 策略** 是 MetaTrader 4 智能交易系统 `10pips.mq4`（编号 8074）的 StockSharp 版本。机器人同时保持一个多头和一个空头头寸，每个方向都使用以品种点值为单位的固定止盈、止损和移动止损距离。

该移植使用 StockSharp 的高级 API 重建了对冲行为。策略启动后立即发送一笔市价买单和一笔市价卖单。当任意一侧被保护性订单平仓时，策略会立刻在同一方向重新开仓，从而始终维持双向持仓。

## 参数
| 名称 | 说明 |
| --- | --- |
| `Take Profit Buy` | 多头方向的止盈距离（点）。 |
| `Stop Loss Buy` | 多头方向的止损距离（点）。 |
| `Trailing Stop Buy` | 多头方向的移动止损距离（点），设为 0 可禁用移动止损。 |
| `Take Profit Sell` | 空头方向的止盈距离（点）。 |
| `Stop Loss Sell` | 空头方向的止损距离（点）。 |
| `Trailing Stop Sell` | 空头方向的移动止损距离（点），设为 0 可禁用移动止损。 |
| `Volume` | 每笔市价单的交易量（手）。 |

所有距离都会乘以品种的 `PriceStep`，将点值转换为实际价格。所有参数都通过 `StrategyParam<T>` 暴露，可以在界面中调整或优化。

## 交易逻辑
1. **启动**：`OnStarted` 订阅 Level 1 行情，以追踪当前最佳买价和卖价，并立刻发送一笔买单和一笔卖单。
2. **保护性订单**：每次成交后（`OnNewMyTrade`）都会根据设置的距离创建对应的止损和止盈订单，并按最小价格步长四舍五入。
3. **重新入场**：当止损或止盈被触发时，策略立即在同一方向重新开仓，以维持双向持仓结构。
4. **移动止损**：行情更新时调用 `UpdateTrailingStops`，当价格相对开仓价的浮盈超过移动止损距离时，按照原 EA 的逻辑上调或下调止损，仅沿获利方向移动。

## 实现说明
- 原始 MT4 代码在首次买卖之间等待 10 秒。StockSharp 中无需该延迟，因此两个订单会立即发送。
- StockSharp 默认采用净头寸模型，是否能够真正对冲取决于经纪商/连接器是否支持反向持仓。策略内部独立跟踪两个方向，并在平仓后重新建立。
- 在 `OnStarted` 中调用一次 `StartProtection()`，以便在框架层启用了全局风控时自动生效。

## 使用建议
- 如果需要对冲效果，请确认所用连接器支持同时持有多空头寸。
- 将移动止损参数设置为 0 可分别关闭对应方向的拖尾止损。
- 建议在历史数据上优化止盈、止损和移动止损参数，以匹配具体交易品种和周期。

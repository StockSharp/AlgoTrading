# Стратегия Exp XMA Range Bands

Стратегия повторяет логику примера MetaTrader "Exp_XMA_Range_Bands" с использованием высокоуровневого API StockSharp. Она строит канал Кельтнера на основе скользящей средней и среднего истинного диапазона, чтобы определить динамические уровни поддержки и сопротивления. Сделки совершаются, когда цена возвращается в канал после выхода наружу.

## Как работает

1. Формируется канал Кельтнера:
   - Период EMA `MaLength`
   - Период ATR `RangeLength`
   - Множитель ATR `Deviation`
2. Если свеча закрылась выше предыдущей верхней границы, короткая позиция закрывается. Если следующая свеча закрылась внутри канала (закрытие ≤ текущей верхней границы), открывается длинная позиция.
3. Если свеча закрылась ниже предыдущей нижней границы, длинная позиция закрывается. Если следующая свеча закрылась внутри канала (закрытие ≥ текущей нижней границы), открывается короткая позиция.
4. Уровни стоп-лосса и тейк-профита задаются в пунктах и применяются после открытия позиции.

## Параметры

- `MaLength` – период EMA для центральной линии.
- `RangeLength` – период ATR для ширины канала.
- `Deviation` – множитель ATR.
- `StopLoss` – стоп-лосс в пунктах (переводится в цену через `Security.PriceStep`).
- `TakeProfit` – тейк-профит в пунктах.
- `CandleType` – тип свечей, используемый для расчётов.

## Индикаторы

- KeltnerChannels (EMA + ATR)


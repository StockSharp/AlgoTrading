# Стратегия Screenshot

## Обзор
Стратегия повторяет пример MetaTrader 5, который ожидает нажатия клавиши **S** и сохраняет снимок графика. В StockSharp она отслеживает события клавиатуры из консольного приложения-хоста. При нажатии **S** создаётся PNG-файл с служебным изображением, содержащим отметку времени и идентификатор выбранного инструмента. Параметры автопрокрутки и смещения правой границы, присутствующие в MetaTrader, в StockSharp отсутствуют, поэтому упор сделан именно на процесс сохранения скриншота.

Файлы помещаются в заданную папку (по умолчанию путь трактуется относительно каталога запуска) и именуются по шаблону `<ScreenshotName>_YYYYMMDD_HHMMSS.png`. После каждой операции в журнал добавляется информационная запись, чтобы настольный интерфейс мог показать результат.

## Параметры
- `ScreenshotName` – базовая часть имени файла; недопустимые символы заменяются подчёркиваниями.
- `ScreenshotWidth` – ширина PNG-изображения в пикселях; значения меньше единицы автоматически округляются до 1.
- `ScreenshotHeight` – высота PNG-изображения в пикселях; значения меньше единицы автоматически округляются до 1.
- `OutputFolder` – каталог для скриншотов. Относительный путь дополняется базовой директорией процесса.

Все параметры объявлены через `StrategyParam<T>` и доступны для изменения во время работы. Оптимизация отключена, поскольку стратегия решает вспомогательную задачу.

## Использование
1. Подключите стратегию к коннектору и выберите нужный инструмент.
2. Запустите стратегию – в фоне стартует задача, которая опрашивает буфер клавиатуры консоли.
3. Нажмите клавишу **S** в окне консоли, где выполняется стратегия. Каждый сигнал инициирует сохранение изображения.
4. Проверьте PNG-файлы в целевой папке. Изображение содержит диагностический текст (время и идентификатор инструмента), потому что в безголовом режиме StockSharp не предоставляет прямого доступа к отрисовке графика.

При остановке стратегия отменяет слушатель клавиатуры. Если приложение не имеет консольного ввода (например, запущено из GUI), выводится единичное предупреждение и горячая клавиша игнорируется, что соответствует поведению MQL при отсутствии события.

## Примечания
- Используется `System.Drawing` для генерации изображения. На Linux и macOS потребуется библиотека `libgdiplus`.
- При ошибках создания каталога или записи файла исключение фиксируется через `AddErrorLog`, что облегчает диагностику пользователю.
- Стратегия не отправляет торговых заявок, как и исходный советник MetaTrader с пустым обработчиком `OnTick`.

# Market Predictor 策略

## 概述
Market Predictor 策略是对 MetaTrader 平台 MarketPredictor 智能交易顾问的 StockSharp 高级 API 版本。策略通过蒙特卡洛预测与基于最新蜡烛的自适应统计参数相结合，持续评估下一步价格走势，只处理已经收盘的蜡烛。

## 核心思想
- **自适应均值 (`mu`)：** 使用简单移动平均线动态更新期望值，对应原始 EA 中的参数优化步骤。
- **波动性驱动的幅度：** ATR 控制幅度系数 (`alpha`)，让策略能够捕捉波动率的增加。
- **蒙特卡洛预测：** 每根蜡烛结束时运行可配置数量的随机模拟，计算未来价格 (`P_t1`) 的平均值。
- **方向判定：** 当预测价格与最新收盘价的差异超过 `sigma` 阈值时，以市价单开仓；只有在没有持仓时才允许入场。

## 交易规则
1. 等待蜡烛收盘并确认所有指标形成。
2. 通过 SMA 更新 `mu`，通过 ATR 更新 `alpha`。
3. 围绕最新收盘价执行蒙特卡洛模拟。
4. 如果平均模拟价格高于 `Close + sigma`，在空仓时买入开多。
5. 如果平均模拟价格低于 `Close - sigma`，在空仓时卖出开空。
6. 持仓直至出现反向信号。

## 参数
- **InitialAlpha** – ATR 尚未形成时使用的默认幅度。
- **InitialBeta** – 保留的系数，与原始 EA 保持一致（当前未直接参与计算）。
- **InitialGamma** – 保留的阻尼系数（当前未直接使用）。
- **Kappa** – Sigmoid 概念的敏感度参数，作为未来扩展的占位符。
- **InitialMu** – SMA 尚未形成时的默认平均值。
- **Sigma** – 触发信号所需的预测价格偏离阈值。
- **MonteCarloSimulations** – 预测下一价格所使用的模拟次数。
- **CandleType** – 使用的蜡烛类型（时间框架）。

## 备注
- 策略依赖 StockSharp 的高级 API 实现蜡烛订阅、指标绑定及市价委托。
- 源码中的注释全部为英文，便于国际化协同。
- 根据需求，未创建 Python 版本及其目录。

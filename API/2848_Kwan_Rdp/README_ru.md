# Стратегия KWAN RDP Trend

Стратегия является портом MetaTrader-советника `Exp_KWAN_RDP` на платформу StockSharp. Индикатор KWAN RDP строится по следующей цепочке:

1. **DeMarker** — оценивает соотношение последних максимумов и минимумов, чтобы найти истощение импульса.
2. **Money Flow Index** — анализирует цену и объем для выявления зон перекупленности/перепроданности.
3. **Momentum** — измеряет скорость изменения цены за заданный период.
4. Значение `100 * DeMarker * MFI / Momentum` сглаживается выбранным типом скользящей средней (SMA, EMA, SMMA, WMA или Jurik).

Наклон сглаженного осциллятора задает торговые сигналы:

- **Рост наклона** — закрытие коротких позиций и, при необходимости, открытие длинной.
- **Падение наклона** — закрытие длинных позиций и, при необходимости, открытие короткой.
- Нейтральный участок (наклон ≈ 0) не приводит к действиям.

## Параметры

- `CandleType` — тип свечей для расчета индикаторов (по умолчанию H1).
- `DeMarkerPeriod` — период индикатора DeMarker.
- `MfiPeriod` — период Money Flow Index.
- `MomentumPeriod` — период индикатора Momentum.
- `SmoothingLength` — длина сглаживающей средней.
- `Smoothing` — тип сглаживания (Simple, Exponential, Smoothed, Weighted, Jurik).
- `EnableLongEntries` / `EnableShortEntries` — разрешение на открытие длинных/коротких позиций.
- `CloseLongsOnReverse` / `CloseShortsOnReverse` — закрытие позиции при противоположном сигнале.
- `TakeProfitPercent` / `StopLossPercent` — необязательные процентные значения для защиты позиций через `StartProtection`.

## Правила торговли

1. Подписаться на свечи выбранного таймфрейма и вычислять DeMarker, MFI, Momentum и сглаженное значение KWAN на каждой завершенной свече.
2. Определять направление наклона текущего осциллятора относительно предыдущего значения.
3. При подъеме наклона закрывать шорты (если включено) и открывать лонг, если лонговая торговля разрешена и позиция отсутствует.
4. При снижении наклона закрывать лонги (если включено) и открывать шорт, если шортовая торговля разрешена и позиции нет.
5. Опционально использовать процентные стоп-лосс/тейк-профит для автоматической защиты.

## Примечания

- Сигналы обрабатываются только на закрытых свечах, что снижает шум.
- Реализация DeMarker включает внутреннее сглаживание для соответствия исходному MQL-коду.
- Все комментарии в C#-коде даны на английском языке в соответствии с требованиями репозитория.

# Hpcs Inter6 RSI 策略

## 概述
Hpcs Inter6 RSI 策略将 MetaTrader 专家顾问 `_HPCS_Inter6_MT4_EA_V01_WE` 移植到 StockSharp 高级 API。算法观察可配置周期的相对强弱指标（RSI），关注围绕经典 70/30 阈值的快速反转。当 RSI 向上穿越 70 时策略转为空头，当 RSI 向下穿越 30 时策略转为多头。每次入场都会立即设置对称的止盈和止损，距离以点（pip）表示。

## 数据与指标
- **K线来源**：用户可配置的时间框架（默认 1 小时）。
- **指标**：可配置周期的相对强弱指标（默认 14），通过 StockSharp 指标绑定流水线重新计算。

## 入场逻辑
1. 策略只在 K 线收盘后工作，避免使用未完成的数据。
2. 每根收盘 K 线比较新的 RSI 数值与前一根的数值。
3. **做空条件**：若 RSI 刚从下方穿越 `UpperLevel`（默认 70），策略以市价卖出。若存在多头头寸，会先平掉多头，再建立与配置交易量相等的净空头。
4. **做多条件**：若 RSI 刚从上方穿越 `LowerLevel`（默认 30），策略以市价买入。若存在空头头寸，会先回补空头，再建立与配置交易量相等的净多头。
5. 每根 K 线最多触发一次信号；同一根 K 线上的重复信号会被忽略，以匹配原始 EA 使用 K 线时间戳的保护机制。

## 离场逻辑
- 每次入场都会设置相同距离的止盈和止损。
- 持有多头时，如果 K 线最高价触及止盈或最低价触及止损，立即平仓。
- 持有空头时，如果 K 线最低价触及止盈或最高价触及止损，立即平仓。
- 空仓时会清除所有保护价位。

点距会根据交易标的的最小报价单位进行换算。若标的使用三位或五位小数，算法会将距离乘以 10，以符合 MetaTrader 中对 1 点（pip）的定义。

## 参数
| 参数 | 默认值 | 说明 |
|------|--------|------|
| `CandleType` | 1 小时时间框架 | 提供 RSI 计算所需的 K 线。 |
| `RsiLength` | 14 | RSI 的回溯周期。 |
| `UpperLevel` | 70 | RSI 向上穿越该值时触发做空。 |
| `LowerLevel` | 30 | RSI 向下穿越该值时触发做多。 |
| `TradeVolume` | 1 | 市价单的下单手数，反向持仓会在入场前平掉。 |
| `OffsetInPips` | 10 | 止盈和止损距入场价的距离（单位：点）。 |

所有参数均通过 `StrategyParam` 暴露，可在 StockSharp 中执行优化。

## 说明
- 策略使用 K 线的最高价与最低价来模拟止盈止损的触发，贴近 MetaTrader 的固定价位行为。
- 不会挂出挂单，所有交易均通过市价单完成。
- 如果界面中存在图表区域，策略会自动绘制价格与 RSI 指标，方便监控。

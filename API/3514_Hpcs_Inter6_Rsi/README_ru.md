# Стратегия Hpcs Inter6 RSI

## Обзор
Hpcs Inter6 RSI переносит эксперта MetaTrader `_HPCS_Inter6_MT4_EA_V01_WE` на высокоуровневый API StockSharp. Алгоритм анализирует индекс относительной силы (RSI) на настраиваемых свечах и реагирует на резкие развороты около классических уровней 70/30. Пересечение RSI выше 70 инициирует короткую позицию, пересечение ниже 30 — длинную. Каждая сделка сразу получает симметричные уровни тейк-профита и стоп-лосса, заданные в пунктах.

## Данные и индикаторы
- **Источники данных** — свечи выбранного таймфрейма (по умолчанию 1 час).
- **Индикатор** — RSI с настраиваемым периодом (по умолчанию 14), который пересчитывается через механизм `Bind`.

## Логика входа
1. Стратегия ожидает закрытия свечи, чтобы работать только с завершёнными данными.
2. После каждой закрытой свечи сравниваются текущие и предыдущие значения RSI.
3. **Продажа:** если RSI пересекает уровень `UpperLevel` (70) снизу вверх, отправляется рыночная заявка на продажу. Наличие длинной позиции приводит к её закрытию перед открытием шорта, поэтому итоговый объём шорта равен параметру `TradeVolume`.
4. **Покупка:** если RSI пересекает уровень `LowerLevel` (30) сверху вниз, отправляется рыночная заявка на покупку. Активные короткие позиции закрываются перед открытием лонга, итоговый объём равен `TradeVolume`.
5. В течение одной свечи допускается только один сигнал — дополнительная защита от повторных входов на той же свече полностью повторяет логику MQL.

## Логика выхода
- После входа вычисляются уровни тейк-профита и стоп-лосса на одинаковом расстоянии от цены входа.
- Для длинной позиции выход выполняется, если максимум свечи достигает тейк-профита или минимум опускается до стоп-лосса.
- Для короткой позиции выход выполняется, если минимум свечи достигает тейк-профита или максимум поднимается к стоп-лоссу.
- При отсутствии позиции защитные уровни сбрасываются.

Расстояние в пунктах переводится в цену через минимальный шаг котировки инструмента. Для инструментов с тремя или пятью знаками после запятой расстояние дополнительно умножается на десять, что соответствует определению пункта в MetaTrader.

## Параметры
| Параметр | Значение по умолчанию | Описание |
|----------|-----------------------|----------|
| `CandleType` | Таймфрейм 1 час | Источник свечей для расчёта RSI. |
| `RsiLength` | 14 | Период RSI. |
| `UpperLevel` | 70 | Уровень RSI для открытия продаж при пересечении снизу вверх. |
| `LowerLevel` | 30 | Уровень RSI для открытия покупок при пересечении сверху вниз. |
| `TradeVolume` | 1 | Объём рыночных заявок; перед разворотом противоположная позиция закрывается. |
| `OffsetInPips` | 10 | Расстояние до тейк-профита и стоп-лосса в пунктах. |

Все параметры оформлены через `StrategyParam`, поэтому их можно оптимизировать в StockSharp.

## Дополнительно
- Выход по тейк-профиту и стоп-лоссу моделируется по экстремумам свечей, что соответствует фиксированным ценовым уровням в оригинальном советнике.
- Стратегия не выставляет отложенные ордера — все операции выполняются рыночными заявками.
- При наличии области на графике автоматически добавляются свечи и кривая RSI для визуального контроля.

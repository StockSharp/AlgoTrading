# Стратегия VR Setka P2

Стратегия основана на советнике MetaTrader 4 `VR---SETKAp2` и реализует сеточный подход.
Сделки открываются, когда дневная цена закрытия отклоняется от максимума или минимума дня
на заданный процент. Покупка выполняется после значительного снижения от дневного максимума
и бычьей предыдущей свечи, продажа — после роста от дневного минимума и медвежьей свечи.
После входа позиция закрывается на фиксированном уровне тейк-профита. При желании можно
использовать простую схему мартингейла для увеличения объёма.

## Параметры
- **TakeProfit** – дистанция до цели в шагах цены.
- **Lot** – базовый объём каждой сделки.
- **Percent** – пороговое значение в процентах от дневного диапазона.
- **UseMartingale** – включает увеличение объёма при усреднении.
- **Slippage** – допустимое проскальзывание при выставлении заявок.
- **Correlation** – сдвиг, применяемый при расчёте уровней сетки.
- **Candle Type** – таймфрейм для расчётов (по умолчанию дневной).

## Логика
1. Подписка на дневные свечи.
2. Для каждой завершённой свечи вычисляется процентное отклонение от максимумов и минимумов.
3. Вход в длинную или короткую позицию происходит по условиям отклонения и цвета предыдущей свечи.
4. Позиция закрывается при достижении тейк-профита.

Пример показывает перенос классического сеточного советника из MetaTrader в высокоуровневый API StockSharp.

# VR Setka P2 策略

该策略源自 MetaTrader 4 专家顾问 `VR---SETKAp2`，属于基于网格的交易方法。
当日收盘价相对于当天最高或最低偏离设定的百分比时触发交易。
当收盘价从日高下跌指定比例且前一根日线收阳时开多；
当收盘价从日低上涨指定比例且前一根日线收阴时开空。
持仓后在固定的获利距离平仓，并可选择使用简单的马丁格尔加仓方式。

## 参数
- **TakeProfit** – 以价格步长表示的获利距离。
- **Lot** – 每笔交易的基础数量。
- **Percent** – 根据日内范围计算的百分比阈值。
- **UseMartingale** – 在加仓时按马丁格尔方式增加数量。
- **Slippage** – 下单允许的滑点。
- **Correlation** – 计算网格水平时应用的偏移量。
- **Candle Type** – 用于计算的K线周期，默认为日线。

## 逻辑
1. 订阅日线K线。
2. 对于每根完成的K线，计算收盘价相对于日高和日低的百分比偏离。
3. 根据偏离程度和上一根K线的方向决定做多或做空。
4. 达到设定的获利目标后平仓。

该示例展示了如何将经典的 MetaTrader 网格策略迁移到 StockSharp 的高级 API。

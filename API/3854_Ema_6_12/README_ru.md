# Стратегия пересечения EMA 6/12

Стратегия повторяет логику советника EMA_6_12 для MetaTrader: рассчитывает EMA(6) и EMA(12) на выбранных свечах (по умолчанию — часовые), и после закрытия свечи реагирует на пересечения скользящих средних.

## Логика торговли

- **Вход в позицию**
  - Сигнал на покупку возникает, когда EMA(6) пересекает EMA(12) снизу вверх. Если позиции нет, открывается длинная.
  - Сигнал на продажу возникает, когда EMA(6) пересекает EMA(12) сверху вниз. Если позиции нет, открывается короткая.
- **Выход**
  - При включённом параметре `UseCloseSignals` (по умолчанию) текущая позиция закрывается при противоположном пересечении. После закрытия стратегия ждёт следующего пересечения, что соответствует поведению оригинального эксперта.
  - Необязательные уровни тейк-профита и трейлинг-стопа управляются через `StartProtection` из StockSharp.
- **Размер позиции**
  - Объём ордера определяется параметром `OrderVolume` (по умолчанию 1 лот) и приводится к допустимому значению инструмента перед отправкой.

## Управление рисками

- **Трейлинг-стоп**: переводит исходный параметр "points" в шаг цены. Если значение больше нуля, стоп автоматически подтягивается вслед за прибылью.
- **Тейк-профит**: указывается в шагах цены. Ноль отключает ограничение прибыли.
- Стратегия не усредняется и не накапливает несколько позиций — на инструмент открывается только одна позиция.

## Параметры

| Параметр | Описание |
|----------|----------|
| `CandleType` | Таймфрейм свечей и индикаторов (по умолчанию 1 час). |
| `OrderVolume` | Торговый объём в лотах. |
| `ShortEmaLength` | Период быстрой EMA (значение 6 по умолчанию). |
| `LongEmaLength` | Период медленной EMA (значение 12 по умолчанию). |
| `UseCloseSignals` | Закрывать позицию при противоположном пересечении (включено по умолчанию). |
| `TrailingStopSteps` | Дистанция трейлинг-стопа в шагах цены, 0 — отключён. |
| `TakeProfitSteps` | Дистанция тейк-профита в шагах цены, 0 — отключён. |

## Дополнительные замечания

- Сигналы обрабатываются только на завершённых свечах, чтобы исключить шум внутри бара.
- После выхода из позиции предыдущие значения EMA сбрасываются, что предотвращает ложные повторные срабатывания.
- Комментарии в коде написаны на английском языке, а для отступов используются табуляции согласно правилам репозитория.

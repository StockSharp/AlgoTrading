# Стратегия Alligator Trend
[English](README.md) | [中文](README_cn.md)

Стратегия воспроизводит классическую систему Билла Вильямса Alligator из оригинального скрипта MetaTrader (`Alligator.mq5`). Используются три сглаженные скользящие средние, построенные по медианной цене и сдвинутые вперёд, чтобы отразить фазу рынка. Длинная позиция открывается, когда быстрая линия Губ находится выше Зубов, а Зубы — выше Челюсти. Короткая позиция открывается при обратном расположении линий. Одновременно допускается только одна позиция.

После входа позиция защищается стоп-лоссом и тейк-профитом, заданными в пунктах. Когда цена проходит в прибыльную сторону расстояние нулевого уровня, стоп переносится в безубыток. Далее включается трейлинг-стоп, который следует за максимальным максимумом (для покупок) или минимальным минимумом (для продаж) с минимальным шагом обновления, чтобы избежать частых модификаций. Позиция закрывается при срабатывании стоп-лосса, трейлинг-стопа или тейк-профита.

Параметры по умолчанию рассчитаны на 30-минутные свечи и форексные пункты, однако их можно оптимизировать под другие рынки. Поскольку исходная MQL-версия использует брокерские правила округления, конвертация опирается на `PriceStep` инструмента для перевода пунктов в абсолютные цены.

## Торговые правила

### Вход
- **Покупка**: Нет открытых позиций и выполняется условие `Lips > Teeth > Jaw` на последней завершённой свече.
- **Продажа**: Нет открытых позиций и выполняется условие `Lips < Teeth < Jaw` на последней завершённой свече.

### Выход и управление рисками
- **Начальный стоп**: Устанавливается на `StopLossPips` ниже (для лонга) или выше (для шорта) цены открытия.
- **Тейк-профит**: Устанавливается на расстоянии `TakeProfitPips` от цены входа.
- **Нулевой уровень**: При движении цены на `ZeroLevelPips` в прибыль стоп переносится на цену входа.
- **Трейлинг-стоп**: После активации нулевого уровня стоп следует за экстремумом на расстоянии `TrailingStopPips`, обновляясь только при улучшении не менее `TrailingStepPips`.
- Позиция закрывается сразу, как только свечные данные пересекают стоп или тейк-профит.

## Параметры

| Параметр | Значение по умолчанию | Описание |
|----------|-----------------------|----------|
| `CandleType` | Таймфрейм 30 минут | Свечная серия для расчёта индикатора и сигналов. |
| `JawLength` | 13 | Период сглаженной скользящей средней для линии челюсти. |
| `TeethLength` | 8 | Период сглаженной скользящей средней для линии зубов. |
| `LipsLength` | 5 | Период сглаженной скользящей средней для линии губ. |
| `JawShift` | 8 | Сдвиг линии челюсти вперёд в барах. |
| `TeethShift` | 5 | Сдвиг линии зубов вперёд в барах. |
| `LipsShift` | 3 | Сдвиг линии губ вперёд в барах. |
| `EnableLong` | `true` | Разрешить или запретить длинные сделки. |
| `EnableShort` | `true` | Разрешить или запретить короткие сделки. |
| `StopLossPips` | 45 | Расстояние стоп-лосса от цены входа в пунктах. |
| `TakeProfitPips` | 145 | Расстояние тейк-профита от цены входа в пунктах. |
| `ZeroLevelPips` | 30 | Движение в пунктах, необходимое для переноса стопа в безубыток. |
| `TrailingStopPips` | 50 | Расстояние между текущим экстремумом и трейлинг-стопом. |
| `TrailingStepPips` | 10 | Минимальное улучшение в пунктах перед обновлением трейлинг-стопа. |

## Примечания

- Индикатор Alligator рассчитывается по медианной цене `(High + Low) / 2`, как в оригинале MetaTrader.
- Значения сдвинутых линий эмулируются внутренними буферами, что позволяет сравнивать те же данные, что и в исходном советнике.
- Предполагается, что сделка исполняется до обработки следующего сигнала на той же свече, что соответствует пошаговому выполнению исходного эксперта.
- Рекомендуется оптимизировать размеры пунктов под шаг цены и волатильность выбранного инструмента.

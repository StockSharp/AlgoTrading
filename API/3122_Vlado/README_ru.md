# Стратегия Vlado
[English](README.md) | [中文](README_cn.md)

Импульсно-mean-reversion стратегия, основанная на классическом осцилляторе Larry Williams %R. Система отслеживает экстремальны
е отрицательные значения индикатора и после закрытия свечи открывает или переворачивает позицию. Порт StockSharp сохраняет лог
ику оригинального советника MetaTrader и позволяет гибко менять каждый ключевой параметр.

## Общая информация

- **Категория**: контртрендовая работа с осциллятором.
- **Рынки**: любые ликвидные инструменты с устойчивыми свечами (валюты, индексы, фьючерсы, крипто-пары).
- **Таймфрейм**: задаётся параметром `CandleType`, по умолчанию используются часовые свечи как в оригинале.
- **Направление**: длинные и короткие позиции, одновременно открыта только одна позиция.
- **Индикатор**: Williams %R с настраиваемым периодом и уровнями перекупленности/перепроданности.

## Логика работы

1. Подписывается на поток выбранных свечей и считает Williams %R по закрытиям.
2. Базовые уровни: -75 для перепроданности и -25 для перекупленности (значения отрицательные в шкале %R).
3. После закрытия свечи, когда %R <= OversoldLevel, стратегия покупает или разворачивается из шорта в лонг.
4. Когда %R >= OverboughtLevel, стратегия продаёт или разворачивается из лонга в шорт.
5. Объём заявки равен `Volume + Math.Abs(Position)`, что позволяет одним ордером закрыть предыдущую позицию и открыть новую.
6. Явных стопов и тейков нет — контроль риска осуществляется через выбор уровней и таймфрейма.
7. Каждое действие фиксируется через `LogInfo`, что облегчает аудит сделок в интерфейсе StockSharp.

## Параметры

- `WilliamsPeriod` — длина расчёта осциллятора. Чем больше значение, тем сглаженнее сигнал.
- `OverboughtLevel` — уровень перекупленности (по умолчанию -25). Доступен для оптимизации.
- `OversoldLevel` — уровень перепроданности (по умолчанию -75). Доступен для оптимизации.
- `CandleType` — тип и таймфрейм свечей. Поддерживаются временные, объёмные и диапазонные свечи.
- `Volume` (унаследовано) — базовый торговый объём. Настраивается под размер счёта и допустимый риск.

## Правила торговли

- **Вход в лонг**: `%R <= OversoldLevel` и позиция отсутствует либо открыта в шорт.
- **Вход в шорт**: `%R >= OverboughtLevel` и позиция отсутствует либо открыта в лонг.
- **Выход**: осуществляется автоматически при появлении обратного сигнала (переворот).
- **Управление позицией**: стратегия не усредняет и не добавляет дополнительные ордера.

## Дополнительные рекомендации

- Наиболее эффективно в боковике или медленном тренде, где осциллятор регулярно переходит из зоны в зону.
- Для реальной торговли стоит добавить внешние фильтры (ограничение сессии, контроль просадки, общие стопы по капиталу).
- Визуализация включает график цен со сделками и отдельную панель Williams %R.
- Все параметры отмечены для оптимизации и могут исследоваться в оптимизаторе StockSharp.

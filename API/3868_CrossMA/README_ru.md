# Стратегия Cross MA ATR Notification
[English](README.md) | [中文](README_cn.md)

## Обзор
Эта стратегия является портом эксперта MetaTrader 4 «CrossMA» на платформу StockSharp. Торговля ведётся по пересечению двух простых скользящих средних, а каждая сделка защищается стоп-лоссом, рассчитанным по индикатору Average True Range (ATR). Вместо отправки e-mail уведомлений стратегия записывает подробные сообщения в журнал.

## Логика торговли
1. Стратегия подписывается на выбранную серию свечей и рассчитывает быструю и медленную SMA, а также ATR.
2. Когда быстрая SMA пересекает медленную снизу вверх, закрываются короткие позиции и открывается длинная позиция. Стоп-лосс устанавливается на расстоянии одного ATR ниже цены входа.
3. Когда быстрая SMA пересекает медленную сверху вниз, закрываются длинные позиции и открывается короткая позиция. Стоп-лосс устанавливается на расстоянии одного ATR выше цены входа.
4. На каждой завершённой свече проверяется достижение стоп-цены. Если цена касается стопа, позиция немедленно закрывается по рынку.

## Управление рисками
- Размер позиции вычисляется из стоимости портфеля и параметра `Maximum Risk`. Если данные о капитале недоступны, используется значение `Base Volume`.
- После двух и более подряд убыточных сделок объём уменьшается пропорционально параметру `Decrease Factor`, что повторяет поведение оригинального советника.
- Объёмы нормализуются по шагу объёма инструмента, чтобы заявки имели допустимый размер.

## Уведомления
Вместо писем стратегия записывает в журнал информативные сообщения о каждом открытии и закрытии позиции по сигналу или стопу. При необходимости логирование можно отключить параметром `Enable Notifications`.

## Параметры
- **Candle Type** – тип свечей для расчёта индикаторов.
- **Fast SMA Period** – период быстрой скользящей средней (по умолчанию 4).
- **Slow SMA Period** – период медленной скользящей средней (по умолчанию 12).
- **ATR Period** – количество свечей для расчёта ATR (по умолчанию 6).
- **Base Volume** – минимальный объём сделки при отсутствии данных о риске (по умолчанию 0.1).
- **Maximum Risk** – доля капитала, выделяемая на одну сделку (по умолчанию 0.02).
- **Decrease Factor** – уменьшение объёма после серии убыточных сделок (по умолчанию 3).
- **Enable Notifications** – включает журналирование торговых событий.

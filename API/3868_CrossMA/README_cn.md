# Cross MA ATR Notification 策略
[English](README.md) | [Русский](README_ru.md)

## 概述
本策略是 MetaTrader 4 «CrossMA» 专家的 StockSharp 版本。策略基于快慢简单移动平均线的交叉进行交易，并使用平均真实波幅（ATR）计算止损距离。与原版发送电子邮件不同，本实现会在触发交易动作时写入详细日志。

## 交易逻辑
1. 订阅所选的蜡烛序列，同时计算快慢两条 SMA 以及 ATR。
2. 当快线从下向上穿越慢线时，策略先平掉所有空头，再开多头，并将止损放在入场价下方一个 ATR 的位置。
3. 当快线从上向下穿越慢线时，策略先平掉所有多头，再开空头，并将止损放在入场价上方一个 ATR 的位置。
4. 每根完成的蜡烛都会检查止损价位，一旦价格触及止损便立即按市价平仓。

## 风险控制
- 仓位大小根据账户权益与 `Maximum Risk` 参数计算；若无法获得权益数据，则使用 `Base Volume` 作为最小交易量。
- 当出现两次或以上连续亏损时，依据 `Decrease Factor` 参数按比例降低下笔交易的仓位，复现原版 EA 的资金管理逻辑。
- 所有成交量都会按照品种的最小成交步长进行规范化，确保委托有效。

## 通知
策略不会发送邮件，而是在每次根据信号或止损开平仓时写入清晰的日志信息。可通过 `Enable Notifications` 参数关闭这些日志。

## 参数
- **Candle Type** – 用于指标计算的蜡烛类型。
- **Fast SMA Period** – 快速移动平均线周期（默认 4）。
- **Slow SMA Period** – 慢速移动平均线周期（默认 12）。
- **ATR Period** – ATR 计算使用的蜡烛数量（默认 6）。
- **Base Volume** – 在无法计算风险时使用的最小交易量（默认 0.1）。
- **Maximum Risk** – 每笔交易占用的权益比例（默认 0.02）。
- **Decrease Factor** – 连续亏损后减少仓位的系数（默认 3）。
- **Enable Notifications** – 是否记录交易动作日志。

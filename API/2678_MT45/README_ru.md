# Стратегия MT45

## Общее описание
MT45 — это точная конвертация одноимённого советника MetaTrader. Алгоритм чередует длинные и короткие рыночные позиции на каждой завершённой свече, а также прикрепляет стоп-лосс и тейк-профит с теми же фиксированными расстояниями, что и в MQL-версии. Размер позиции управляется по принципу мартингейла: после убыточной сделки объём следующей заявки увеличивается, но при превышении лимита возвращается к базовому значению.

## Логика торговли
1. Стратегия подписывается на единственный поток свечей, задаваемый параметром **Candle Type**, и ждёт появления финальных свечей, чтобы исключить шум внутри бара.
2. Когда позиции нет и предыдущая заявка полностью обработана, стратегия отправляет рыночный ордер в сторону, запланированную для текущего шага (покупка, затем продажа, далее снова покупка и т.д.).
3. Направление переключается только после фактического исполнения ордера, поэтому последовательность сделок полностью повторяет оригинальный MQL-советник.
4. Выход из позиции происходит через `StartProtection`: автоматически создаются стоп-лосс и тейк-профит, и сделка закрывается при достижении одного из уровней.

## Управление объёмом
* **Base Volume** задаёт исходный лот и восстанавливается после прибыльной или безубыточной сделки.
* После убытка объём следующей сделки умножается на **Martingale Multiplier**. Если полученное значение превышает **Max Volume**, стратегия возвращается к базовому объёму, чтобы ограничить рост риска.
* Результат сделки определяется сравнением цены выхода с сохранённой ценой входа, что повторяет функцию `Lot()` в исходном коде.

## Управление риском
* **Stop Points** и **Take Points** задаются в шагах цены, аналогично использованию `_Point` в MetaTrader. Перед запуском защиты значения переводятся в абсолютные ценовые расстояния с учётом `PriceStep` инструмента.
* Защитные ордера создаются автоматически как для длинных, так и для коротких позиций и всегда ставятся симметрично.

## Параметры
| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| Stop Points | Расстояние до стоп-лосса в шагах цены. | 600 |
| Take Points | Расстояние до тейк-профита в шагах цены. | 700 |
| Base Volume | Базовый объём сделки после прибыли. | 0.01 |
| Martingale Multiplier | Множитель объёма после убытка. | 2 |
| Max Volume | Максимально допустимый объём при мартингейле. | 10 |
| Candle Type | Тип свечей для формирования сигналов (по умолчанию 1 минута). | 1 минута |

## Практические рекомендации
* Выберите таймфрейм свечей, соответствующий графику, на котором запускался оригинальный советник, — стратегия работает только по закрытию свечей.
* Новая заявка не отправляется, пока открыта позиция или есть необработанный ордер; алгоритм ждёт закрытия текущей сделки по стопу или тейку.
* В соответствии с требованиями проекта Python-реализация и папка для неё не создавались.

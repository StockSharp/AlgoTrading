# 大阳线声音策略

## 概述
**大阳线声音策略** 复刻了 MetaTrader 专家顾问 “BigBarSound” 的核心功能。策略会监控指定周期的已完成K线，当K线的波动幅度达到设定阈值时，就会给出提示。由于 StockSharp 是跨平台环境，策略不会直接播放音频文件，而是写入详细的日志信息，方便将其转发到任何受支持的通知系统。

本策略仅用于提示，不会提交委托或管理持仓，可作为更大交易流程中的辅助告警模块。

## 工作原理
1. 策略按照 **K线类型** 参数订阅相应的K线序列。
2. 对于每根收盘的K线，根据所选的 **差值模式** 计算K线大小：
   - **OpenClose** – 取收盘价与开盘价的绝对差。
   - **HighLow** – 取最高价与最低价之间的绝对差。
3. 将得到的数值与 **点数阈值** 乘以标的物的 `PriceStep` 比较。当K线范围大于或等于阈值时，策略会记录一条模拟播放声音的日志。
4. 如果启用了 **显示提醒**，则会额外写入一条醒目的提示日志，用于模拟 MQL 版本中的 `Alert` 弹窗。

策略只处理收盘后的K线，因此每根K线最多触发一次，与原始MQL脚本的一次性触发逻辑一致。

## 参数说明
- **Point Threshold (`BarPoint`)** – 触发提示所需的最小点数，单位为价格跳动数。默认值 200 与原始脚本一致，并提供 50–500（步长50）的优化区间。
- **Difference Mode (`DifferenceMode`)** – 指定如何衡量K线大小，可选开收盘差值或最高最低范围。
- **Sound File (`SoundFile`)** – 需要播放的 WAV 文件名称。策略只会在日志中引用该名称，以模拟 MetaTrader 的 `PlaySound` 调用。
- **Show Alert (`ShowAlert`)** – 若为 true，除了常规日志外还会写入额外的提醒信息。
- **Candle Type (`CandleType`)** – 需要订阅的K线类型（时间框架），默认使用1分钟K线。

## 日志与提醒
策略通过 `LogInfo` 记录“播放声音”信息，并使用 `AddInfoLog` 输出额外提醒。日志中包含交易品种、K线时间以及实际测得的K线大小，便于在 StockSharp 的日志查看器或其他通知通道中使用。

若经纪商未提供有效的 `PriceStep`，策略会使用 1 作为后备值。此时应根据实际最小跳动幅度调整 **Point Threshold** 以保持正确的触发条件。

## 使用建议
- 将策略附加到任何能够提供K线数据的标的，外汇、期货、股票或加密资产均可。
- 可以订阅策略的日志输出，或继承类并在触发时执行自定义操作，从而与其他交易系统协同工作。
- 策略不生成订单，因此 `Volume` 等仓位参数不会起作用。
- 如需播放真实的提示音，可将 StockSharp 日志连接到声音通知器，或自行扩展代码调用操作系统的音频接口。

## 与原始MQL脚本的差异
- 原脚本基于逐笔数据并手动检测新K线；本移植版本直接处理已收盘的K线，无需额外的触发标志即可保证每根K线只提示一次。
- 播放声音的逻辑被日志消息取代，使策略能够在不同操作系统上保持一致的行为。
- 参数名称遵循 StockSharp 的惯例，但其含义与原脚本完全一致：点数阈值、测量方式、可选提醒以及声音文件名。

## 依赖
策略不依赖额外指标，只需确保所选的 `CandleType` 能够从连接的数据源中获得对应的K线。

# MALR 渠道突破策略

该策略交易自定义 MALR（移动平均线线性回归）渠道的突破。MALR 指标结合简单移动平均线和线性加权移动平均线形成中心线，价格相对于该线的标准差形成外部通道。

当上轨从上方跌破收盘价时，认为向上突破并开多仓；当下轨从下方突破收盘价时，认为向下突破并开空仓。

## 参数

- `MaPeriod` – 移动平均和标准差的周期。
- `ChannelReversal` – 内部 MALR 通道的宽度（标准差倍数）。
- `ChannelBreakout` – 外部突破通道的附加宽度。
- `CandleType` – 计算所使用的 K 线类型。

## 工作原理

1. 计算收盘价的 SMA 和 LWMA。
2. 计算 MALR 线 `FF = 3 * LWMA - 2 * SMA`。
3. 在相同周期内测量 `close - FF` 的标准差。
4. 得到突破边界：`FF ± StdDev * (ChannelReversal + ChannelBreakout)`。
5. 当上轨从上向下穿过收盘价时开多仓。
6. 当下轨从下向上穿过收盘价时开空仓。

在开新仓前策略会平掉相反方向的仓位。


# Стратегия VR Setka 3

**VR Setka 3** реализует сеточный подход к торговле. Стратегия выставляет симметричные buy limit и sell limit заявки относительно текущей цены. После исполнения заявки уровень Take Profit пересчитывается исходя из средней цены всех позиций в активном направлении. Новые сеточные заявки размещаются с увеличивающимся шагом и, при необходимости, с увеличением объема по принципу мартингейла.

## Параметры
- **Start Offset** – начальное смещение от текущей цены для первой пары лимитных заявок.
- **Take Profit** – расстояние от средней цены входа, при достижении которого позиции закрываются с прибылью.
- **Grid Distance** – базовый шаг между уровнями сетки.
- **Step Distance** – дополнительный шаг для каждого следующего уровня.
- **Use Martingale** – при включении объем каждой новой заявки увеличивается с использованием множителя.
- **Martingale Multiplier** – коэффициент увеличения объема в режиме мартингейла.
- **Volume** – базовый объем первой заявки.
- **Candle Type** – тип свечей, используемый для синхронизации работы стратегии.

## Алгоритм
1. При запуске стратегия выставляет **buy limit** ниже и **sell limit** выше текущей цены.
2. После исполнения одной из заявок противоположная заявка отменяется.
3. Уровень Take Profit пересчитывается как средняя цена входа ± *Take Profit*.
4. При движении цены против позиции новая лимитная заявка размещается на расстоянии **Grid Distance + Step Distance × уровень** от средней цены. При включенном мартингейле объем увеличивается.
5. Когда цена достигает уровня Take Profit, все позиции в этом направлении закрываются, сетка сбрасывается.

## Примечания
- Стратегия не удерживает позиции в обоих направлениях одновременно.
- Использование мартингейла может быстро увеличить размер позиции, необходимо учитывать риски.
- Подходит для любых инструментов, поддерживаемых StockSharp, при наличии выбранного типа свечей.

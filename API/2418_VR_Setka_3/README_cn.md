# VR Setka 3 策略

**VR Setka 3 策略** 采用网格交易方法，在当前价格上下对称地放置买入和卖出限价单。订单成交后，根据当前方向所有持仓的平均价格重新计算止盈水平。新的网格订单会以更大的间距下单，并可选择性地增加手数（马丁格尔）。

## 参数
- **Start Offset** – 首次放置买卖限价单距离当前价格的偏移量。
- **Take Profit** – 从平均建仓价计算的获利平仓距离。
- **Grid Distance** – 网格层之间的基础间距。
- **Step Distance** – 每增加一层所附加的额外间距。
- **Use Martingale** – 启用后，每层新的网格订单按乘数放大手数。
- **Martingale Multiplier** – 马丁格尔模式下的手数乘数。
- **Volume** – 第一层订单的基础手数。
- **Candle Type** – 用于同步策略操作的K线周期。

## 算法
1. 启动时，在当前价格下方放置买入限价单，在上方放置卖出限价单。
2. 一旦某一方向成交，另一方向的订单会被取消。
3. 根据平均建仓价 ± *Take Profit* 计算新的统一止盈价位。
4. 若价格向持仓不利方向移动，则在距离平均价 **Grid Distance + Step Distance × 层数** 的位置放置新的限价单。若启用马丁格尔，手数会相应增加。
5. 当价格触及止盈价位时，平掉该方向所有持仓并重置网格。

## 注意事项
- 策略不会同时在两个方向持仓。
- 马丁格尔会迅速扩大仓位，需谨慎控制风险。
- 只要所选 K 线类型可用，策略可应用于 StockSharp 支持的任意品种。

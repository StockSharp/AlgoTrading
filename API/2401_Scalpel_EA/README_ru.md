# Стратегия Scalpel EA

Упрощённая реализация оригинальной стратегии *Scalpel EA* для MetaTrader.
Стратегия использует индикатор CCI на основном таймфрейме и подтверждение
пробоя на трёх старших таймфреймах.

## Логика

1. **Индикатор** – CCI рассчитывается на основном таймфрейме. Торговля
   разрешена только при значениях индикатора вблизи нуля в пределах заданного
   диапазона.
2. **Подтверждение тренда** – сравниваются максимумы и минимумы последних
   свечей на таймфреймах 30 минут, 1 час и 4 часа.
   - Для входа в покупку минимумы всех трёх таймфреймов должны повышаться.
   - Для входа в продажу максимумы всех трёх таймфреймов должны понижаться.
3. **Пробой** – сделка открывается при пробое закрытием предыдущего
   максимума (для лонга) или минимума (для шорта) на основном таймфрейме.
4. **Управление риском** – `StartProtection` устанавливает фиксированные
   тейк‑профит и стоп‑лосс в ценовых единицах.

## Параметры

| Имя | Описание |
| --- | -------- |
| `CciPeriod` | Период индикатора CCI. |
| `CciLimit` | Абсолютный порог CCI. Входы разрешены только внутри ±порога. |
| `TakeProfit` | Значение тейк‑профита в ценовых единицах. |
| `StopLoss` | Значение стоп‑лосса в ценовых единицах. |
| `CandleType` | Основной таймфрейм (по умолчанию 1 минута). |

## Примечания

- Дополнительно подписываются свечи 30m, 1h и 4h для оценки тренда.
- Объём берётся из свойства `Strategy.Volume` базового класса.
- В один момент времени открыта только одна позиция. Противоположный сигнал
  закрывает текущую позицию и открывает новую.

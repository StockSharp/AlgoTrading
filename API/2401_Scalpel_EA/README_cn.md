# Scalpel EA 策略

该策略是原始 MetaTrader 版本 *Scalpel EA* 的简化移植。
策略通过在主时间框架上使用商品通道指数（CCI）并结合
多个更高时间框架的突破确认来进行交易。

## 逻辑

1. **指标** – 在主时间框架上计算 CCI，仅当 CCI 处于
   可配置的零值附近区间时才允许交易。
2. **趋势确认** – 对 30 分钟、1 小时和 4 小时的最新蜡烛
   高低点与前一根蜡烛比较：
   - 做多需要三个时间框架的低点逐步抬高；
   - 做空需要三个时间框架的高点逐步降低。
3. **突破入场** – 当主蜡烛的收盘价突破上一根蜡烛的
   高点（做多）或低点（做空）时触发交易。
4. **风险控制** – 通过 `StartProtection` 设定固定的
   止盈和止损，单位为价格。

## 参数

| 名称 | 说明 |
| ---- | ---- |
| `CciPeriod` | CCI 指标周期。 |
| `CciLimit` | CCI 绝对阈值，仅在 ±阈值内允许进场。 |
| `TakeProfit` | 以价格单位表示的止盈。 |
| `StopLoss` | 以价格单位表示的止损。 |
| `CandleType` | 主交易时间框架，默认为 1 分钟。 |

## 备注

- 策略会额外订阅 30 分钟、1 小时和 4 小时的蜡烛，以评估更高时间框架趋势。
- 交易量使用基类 `Strategy.Volume` 属性。
- 同一时间只会持有一个仓位，反向信号会平掉当前仓位并开立新仓。

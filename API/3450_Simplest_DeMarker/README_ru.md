# Стратегия Simplest DeMarker

## Обзор
Стратегия Simplest DeMarker повторяет логику исходного советника MetaTrader. Она отслеживает осциллятор DeMarker, чтобы определить моменты выхода цены из зон перекупленности и перепроданности. Когда индикатор возвращается в нейтральную область, стратегия открывает позицию в направлении ожидаемого разворота и управляет рисками с помощью настраиваемых уровней стоп-лосса и тейк-профита.

## Основная логика
1. Подписаться на свечи выбранного таймфрейма и рассчитать индикатор DeMarker с заданным периодом.
2. Помечать состояние рынка как **перекупленное**, если предыдущее значение DeMarker выше порога перекупленности, и как **перепроданное**, если оно ниже порога перепроданности.
3. Формировать сигналы при возврате индикатора в нейтральную зону:
   - Продажа, если текущий DeMarker опускается ниже уровня перекупленности после нахождения выше него.
   - Покупка, если текущий DeMarker поднимается выше уровня перепроданности после нахождения ниже него.
4. Одновременно открывается только одна позиция. При включенном параметре `Trade On Bar Open` заявка отправляется на открытии следующей свечи, иначе вход выполняется сразу после закрытия текущей свечи.
5. Стоп-лосс и тейк-профит выставляются через сервис `StartProtection`, что соответствует фиксированным дистанциям из версии на MQL.

## Параметры
- **Volume** – объем сделки в лотах/контрактах.
- **DeMarker Period** – период расчета индикатора DeMarker.
- **Overbought Level** – верхний порог, определяющий зону перекупленности.
- **Oversold Level** – нижний порог, определяющий зону перепроданности.
- **Trade On Bar Open** – при включении вход выполняется на открытии следующей свечи.
- **Stop Loss Points** – расстояние стоп-лосса в ценовых пунктах.
- **Take Profit Points** – расстояние тейк-профита в ценовых пунктах.
- **Candle Type** – тип свечей (таймфрейм), используемый для расчетов.

## Управление рисками
- Защита позиции активируется автоматически через `StartProtection`, дистанции переводятся в ценовые пункты.
- В один момент времени удерживается не более одной позиции; новые сигналы игнорируются при открытой позиции.

## Элементы графика
- Свечи по выбранному типу данных.
- Линия индикатора DeMarker.
- Маркеры собственных сделок для визуальной проверки входов и выходов.

## Примечания
- Рекомендуется использовать инструменты с достаточной ликвидностью для корректного исполнения стопов и тейк-профитов.
- Параметр `Trade On Bar Open` приближенно повторяет поведение оригинального советника, ожидающего формирования новой свечи перед отправкой заявки.

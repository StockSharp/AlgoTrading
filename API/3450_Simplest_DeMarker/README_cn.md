# Simplest DeMarker 策略

## 概述
Simplest DeMarker 策略复刻了原始 MetaTrader 智能交易系统的逻辑。它监测 DeMarker 振荡指标，以判断价格动量是否离开超买或超卖区域。当指标重新回到中性区间时，策略按照预期的反转方向建立仓位，并通过可配置的止损和止盈距离来控制风险。

## 核心逻辑
1. 订阅所选周期的K线，并使用设定的周期计算 DeMarker 指标。
2. 当上一根 DeMarker 值高于超买阈值时标记为**超买**，当低于超卖阈值时标记为**超卖**。
3. 当指标重新回到中性区间时产生信号：
   - 若指标从超买区间下穿阈值，则开空。
   - 若指标从超卖区间上穿阈值，则开多。
4. 同一时间仅持有一笔仓位。启用 `Trade On Bar Open` 参数时，订单会延迟到下一根K线开盘发送；否则在当前K线收盘后立即入场。
5. 通过 `StartProtection` 服务设置止损和止盈，以模拟 MQL 版本中的固定距离。

## 参数
- **Volume** – 订单手数/合约数量。
- **DeMarker Period** – DeMarker 指标周期。
- **Overbought Level** – 判定超买区域的上限阈值。
- **Oversold Level** – 判定超卖区域的下限阈值。
- **Trade On Bar Open** – 若启用，则在下一根K线开盘时入场。
- **Stop Loss Points** – 止损距离（价格点）。
- **Take Profit Points** – 止盈距离（价格点）。
- **Candle Type** – 用于计算的K线类型/周期。

## 风险控制
- 使用 `StartProtection` 自动注册止损和止盈，将距离转换为价格点。
- 任意时刻仅保留一笔仓位，存在持仓时会忽略新的信号。

## 图表元素
- 所订阅数据的价格K线。
- DeMarker 指标曲线。
- 自有交易标记，用于验证进出场位置。

## 备注
- 建议选择流动性较好的交易品种，以保证止损和止盈的执行质量。
- `Trade On Bar Open` 参数用于近似还原原始智能交易系统在新K线出现时入场的行为。

# MA2 CCI
[English](README.md) | [中文](README_cn.md)

Стратегия использует два экспоненциальных скользящих средних и подтверждение от индикатора CCI, который должен пробить нулевую линию в ту же сторону, что и пересечение средних. Размер позиции и фиксированный стоп-лосс рассчитываются по текущей волатильности через ATR и долю капитала, заложенную в параметре риска.

## Подробности

- **Данные**: Свечи выбранного типа (по умолчанию часовые) через параметр `CandleType`.
- **Вход**: Покупка, когда быстрая EMA пересекает медленную снизу вверх и CCI на этой же свече поднимается выше нуля. Продажа — при обратном пересечении и уходе CCI ниже нуля.
- **Выход**: Закрытие длинных позиций при обратном пересечении EMA или достижении защитного стопа. Короткие позиции закрываются при бычьем пересечении EMA либо попадании цены в стоп для шорта.
- **Риск**: Дистанция стопа равна максимуму между значением ATR (период `AtrPeriod`) и `MinStopPoints`, умноженным на шаг цены инструмента. Объём сделки равен произведению текущей стоимости портфеля на `RiskPercent`, делённому на указанную дистанцию.
- **Инструменты**: Лучше всего работают трендовые валютные пары и индексы, где исходная версия под MetaTrader применялась в режиме хеджирования. Стратегию можно адаптировать и к другим активам с устойчивыми импульсами.
- **Торговая среда**: Непрерывные рынки с достаточной ликвидностью, где сигналы EMA/CCI сопровождаются умеренной волатильностью ATR.

## Параметры

- `CandleType` — таймфрейм и тип свечей для расчётов.
- `FastMaPeriod` — период быстрой EMA (по умолчанию 10).
- `SlowMaPeriod` — период медленной EMA (по умолчанию 37).
- `CciPeriod` — длина расчёта индикатора CCI (по умолчанию 39).
- `AtrPeriod` — период ATR для оценки волатильности и постановки стопа (по умолчанию 3).
- `RiskPercent` — доля капитала, которую стратегия готова рискнуть в одной сделке (по умолчанию 2%).
- `MinStopPoints` — минимальная дистанция стопа в шагах цены, аналог фильтра в оригинальном советнике (по умолчанию 15).

## Дополнительно

- Стоп фиксируется при входе и не подтягивается, что сохраняет профиль риска, реализованный в MQL-версии.
- Если торговый счёт не предоставляет актуальную стоимость портфеля, алгоритм использует параметр `Volume` или минимально допустимый объём инструмента.
- Для повышения стабильности рекомендуется избегать периодов низкой ликвидности, когда пересечения EMA могут давать ложные сигналы.

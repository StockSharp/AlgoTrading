# Стратегия Ichimoku Momentum MACD

## Кратко
- **Тип**: трендовая стратегия с подтверждением по импульсу.
- **Таймфрейм**: настраиваемый (по умолчанию 15-минутные свечи).
- **Индикаторы**: Ichimoku (Tenkan/Kijun), линейные взвешенные средние, Momentum, MACD.
- **Стопы**: опциональный тейк-профит и стоп-лосс в пунктах через `StartProtection`.

## Описание стратегии
Стратегия воспроизводит логику эксперта MetaTrader «Ichimoku» (каталог `MQL/23469`). Все расчёты выполняются на закрытии
предыдущей свечи, а сделки открываются в начале следующей при одновременном выполнении четырёх условий:

1. **Выравнивание Ichimoku** — для покупок Tenkan должен быть выше Kijun, для продаж — ниже.
2. **Трендовый фильтр LWMA** — быстрая линейная взвешенная средняя должна располагаться выше (для лонга) или ниже (для шорта)
   медленной.
3. **Сила импульса** — абсолютное отклонение индикатора Momentum от уровня 100 должно превышать заданный порог хотя бы на одной
   из трёх последних свечей.
4. **Подтверждение MACD** — линия MACD должна находиться по ту же сторону от нуля, что и сигнал, и располагаться дальше от него
   в сторону сделки.

Если все фильтры дают бычий сигнал и открытых лонгов нет, стратегия покупает заданный объём (закрывая при необходимости шорты).
При медвежьем наборе условий выполняется зеркальная продажа. Противоположный сигнал закрывает текущую позицию, поэтому даже без
защитных ордеров присутствует чёткое правило выхода.

Риск-менеджмент реализован через `StartProtection`: можно задать фиксированные расстояния для тейк-профита и стоп-лосса в пунктах,
значение 0 отключает соответствующий уровень.

## Параметры
| Параметр | Описание |
|----------|----------|
| `FastMaPeriod` | Длина быстрой линейной взвешенной средней. |
| `SlowMaPeriod` | Длина медленной линейной взвешенной средней. |
| `MomentumPeriod` | Период расчёта индикатора Momentum. |
| `MomentumThreshold` | Минимальное отклонение Momentum от 100 на одной из трёх последних свечей. |
| `MacdFastPeriod` | Период быстрой EMA в MACD. |
| `MacdSlowPeriod` | Период медленной EMA в MACD. |
| `MacdSignalPeriod` | Период сигнальной EMA в MACD. |
| `TenkanPeriod` | Длина Tenkan-sen индикатора Ichimoku. |
| `KijunPeriod` | Длина Kijun-sen. |
| `SenkouSpanBPeriod` | Длина Senkou Span B. |
| `TakeProfitPoints` | Тейк-профит в пунктах (0 — отключен). |
| `StopLossPoints` | Стоп-лосс в пунктах (0 — отключен). |
| `CandleType` | Таймфрейм, используемый во всех расчётах. |

## Рекомендации по использованию
- Обработка ведётся только по закрытым свечам, что соответствует логике `shift=1` исходного советника.
- Масштаб индикатора Momentum зависит от инструмента, поэтому при смене рынка корректируйте `MomentumThreshold`.
- Защитные ордера не выставляются на биржу, управление ведётся внутри стратегии.
- При доступности графика отображаются свечи цены, обе LWMA, облако Ichimoku и сделки.

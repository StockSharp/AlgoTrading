# Стратегия Alexav SpeedUp M1

## Обзор
- Конвертация советника "Alexav SpeedUp M1" из MetaTrader 5 на высокоуровневый API StockSharp.
- По умолчанию работает на минутных свечах и реагирует на аномально большие тела свечей.
- Держит только одну нетто-позицию: входит по направлению сильной свечи и управляет сделкой фиксированным стоп-лоссом, тейк-профитом и ступенчатым трейлинг-стопом.
- Все параметры задаются в пунктах (pip), стратегия автоматически переводит их в абсолютные значения с учётом минимального шага цены и точности инструмента.

## Отличия от оригинала
- Оригинальный советник рассчитывает на хеджинговый режим и открывает buy и sell одновременно. В StockSharp используется неттинговый режим, поэтому данная реализация открывает только одну позицию и следует направлению свечи с большим телом.
- Логика трейлинг-стопа полностью повторяет MT5: стоп смещается только после прохождения `TrailingStop + TrailingStep` пунктов и обновляется не чаще, чем на один шаг `TrailingStep`.
- Пересчёт пунктов в цену выполняется через умножение на тик. Для инструментов с 3 или 5 знаками после запятой тик дополнительно умножается на 10, как и в MT5.

## Правила входа
1. Обрабатываются только завершённые свечи выбранного таймфрейма (по умолчанию 1 минута).
2. Вычисляется тело свечи: `abs(Close - Open)`.
3. Если тело больше `MinimumBodySizePips * pipSize` и позиция отсутствует, открывается сделка по направлению свечи:
   - Свеча бычья → открывается длинная позиция.
   - Свеча медвежья → открывается короткая позиция.

## Правила выхода
- **Стоп-лосс** – на расстоянии `StopLossPips * pipSize` от цены входа. При нулевом значении не используется.
- **Тейк-профит** – на расстоянии `TakeProfitPips * pipSize` от входа. При нулевом значении не используется.
- **Трейлинг-стоп** – активируется, если `TrailingStopPips > 0` и `TrailingStepPips > 0`.
  - Включается после того, как прибыль достигла `TrailingStopPips + TrailingStepPips` пунктов.
  - Для лонга стоп переносится на уровень `Close - TrailingStopPips * pipSize`, если цена прошла минимум один шаг `TrailingStep` выше предыдущего стопа.
  - Для шорта стоп переносится на `Close + TrailingStopPips * pipSize` при аналогичном условии.

## Параметры
- `OrderVolume` – объём сделки в лотах, по умолчанию `0.1`.
- `StopLossPips` – стоп-лосс в пунктах, по умолчанию `30`.
- `TakeProfitPips` – тейк-профит в пунктах, по умолчанию `90`.
- `TrailingStopPips` – расстояние трейлинг-стопа, по умолчанию `10`.
- `TrailingStepPips` – шаг пересчёта трейлинг-стопа, по умолчанию `5`; при включённом трейлинге должен быть больше нуля.
- `MinimumBodySizePips` – минимальный размер тела свечи для входа, по умолчанию `100`.
- `CandleType` – тип свечей для расчёта, по умолчанию `1 Minute`.

## Визуализация
- При наличии графической области стратегия автоматически отображает выбранные свечи и собственные сделки, что облегчает анализ результатов.

## Рекомендации
- Базовые значения параметров соответствуют MT5-версии и могут быть адаптированы под волатильность конкретного инструмента.
- Из-за неттингового режима стратегия не предназначена для одновременного удержания длинных и коротких позиций.
- Если тик инструмента велик, пропорционально уменьшайте значения в пунктах, чтобы сохранить сопоставимые ценовые расстояния.

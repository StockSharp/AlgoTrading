# Стратегия I Trend

## Обзор

**I Trend** — это трендовая стратегия, преобразованная из оригинального эксперта MQL5 `Exp_i_Trend`. Она сочетает скользящую среднюю и полосы Боллинджера для определения смены импульса. Стратегия вычисляет значение *iTrend* и сигнальную линию и открывает или закрывает позиции при их пересечении.

## Как это работает

1. **Настройка индикаторов**
   - Рассчитывается экспоненциальная скользящая средняя (EMA) с настраиваемым периодом.
   - Строятся полосы Боллинджера с заданным периодом и отклонением.
   - Значение *iTrend* определяется как разница между выбранной ценой и выбранной линией полос Боллинджера (верхней, нижней или средней).
   - Сигнальная линия вычисляется по формуле `2 * MA - (High + Low)`.
2. **Генерация сигналов**
   - При пересечении iTrend **снизу вверх** сигнальной линии стратегия закрывает короткие позиции и открывает длинную.
   - При пересечении **сверху вниз** закрываются длинные позиции и открывается короткая.
3. **Исполнение ордеров**
   - Вход и выход выполняются по рыночной цене.
   - Размер позиции задаётся параметром стратегии `Volume`.

## Параметры

| Имя | Описание |
|-----|----------|
| `MaPeriod` | Период скользящей средней. |
| `BbPeriod` | Период полос Боллинджера. |
| `BbDeviation` | Стандартное отклонение для полос Боллинджера. |
| `PriceType` | Тип цены для расчёта iTrend (Close, Open, High, Low, Median, Typical и т.д.). |
| `BbMode` | Используемая линия полос Боллинджера (Upper, Lower, Middle). |
| `CandleType` | Таймфрейм свечей, используемых стратегией. |
| `Volume` | Объём заявок. |

## Примечания

- Стратегия обрабатывает только завершённые свечи; незакрытые свечи игнорируются.
- Пример предназначен для учебных целей и может требовать адаптации для реальной торговли.

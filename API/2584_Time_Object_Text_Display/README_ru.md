# Стратегия отображения времени текстовых объектов

## Обзор

Стратегия представляет собой прямую конвертацию скрипта MetaTrader 4 **time_objtxt.mq4**. Исходный код проходил по всем текстовым объектам (`OBJ_TEXT`) на текущем графике и выводил в журнал время, привязанное к каждому объекту. Торговые операции отсутствовали.

Версия для StockSharp сохраняет тот же смысл. При запуске стратегия считывает настраиваемый список описаний текстовых объектов, преобразует таймстемпы и выводит подробные сообщения в журнал стратегии. Это позволяет фиксировать ключевые события на графике и анализировать их время непосредственно в StockSharp.

## Ключевые особенности

- **Без торговли.** Стратегия используется исключительно для информирования и никогда не отправляет заявки.
- **Один параметр настройки.** `TextObjectDefinitions` — это список, разделённый точкой с запятой; каждая запись имеет формат `Имя@Время` (например, `My Text@2015.06.30 11:53:24`).
- **Гибкий разбор дат.** Поддерживаются популярные форматы дат MetaTrader с дефисами, точками и необязательными часовыми поясами.
- **Подробный журнал.** Для каждой корректной записи выводится строка `The time of object <Имя> is <Время>`, аналогичная оригинальному скрипту.
- **Проверка входных данных.** Некорректные элементы сопровождаются предупреждениями, что помогает быстро найти ошибки.

## Описание параметра

| Параметр | Назначение | Примечания |
|----------|------------|------------|
| `TextObjectDefinitions` | Перечень текстовых пометок для анализа. Каждый элемент содержит имя и время, соединённые через `@`. | Значение по умолчанию: `My Text@2015.06.30 11:53:24`. Пробелы по краям игнорируются. |

### Поддерживаемые форматы времени

Допускаются следующие шаблоны (пробелы допускаются):

- `yyyy-MM-dd HH:mm:ss`
- `yyyy-MM-ddTHH:mm:ss`
- `yyyy-MM-dd HH:mm:ss zzz`
- `yyyy-MM-ddTHH:mm:sszzz`
- `yyyy.MM.dd HH:mm:ss`
- `yyyy.MM.ddTHH:mm:ss`
- `yyyy.MM.dd HH:mm:ss zzz`
- `yyyy.MM.ddTHH:mm:sszzz`

Если значение не подходит ни под один из перечисленных форматов, выполняется дополнительная попытка разбора с учётом текущей культуры системы. При неудаче стратегия пишет сообщение `Failed to parse time '<значение>' for text object '<имя>'.`

## Последовательность работы

1. Заполните `TextObjectDefinitions`, разделяя записи точкой с запятой.
2. Запустите стратегию. В методе `OnStarted` выводится приветственное сообщение и выполняется обработка всех записей.
3. Изучите журнал, чтобы увидеть время каждой допустимой пометки.

## Отличия от версии MQL

- StockSharp не имеет доступа к графическим объектам MetaTrader, поэтому стратегия работает с пользовательским списком, а не с автоматическим сканированием графика.
- Сообщения формируются через `LogInfo` и `LogWarning` из StockSharp.
- Поддерживаются несколько вариантов форматов дат, чтобы повторить поведение `TimeToString(..., TIME_DATE | TIME_SECONDS)`.

## Практические рекомендации

- Используйте понятные имена (`SessionStart`, `NewsRelease` и т. д.), чтобы журнал оставался информативным.
- Регулярно удаляйте устаревшие записи, чтобы не перегружать вывод.
- Поскольку стратегия не открывает позицию, её можно запускать параллельно с другими алгоритмами как вспомогательный инструмент.

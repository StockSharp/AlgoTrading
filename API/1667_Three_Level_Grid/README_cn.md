# 三层网格策略

该策略实现一个对称的网格交易系统，可设置多达三层获利等级。
在当前价格上下按照固定间距挂出限价单，当入场单成交后，会在
预设的获利价格挂出反向限价单以锁定利润。策略适用于价格在区间
内震荡的市场环境。

## 参数

- `Grid Size` – 相邻网格之间的价格间距。
- `Levels` – 每一侧的网格层数。
- `Base Take Profit` – 第一获利等级的基础利润距离。
- `Order Volume` – 每个网格订单的数量。
- `Enable Rank1` – 启用基础获利等级。
- `Enable Rank2` – 启用基础加一倍网格间距的获利等级。
- `Enable Rank3` – 启用基础加两倍网格间距的获利等级。
- `Allow Longs` – 允许做多一侧的网格。
- `Allow Shorts` – 允许做空一侧的网格。
- `Candle Type` – 用于确定初始参考价格的蜡烛类型。

## 交易逻辑

1. 策略启动后订阅蜡烛并等待第一根完成的蜡烛。
2. 使用该蜡烛的收盘价构建具有指定层数的网格。
3. 根据允许的方向在各层挂出买入和/或卖出限价单。
4. 入场单成交后，根据选择的获利等级计算价格并挂出反向限价单。
5. 订单保持在市场中直至成交或被人工取消。

该实现是对原始 MQL 网格系统的简化转换，展示了在 StockSharp
高层 API 中实现核心机制的方法。

# High and Low Last 24 Hours
[English](README.md) | [Русский](README_ru.md)

该 StockSharp 策略复刻了 MetaTrader 示例 *EA High and Low last 24 hours*。策略会持续追踪默认 24 小时的滑动窗口，而不是等待用户按下 **H** 或 **L** 键，即时给出最近的最高价和最低价。

## 概览

- 订阅所选的蜡烛类型并维护 24 小时的滚动窗口。
- 直接使用内置的 `Highest` 与 `Lowest` 指标，无需额外缓冲区或手工循环。
- 运行过程中若修改窗口长度参数，指标长度会自动重新计算。
- 在日志中输出窗口起止时间以及最新极值，效果与原始 MQL 脚本的 `Comment()` 输出一致。
- 在图表上绘制最高价与最低价的水平线，以及表示窗口起点的垂直线。
- 不会发送任何委托，作用完全是分析与可视化。

## 工作流程

1. **数据订阅**：启动时根据 `Candle Type` 订阅蜡烛数据，并从 `DataType.Arg` 中读取时间框架。
2. **窗口换算**：将 `Window Length` 与时间框架相除并向上取整，用于设置 `Highest`/`Lowest` 的长度，保证始终覆盖目标时间范围。
3. **实时更新**：每根收盘蜡烛都会触发窗口刷新；如果用户在运行中调整 `Window Length`，指标长度会即时同步。
4. **日志记录**：只有当极值发生变化时才会写入信息日志，包含窗口时间段和新的价格。
5. **图表绘制**：每次更新都会刷新三条线段：
   - 横跨窗口的最高价水平线；
   - 横跨窗口的最低价水平线；
   - 位于窗口起点的垂直线，从最低价连接到最高价。

## 参数说明

### `Window Length`
用于计算极值的滚动时间长度，默认为 24 小时。可以设置任意正的 `TimeSpan`，从而支持更短或更长的分析区间。

### `Candle Type`
指定用于计算的蜡烛类型。默认值是 15 分钟蜡烛，但可以选择任意时间框架。该值同样用于将窗口长度转换成指标的样本数量。

## 交易规则

- **开仓/平仓**：无。策略不会发出订单，也不会改变持仓。
- **风险控制**：不适用。

## 使用提示

- 原脚本依赖按键触发，本转换版通过持续刷新保持同样的意图，更适合在 StockSharp 环境中运行。
- 只有当最高价或最低价真正发生变化时才输出日志，避免信息面板被重复消息淹没。
- 图表上的线条复现了 MetaTrader 中的水平/垂直参考线，便于观察 24 小时区间。
- 由于仅使用标准蜡烛和指标，策略可以与 StockSharp 支持的任何交易品种配合使用。

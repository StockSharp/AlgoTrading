# High and Low Last 24 Hours
[English](README.md) | [中文](README_cn.md)

Эта стратегия StockSharp воспроизводит пример MetaTrader *EA High and Low last 24 hours*. Вместо ожидания нажатия клавиш **H** или **L** она непрерывно анализирует скользящее окно (по умолчанию 24 часа) и показывает актуальные экстремумы.

## Обзор

- Подписывается на заданный тип свечей и поддерживает 24-часовое окно котировок.
- Использует стандартные индикаторы `Highest` и `Lowest`, поэтому дополнительные буферы не требуются.
- Автоматически пересчитывает индикаторы при изменении параметра длины окна во время работы.
- Выводит в лог границы окна и найденные экстремумы, полностью повторяя сообщения оригинального скрипта.
- Рисует горизонтальные уровни по максимуму и минимуму и вертикальную отметку начала анализируемого интервала.
- Не отправляет заявок; предназначена исключительно для аналитики.

## Подробный алгоритм

1. **Подписка на данные.** После запуска стратегия получает свечи выбранного типа `Candle Type`. Таймфрейм извлекается из `DataType.Arg`.
2. **Размер окна.** Длина индикаторов `Highest` и `Lowest` вычисляется как `ceil(WindowLength / timeFrame)`, что гарантирует охват указанного периода даже при «некратных» свечах.
3. **Обновления в реальном времени.** Каждый завершённый бар обновляет скользящее окно. Если параметр `Window Length` изменён вручную, длина индикаторов пересчитывается сразу.
4. **Логирование.** При изменении экстремума стратегия записывает сообщение с границами окна и новым значением — аналог `Comment()` в MQL-версии.
5. **Визуализация.** На графике постоянно поддерживаются три линии:
   - горизонтальная по максимуму за окно,
   - горизонтальная по минимуму,
   - вертикальная линия в момент начала окна (от минимума до максимума).

## Параметры

### `Window Length`
Продолжительность анализируемого окна (по умолчанию 24 часа). Разрешены любые положительные `TimeSpan`, что позволяет исследовать как внутридневные, так и многодневные промежутки.

### `Candle Type`
Определяет источник свечных данных. По умолчанию используются 15-минутные свечи, но можно выбрать любой другой таймфрейм. Это значение также участвует в пересчёте окна в количество свечей.

## Правила торговли

- **Входы/выходы:** отсутствуют. Стратегия не создаёт сделок и не изменяет позицию.
- **Управление рисками:** не применяется.

## Практические замечания

- В оригинальном скрипте экстремумы обновлялись по запросу пользователя; здесь обновление выполняется непрерывно, чтобы сохранить идею индикатора в среде StockSharp.
- Лог-сообщения выводятся только при фактическом изменении максимума или минимума, что предотвращает информационный шум.
- Линии на графике визуально повторяют горизонтальные и вертикальные уровни, которые строились в MetaTrader.
- Стратегия совместима с любыми инструментами, поддерживаемыми StockSharp, поскольку использует стандартные свечи и индикаторы.

# 静态箭头 EA
[English](README.md) | [Русский](README_ru.md)

## 概述
该策略是 MetaTrader “Static Arrow” 智能交易程序在 StockSharp 平台上的直接移植，定位为纯粹的可视化示例。
策略不会发送任何订单，也不会评估交易信号。启动后会订阅一个蜡烛序列（默认是 EURUSD 周线），创建图表
区域并准备一排箭头标记，使它们在行情更新时仍保持固定。

与原始 MQL 脚本依赖屏幕坐标不同，StockSharp 版本把每个箭头绑定到最新完成的蜡烛上。这样即使滚动图表或
出现新 K 线，标记也不会偏移。逻辑保持简洁，便于开发者借鉴如何在策略中绘制静态注释而无需使用底层图表
接口。

## 工作原理
1. 策略首先确认所选 `CandleType` 提供了时间框架（仅支持按时间聚合的蜡烛）。
2. 订阅蜡烛流后等待第一根完成的柱线，其开盘时间和收盘价用作所有箭头的基准。
3. 默认生成 40 个时间戳，通过按时间框架向后推算获得。每个时间戳都与同一基准价格配对，并可叠加
   `PriceOffset`。
4. 每当出现新的完成蜡烛时，通过 `DrawText` 重新绘制缓存的坐标，确保箭头保持可见且静止。
5. 因为坐标被缓存，无需定时器或逐笔数据；标注会一直保留，直到策略停止或被重置。

## 参数
- `CandleType` *(默认：周线 TimeFrame)* —— 用于锚定箭头的蜡烛订阅。
- `ArrowCount` *(默认：40)* —— 绘制箭头的数量。该参数可参与优化，调小可减轻负载，调大可让箭头延伸到更久的
  历史。
- `PriceOffset` *(默认：0)* —— 在基准价格上叠加的偏移量。可利用它将箭头稍微移动到蜡烛上方或下方，以免与柱体
  重叠。
- `ArrowSymbol` *(默认：“↓”)* —— 打印到图表的文本，可使用任意 Unicode 字符，例如 “↑” 或表情符号。

## 使用建议
- 该策略仅用于视觉展示，不会持仓，风控或资金管理设置不会产生影响。
- 在首次记录坐标后，如果想调整参数，需要先重启策略，以重新计算箭头位置。
- 默认的周线配置延续了原始 EA 强制显示 EURUSD 周线的思路；你可以自由选择其他品种和周期来装饰不同的图表。
- 在极短周期上运行时建议降低 `ArrowCount`，避免箭头绘制到可视区域之外。

## 与原始 MetaTrader 版本的差异
- 策略不会修改图表的自动滚动或缩放设置，用户可以在终端中自行控制这些选项。
- 不再使用像素坐标，而是根据第一根完成蜡烛计算出的时间/价格对，在不同分辨率和终端布局下都能一致工作。
- StockSharp 的图表注释在移除前会一直保留，因此不需要原代码中的计时器循环，只需在每根完成蜡烛时刷新一次。

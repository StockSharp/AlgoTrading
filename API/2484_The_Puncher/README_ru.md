# Стратегия Puncher

## Обзор
- Конвертация советника MetaTrader 5 «The Puncher».
- Комбинирует стохастик с длинным периодом и RSI для поиска зон истощения.
- Работает только по закрытию свечи, следуя высокоуровневому API StockSharp.
- Управляет рисками с помощью стоп-лосса, тейк-профита, перевода в безубыток и трейлинг-стопа.

## Индикаторы
- **Стохастик**: основной период `StochasticPeriod`, сглаживание %K — `StochasticSignalPeriod`, сглаживание %D — `StochasticSmoothingPeriod`.
- **RSI**: период `RsiPeriod`.

## Параметры
| Параметр | Значение по умолчанию | Описание |
|----------|-----------------------|----------|
| `StochasticPeriod` | 100 | Базовый период стохастика. |
| `StochasticSignalPeriod` | 3 | Сглаживание линии %K. |
| `StochasticSmoothingPeriod` | 3 | Сглаживание линии %D. |
| `RsiPeriod` | 14 | Длина расчёта RSI. |
| `OversoldLevel` | 30 | Общий уровень перепроданности для стохастика и RSI. |
| `OverboughtLevel` | 70 | Общий уровень перекупленности для стохастика и RSI. |
| `StopLossPips` | 20 | Размер стоп-лосса в пунктах (0 — отключено). |
| `TakeProfitPips` | 50 | Размер тейк-профита в пунктах (0 — отключено). |
| `TrailingStopPips` | 10 | Дистанция трейлинг-стопа в пунктах (0 — отключено). |
| `TrailingStepPips` | 5 | Минимальное улучшение цены для очередного подтягивания трейлинг-стопа. |
| `BreakEvenPips` | 21 | Прибыль в пунктах для перевода стопа в безубыток (0 — отключено). |
| `CandleType` | Таймфрейм 5 минут | Тип свечей для расчётов. |
| `Volume` | Свойство стратегии | Объём заявок (настраивается через `Volume`). |

> **Пункты** пересчитываются в абсолютные цены через `Security.PriceStep`. Убедитесь, что шаг цены инструмента задан корректно.

## Правила торговли
### Вход
- **Покупка**: стохастик (сигнальная линия) и RSI ниже `OversoldLevel`, открытых лонгов нет.
- **Продажа**: стохастик и RSI выше `OverboughtLevel`, открытых шортов нет.
- При противоположном сигнале открытая позиция закрывается, после чего до следующей свечи новые входы не рассматриваются.

### Выход и риск-менеджмент
- **Стоп-лосс**: фиксированное расстояние `StopLossPips`.
- **Тейк-профит**: фиксированная цель `TakeProfitPips`.
- **Безубыток**: при достижении прибыли `BreakEvenPips` стоп переносится на цену входа.
- **Трейлинг-стоп**: активируется после движения на `TrailingStopPips` и подтягивается каждые `TrailingStepPips`.
- **Противосигнал**: закрывает позицию даже без достижения стопа или цели.

## Примечания
- Подходит для любых инструментов StockSharp; параметры по умолчанию ориентированы на валютные пары.
- Работает только с закрытыми свечами, повторяя поведение `TradeAtCloseBar=true` оригинального робота.
- Перед запуском укажите портфель, инструмент и объём сделок.

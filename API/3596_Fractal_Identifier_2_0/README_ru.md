# Стратегия Fractal Identifier 2.0

## Обзор
**Fractal Identifier 2.0** — это прямая конвертация индикатора MetaTrader 5 "Fractal Identifier 2.0". Оригинальный скрипт регулярно считывал буфер стандартного индикатора Fractals и выводил в комментарий графика последний подтверждённый верхний фрактал. В версии для StockSharp та же логика реализована через подписку на свечи и запись свежего значения в диагностический лог стратегии.

Стратегия не открывает и не закрывает позиции. Её задача — служить аналитическим помощником, сигнализирующим о появлении нового бычьего фрактала. Благодаря использованию высокоуровневого API StockSharp компонент легко встроить в более сложные торговые панели или системы сигналов.

## Принцип работы
1. Выполняется подписка на свечной поток, выбранный параметром `CandleType`.
2. Поддерживается скользящий буфер, в котором хранятся максимумы последних завершённых свечей.
3. Как только накапливается минимум пять значений, буфер просматривается от самых свежих подтверждённых центров к более старым барам в поиске первого фрактала, удовлетворяющего классическому правилу Билла Вильямса (максимум выше максимумов двух предыдущих и двух последующих свечей).
4. При обнаружении нового уровня в журнал добавляется запись с текстом `Most recent fractal high: {price}`.

Такой подход воспроизводит логику MQL5-скрипта, который использовал `CopyBuffer` и выводил последнее ненулевое значение.

## Параметры
| Имя | Описание | Значение по умолчанию |
| --- | --- | --- |
| `LookbackBars` | Количество завершённых свечей, в пределах которых ищется подтверждённый верхний фрактал. Увеличение параметра расширяет глубину поиска. | `10` |
| `CandleType` | Свечной поток, по которому выполняется анализ фракталов. Измените параметр, если нужен другой таймфрейм (например, 5-минутные свечи). | `таймфрейм 1 минута` |

## Результат работы
- При появлении нового фрактала стратегия записывает в лог сообщение `Most recent fractal high: {price}`, аналогичное комментариям исходного индикатора.
- На встроенном графике отображаются свечи выбранного таймфрейма, что упрощает визуальное сопоставление логов и ценового движения.

## Дополнительные замечания
- Обрабатываются только верхние фракталы, как и в оригинальном коде MT5.
- Подтверждение фрактала требует появления двух следующих свечей, поэтому самые свежие максимумы попадают в лог с небольшой задержкой.
- Компонент можно использовать совместно с другими алгоритмами: для оповещений, построения уровней или передачи цены в собственные правила.

# 十字星形态提示策略

## 概述
十字星形态提示策略是 MetaTrader 专家 **DojiEN.mq4** 的 StockSharp 高级 API 版本。策略不会下单，只会持续监控最新
已经收盘的 K 线，一旦出现经典十字星形态就发送提示。经典十字星的定义是：蜡烛实体极小，而且开盘价与收盘价都位于整根蜡
烛区间的中部附近。

检测流程完全遵循原始专家顾问：

1. 读取上一根已经收盘的 K 线的开、高、低、收数据。
2. 检查开盘价与收盘价的差值是否小于可配置的价格点数阈值。
3. 计算蜡烛的中点，确认开盘价和收盘价都在围绕中点的容差带内。
4. 当两个条件都满足时写入日志提示。

原始 MQL 程序会在图表上绘制箭头与文字，本移植版本通过在策略窗口中附加蜡烛图实现同样的可视化效果，用户无需手动画线。

## 参数
| 名称 | 说明 | 默认值 |
| --- | --- | --- |
| Candle Type | 用于分析的蜡烛时间框架。 | 15 分钟时间框架 |
| Middle Tolerance (%) | 开盘价和收盘价相对蜡烛中点的最大偏离百分比。 | 10 |
| Body Difference (points) | 蜡烛实体允许的最大点数（价格步长数量）。 | 3 |

### 参数说明
- **Middle Tolerance (%)** 的默认值 `10` 表示开盘价与收盘价必须保持在蜡烛总波幅 10% 的范围内（相对于中点）。值越
小，判断条件越严格。
- **Body Difference (points)** 会乘以交易品种的最小价格步长。如果标的没有定义最小跳动单位，策略会回退到 1 作为
计算依据，保证逻辑可以运行。

## 提示与日志
当确认出现十字星时，策略会写入类似的日志信息：

```
Classic doji detected at 2024-05-15T08:45:00.0000000+00:00. Body size: 0.00020, range: 0.00150.
```

如需额外的通知方式，可以把自定义的提醒、邮件等监听器接入日志流水。

## 交易行为
策略不会开仓或平仓，只监控行情并输出提示，与原始 MetaTrader 专家顾问的行为（图表注释和弹窗提示）保持完全一致。

# Стратегия Hpcs Inter7

## Обзор
Hpcs Inter7 — это система пробоя полос Боллинджера, конвертированная из эксперт-советника MetaTrader 4 `_HPCS_Inter7_MT4_EA_V01_We.mq4`. Алгоритм рассчитывает стандартные полосы Боллинджера по выбранной серии свечей. Когда цена закрытия выходит за границы диапазона, стратегия воспринимает это как импульсный пробой и открывает позицию по направлению движения. Для каждой новой сделки сразу выставляются стоп-лосс и тейк-профит на фиксированном расстоянии от цены входа, полностью повторяя оригинальную логику EA.

## Логика торговли
- **Открытие продажи**: если предыдущая свеча закрылась выше нижней полосы, а последняя закрытая свеча завершилась ниже нижней полосы, подаётся рыночная заявка на продажу. Условие соответствует MQL4-выражению `Close[0] < LowerBand[0] && Close[1] > LowerBand[1]`.
- **Открытие покупки**: если предыдущая свеча закрылась ниже верхней полосы, а последняя закрытая свеча закрылась выше неё, размещается рыночная заявка на покупку. Это реализует условие `Close[0] > UpperBand[0] && Close[1] < UpperBand[1]`.
- **Одна сделка на свечу**: стратегия запоминает время открытия свечи, на которой была совершена последняя сделка. Повторный сигнал на той же свече игнорируется — аналог переменной `gdt_Candle` из MQL4.
- **Защитные приказы**: после открытия позиции вызываются методы `SetStopLoss` и `SetTakeProfit`, которые симметрично размещают стоп-лосс и тейк-профит относительно цены входа и обеспечивают постоянный контроль риска.

## Параметры
| Название | Описание | Значение по умолчанию | Оптимизация |
| --- | --- | --- | --- |
| `BollingerLength` | Количество свечей для расчёта полос Боллинджера. | 20 | Да |
| `BollingerDeviation` | Множитель стандартного отклонения для ширины полос. | 2 | Да |
| `CandleType` | Тип свечей для расчётов (по умолчанию минутные). | Свечи 1 минута | Нет |
| `ProtectionDistancePoints` | Расстояние до стоп-лосса и тейк-профита в шагах цены. | 10 | Да |

## Дополнительная информация
- Используется высокоуровневый API StockSharp (`SubscribeCandles().Bind(...)`), поэтому не требуется хранить собственные массивы данных.
- Метод `StartProtection()` активируется при запуске, чтобы платформа автоматически сопровождала защитные ордера, установленные `SetStopLoss` и `SetTakeProfit`.
- Размер позиции задаётся свойством `Strategy.Volume`, что соответствует оригинальному советнику с фиксированным объёмом в один лот.
- Хотя стратегия была создана для валютного рынка, её можно применять к любому инструменту с корректным `PriceStep` и информативными сигналами полос Боллинджера.

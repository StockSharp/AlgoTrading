# Стратегия Expotest

## Общее описание
Expotest — это перенос оригинального советника `Expotest.mq5` на платформу StockSharp. Стратегия торгует одним инструментом, использует индикатор Parabolic SAR и простое правило управления объёмом по принципу мартингейла. В рынке находится только одна позиция, выход осуществляется по заданным уровням стоп-лосса и тейк-профита.

## Логика торговли
- **Индикатор**: Parabolic SAR на выбранном типе свечей. Параметры ускорения (`SarStep`) и максимального ускорения (`SarMaximum`) настраиваются.
- **Вход в рынок**: анализируется только последняя закрытая свеча и только при отсутствии позиции.
  - Если значение SAR ниже либо равно цене закрытия, открывается длинная позиция.
  - Если значение SAR выше либо равно цене закрытия, открывается короткая позиция.
- **Выход из позиции**: стоп-лосс и тейк-профит рассчитываются от цены входа на фиксированное количество шагов цены. На каждой новой свече проверяется, достиг ли диапазон свечи заданных уровней. Тип выхода (прибыль/убыток) запоминается для расчёта объёма следующей сделки.

## Управление объёмом
- **Базовый объём**: определяется параметром `FixedVolume`, если он больше нуля. В противном случае объём вычисляется исходя из текущей стоимости портфеля, параметров `RiskPercent` и `StopLossPoints`. Если расчёт невозможен, используется стандартное значение `Strategy.Volume`.
- **Двойной шаг**: после убыточной сделки объём следующей позиции удваивается по сравнению с объёмом убыточной. После прибыльного выхода стратегия возвращается к базовому объёму.

## Настраиваемые параметры
- `CandleType` – тип данных для построения свечей (например, таймфрейм).
- `SarStep` – начальный коэффициент ускорения Parabolic SAR.
- `SarMaximum` – максимальный коэффициент ускорения Parabolic SAR.
- `StopLossPoints` – расстояние до стоп-лосса в шагах цены.
- `TakeProfitPoints` – расстояние до тейк-профита в шагах цены.
- `RiskPercent` – доля капитала, которой стратегия рискует в одной сделке при динамическом расчёте объёма.
- `FixedVolume` – фиксированный торговый объём; значение `0` включает риск-менеджмент на основе процента.

## Дополнительные замечания
- Стратегия обрабатывает только закрытые свечи, что позволяет максимально приблизиться к исходной логике MQL и корректно работать с подписками StockSharp.
- Стоп-уровни хранятся внутри стратегии, без регистрации отдельных стоп/лимит заявок, что упрощает тестирование.
- По запросу заказчика Python-версия и соответствующая папка не создавались.

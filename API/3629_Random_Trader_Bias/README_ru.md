# Random Bias Trader
[English](README.md) | [中文](README_cn.md)

Random Bias Trader повторяет работу советника «random trader» из MetaTrader, используя высокоуровневый API StockSharp.
На закрытии каждой свечи стратегия подбрасывает виртуальную монету и открывает позицию в выпавшую сторону, если текущих сделок нет.
Стоп-лосс и тейк-профит рассчитываются либо по ATR(10), либо по фиксированному числу пунктов и масштабируются коэффициентом доход/риск.
Размер позиции определяется заданным процентом риска от капитала и автоматически ограничивается торговыми лимитами инструмента.
Дополнительный механизм безубыточности переносит стоп на цену входа после достижения заданного профита в пунктах.

## Детали
- **Данные**: Одна подписка на свечи, задаётся параметром `CandleType`.
- **Условия входа**:
  - Лонг: Нет позиции, жеребьёвка выбрала покупку. Вход по цене закрытия последней свечи.
  - Шорт: Нет позиции, жеребьёвка выбрала продажу. Вход по цене закрытия последней свечи.
- **Условия выхода**:
  - Стоп-лосс: `LossPipDistance` × размер пункта или `LossAtrMultiplier` × ATR(10) в зависимости от `LossType`.
  - Тейк-профит: Стоп умножается на `RewardRiskRatio`.
  - Безубыток: При включении стоп переносится к цене входа после прибыли в `BreakevenDistancePips` пунктов.
- **Стопы**: Для каждой сделки выставляются динамические стоп-лосс и тейк-профит, безубыток опционален.
- **Значения по умолчанию**:
  - `CandleType` = таймфрейм 1 минута
  - `RewardRiskRatio` = 2.0
  - `LossType` = Pip
  - `LossAtrMultiplier` = 5.0
  - `LossPipDistance` = 20 пунктов
  - `RiskPercentPerTrade` = 1%
  - `UseBreakeven` = включено
  - `BreakevenDistancePips` = 10 пунктов
  - `UseMaxMargin` = включено
- **Фильтры**:
  - Категория: случайная, нейтральная по тренду
  - Направление: обе стороны, определяется жеребьёвкой
  - Индикаторы: ATR(10) (опционально)
  - Сложность: начальный уровень
  - Риск: средний, зависит от ширины стопа

## Примечания
- Если рассчитанный объём слишком мал, стратегия по желанию использует максимально доступный торговый объём.
- Стопы и цели округляются к шагу цены инструмента перед регистрацией заявок.
- Логика безубыточности гарантирует наличие только одной позиции, как и в оригинальном советнике MetaTrader.

# FORTS Currency Power 策略

该策略将 MetaTrader 5 中的 **FORTS Currency Power** 数据流迁移到 StockSharp。它跟踪莫斯科交易所 FORTS 板块的三组期货篮子，并在 0-100 区间报告相对强度。一旦任意成分合约产生新的完成蜡烛，就会重新计算篮子。

## 概述

- 使用 Donchian 通道对 `RTS`、`USD`、`RUB` 三个篮子计算强度。
- 为所有合约订阅相同类型的蜡烛，只处理已经完成的蜡烛。
- 将每个合约的读数归一化到 0-100 范围，完全复刻原始脚本。
- 将篮子数值写入日志，可用于图表或其他模块。
- 不会发送任何订单，本质上是分析监控器。

## 篮子结构

| 篮子 | 合约（符号表示是否取反） |
| --- | --- |
| RTS | `MIX` (+), `RTS` (+) |
| USD | `Si` (+), `RTS` (-) |
| RUB | `Si` (-), `MIX` (-), `Eu` (-) |

正号表示直接使用 Donchian 归一化，负号表示取反（100 − 数值）。最终强度是经过调整后各成分的简单平均，与 MQL 版本完全一致。

## 参数

| 参数 | 说明 | 默认值 |
| --- | --- | --- |
| `CandleType` | 所有订阅共享的蜡烛数据类型。 | 1 分钟时间框架 |
| `Lookback` | Donchian 通道的回看蜡烛数量。 | `5` |
| `MixSecurity` | MIX 期货（如 `MIX-3.18`）。 | 必填 |
| `RtsSecurity` | RTS 指数期货（如 `RTS-3.18`）。 | 必填 |
| `SiSecurity` | USD/RUB 期货（如 `Si-3.18`）。 | 必填 |
| `EuSecurity` | EUR/RUB 期货（如 `Eu-3.18`）。 | 必填 |

### 日志示例

```
RTS basket power = 61.45 at 2018-02-05T10:31:00.0000000+03:00
USD basket power = 42.07 at 2018-02-05T10:31:00.0000000+03:00
RUB basket power = 37.82 at 2018-02-05T10:31:00.0000000+03:00
```

这些信息可以输出到看板、保存到数据库或传递给其他策略。

## 使用建议

1. 在启动前通过参数指定四个期货合约。
2. 选择与原始数据源一致的蜡烛类型（推荐 1 分钟）。
3. 如果计划扩展交易逻辑，请将策略关联到真实或虚拟投资组合；仅监控时可使用占位组合。
4. 如需绘图，可将日志输出接入图表组件绘制强度曲线或导出数据。

## 备注

- 在 Donchian 通道填满之前不会生成强度值。
- 已添加对零价格区间的保护，避免除零错误。
- 调整 `Lookback` 可以改变灵敏度：数值越小，反应越快但噪声越大。

# Стратегия FORTS Currency Power

Стратегия переносит поток **FORTS Currency Power** из MetaTrader 5 в StockSharp. Она отслеживает три пользовательских корзины фьючерсов секции FORTS Московской биржи и показывает их относительную силу в диапазоне от 0 до 100. Корзины пересчитываются при появлении каждой завершённой свечи для задействованных контрактов.

## Обзор

- Рассчитывает силу по трем корзинам (`RTS`, `USD`, `RUB`) с использованием канала Дончиана.
- Подписывается на один и тот же тип свечей для всех инструментов и обрабатывает только завершённые свечи.
- Нормализует значения каждой бумаги в диапазоне 0-100, полностью повторяя оригинальный скрипт.
- Выводит значения корзин в лог для визуализации или передачи в другие подсистемы.
- Не выставляет заявок — это аналитический монитор.

## Состав корзин

| Корзина | Контракты (знак показывает инверсию) |
| --- | --- |
| RTS | `MIX` (+), `RTS` (+) |
| USD | `Si` (+), `RTS` (-) |
| RUB | `Si` (-), `MIX` (-), `Eu` (-) |

Положительный знак сохраняет нормализацию Дончиана, отрицательный — разворачивает её (100 − значение). Итоговая сила — это простое среднее скорректированных компонентов, как в MQL-версии.

## Параметры

| Параметр | Описание | Значение по умолчанию |
| --- | --- | --- |
| `CandleType` | Тип свечей, общий для всех подписок. | таймфрейм 1 минута |
| `Lookback` | Количество свечей в диапазоне канала Дончиана. | `5` |
| `MixSecurity` | Фьючерс MIX (например, `MIX-3.18`). | обязательный |
| `RtsSecurity` | Фьючерс на индекс РТС (например, `RTS-3.18`). | обязательный |
| `SiSecurity` | Фьючерс USD/RUB (например, `Si-3.18`). | обязательный |
| `EuSecurity` | Фьючерс EUR/RUB (например, `Eu-3.18`). | обязательный |

### Пример логов

```
RTS basket power = 61.45 at 2018-02-05T10:31:00.0000000+03:00
USD basket power = 42.07 at 2018-02-05T10:31:00.0000000+03:00
RUB basket power = 37.82 at 2018-02-05T10:31:00.0000000+03:00
```

Эти сообщения можно направлять на дашборды, сохранять или отдавать другим стратегиям.

## Рекомендации по использованию

1. Задайте четыре фьючерса через параметры стратегии до запуска.
2. Выберите тип свечей, соответствующий оригинальному источнику (рекомендуется 1 минута).
3. Привяжите стратегию к портфелю, если планируете развивать торговую логику; иначе достаточно тестового портфеля.
4. При необходимости подключите лог к графику, чтобы рисовать кривые силы или экспортировать данные.

## Примечания

- Пока канал Дончиана не заполнится, значения силы останутся пустыми.
- Добавлены проверки на нулевой диапазон, чтобы избегать деления на ноль.
- Параметр `Lookback` регулирует чувствительность: меньшие значения дают более быстрый, но шумный отклик.

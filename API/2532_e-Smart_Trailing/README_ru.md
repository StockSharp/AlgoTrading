# e-Smart Trailing
[English](README.md) | [中文](README_cn.md)

Стратегия e-Smart Trailing воссоздаёт функциональность трейлинг-стопа из оригинального советника "e-Smart Trailing" для MetaTrader.
Она не открывает сделки самостоятельно, а управляет уже существующей позицией: при благоприятном движении цены уровень защиты
автоматически подтягивается на фиксированное количество пунктов, используя возможности высокоуровневого API StockSharp.

## Идея

* Работает с основным инструментом стратегии и подписывается на тиковые сделки, чтобы мгновенно реагировать на внутридневные
  изменения цены.
* Для длинной позиции при появлении прибыли защитный уровень размещается ниже последней цены на расстояние, заданное
  параметром трейлинга. После каждого движения вверх минимум на величину шага трейлинга стоп переносится выше.
* Для короткой позиции логика зеркальная: стоп располагается над последней ценой и смещается вниз при каждом движении в прибыль
  на величину шага.
* Если цена касается или пересекает рассчитанный уровень, стратегия отправляет рыночную заявку для немедленного закрытия
  оставшегося объёма.
* При отсутствии позиции накопленное состояние трейлинга очищается, чтобы новое открытие начиналось с нуля.

## Параметры

| Параметр | Описание |
|----------|----------|
| **Trailing Stop (pips)** | Расстояние между текущей ценой и трейлинг-стопом. Значение задаётся в пунктах; стратегия автоматически учитывает 3- и 5-значные котировки. |
| **Trailing Step (pips)** | Минимальное положительное движение цены (в пунктах), после которого стоп переносится дальше. |

## Практические заметки

* Используйте стратегию совместно с другой стратегией StockSharp или с ручными входами — e-Smart Trailing отвечает исключительно
  за сопровождение позиции и выход.
* Перенос стопа происходит только при неотрицательной плавающей прибыли, что соответствует оригинальному алгоритму, приостанавливающему
  трейлинг во время просадки.
* Закрытие выполняется рыночными заявками в момент пересечения уровня, без размещения стопов на стороне биржи.

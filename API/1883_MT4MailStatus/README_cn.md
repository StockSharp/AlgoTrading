# MT4 邮件状态策略

## 概述

**MT4 邮件状态策略** 会定期发送包含所有活动订单信息的电子邮件。该策略由原始的 MQL 脚本 `MT4MailStatus.mq4` 转换而来，并适配到 StockSharp API。

该策略不会开仓或管理交易，而是监视现有订单，并在可配置的时间间隔内发送详细状态报告。如果邮件发送失败，策略会将错误信息写入本地日志文件。

## 参数

- **SendInterval** – 状态报告之间的时间间隔，最小值为 60 秒，默认值为 1 小时。
- **SmtpHost** – SMTP 服务器地址。
- **SmtpPort** – SMTP 服务器端口。
- **SmtpUser** – SMTP 身份验证用户名。
- **SmtpPassword** – SMTP 身份验证密码。
- **FromEmail** – 发件人邮箱地址。
- **ToEmail** – 收件人邮箱地址。

## 工作原理

1. 策略启动后，定时器每两秒检查一次距离上次报告是否已过足够时间。
2. 当达到设定的间隔并且存在活动订单时，策略会构建一封邮件，其中包括：
   - 订单编号和交易品种
   - 订单类型和价格
   - 止损和止盈水平
   - 当前最佳买价和卖价
   - 订单数量
3. 邮件通过配置的 SMTP 设置发送。如发送失败，错误将记录到名为 `mylog_YYYY_MM_DD.txt` 的文本文件中。

## 使用说明

- 策略假设 SMTP 服务器支持 SSL。
- 策略不会创建或修改交易，仅报告与策略投资组合相关的现有订单。
- 请确保 SMTP 凭据和邮箱地址正确，以避免发送失败。

## 文件

- `CS/Mt4MailStatusStrategy.cs` – 主要的 C# 实现。
- `README.md` – 英文文档。
- `README_cn.md` – 中文文档。
- `README_ru.md` – 俄文文档。

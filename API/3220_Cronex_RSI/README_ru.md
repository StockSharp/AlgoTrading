# Стратегия Cronex RSI

**Стратегия Cronex RSI** переносит советник Exp_CronexRSI.mq5 на высокоуровневый API StockSharp. Базовый RSI проходит через две
последовательные скользящие средние, что формирует «быструю» и «медленную» кривые. Торговые решения принимаются по их пересечению,
а дополнительные флаги позволяют включать и отключать открытия/закрытия позиций так же, как в оригинальном MQL5 коде.

## Логика торговли

1. Рассчитать RSI по выбранному типу цены и заданному периоду.
2. Сгладить результат быстрым скользящим средним, затем повторно сгладить медленным средним.
3. С учётом параметра `SignalShift` анализировать пересечения:
   - Если на предыдущей подтверждённой свече быстрая линия находилась выше медленной, а на текущей опускается ниже, стратегия
     закрывает короткие позиции и при разрешении открывает длинную.
   - Если быстрая линия была ниже медленной и на подтверждённой свече поднимается выше, закрываются длинные позиции и может быть
     открыт шорт.
4. При смене направления позиции стратегия сначала ликвидирует старое плечо, затем открывает новое объёмом `TradeVolume`, добавляя
   недостающий объём для полного разворота.

По умолчанию используется `SignalShift = 1`, что обеспечивает подтверждение сигнала одной полностью завершённой свечой — аналогично
Exp_CronexRSI. Значение 0 заставляет реагировать на пересечение сразу после закрытия текущей свечи.

## Параметры

| Параметр | Описание |
| -------- | -------- |
| `RsiPeriod` | Период расчёта RSI. |
| `FastPeriod` | Длина первой (быстрой) скользящей средней. |
| `SlowPeriod` | Длина второй (медленной) скользящей средней. |
| `SignalShift` | Количество закрытых свечей для подтверждения сигнала (0 — без задержки). |
| `SmoothingMethod` | Тип скользящей средней для обоих этапов сглаживания (простая, экспоненциальная, сглаженная, линейно-взвешенная, объёмно-взвешенная). |
| `AppliedPrice` | Тип цены для расчёта RSI (close, open, high, low, median, typical, weighted). |
| `CandleType` | Тип свечей, используемых в стратегии. |
| `TradeVolume` | Базовый объём при открытии новых позиций. |
| `EnableLongEntry` / `EnableShortEntry` | Разрешение на открытие длинных / коротких позиций. |
| `EnableLongExit` / `EnableShortExit` | Разрешение на закрытие длинных / коротких позиций противоположными сигналами. |

## Особенности реализации

- Для сглаживания применяются стандартные индикаторы StockSharp. Опция `VolumeWeighted` выступает практичной заменой для VIDYA/AMA,
  присутствовавших в библиотеке Cronex.
- Логика выбора цены полностью повторяет MQL5-версию и позволяет гибко переключаться между различными вариантами входных данных.
- Индикаторные значения прокачиваются через `DecimalIndicatorValue`, что сохраняет совместимость с пайплайном StockSharp и избавляет
  от прямого чтения внутреннего состояния индикаторов.
- При изменении `SignalShift` стратегия автоматически пересоздаёт внутреннюю историю, чтобы условия пересечения всегда анализировались
  по правильному числу прошедших баров.

## Использование

1. Присоедините стратегию к портфелю и инструменту в дизайнере StockSharp или программно.
2. Настройте таймфрейм свечей, тип сглаживания и флаги торговли согласно требованиям конкретной версии Cronex RSI.
3. Запустите стратегию: она подпишется на поток свечей, пересчитает RSI и две средние, после чего будет отправлять рыночные заявки
   при подтверждённых пересечениях.
4. Для проверки поведения воспользуйтесь встроенными средствами визуализации: на графике будут отображены свечи, индикаторы и
   совершённые сделки.

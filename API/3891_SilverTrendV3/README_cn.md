# SilverTrend V3 策略

## 概述
SilverTrend V3 策略移植自 MetaTrader 4 版本。策略通过 SilverTrend 指标识别趋势方向，并结合 J_TPO 统计滤波器过滤噪声信号。系统一次只持有一个头寸，并在周五设定的时间之后停止开仓，以避免周末隔夜风险。

## 交易逻辑
1. **指标处理**
   - 策略维护最近一段时间的K线数据，并在每根收盘K线上重新计算 SilverTrend 指标。
   - SilverTrend 使用 9 根K线窗口和风险参数 3，构建自适应通道；收盘价突破上轨触发多头信号，跌破下轨触发空头信号。
   - J_TPO（长度14）衡量价格分布的偏度；只有当 J_TPO 为正时才允许多头入场，为负时才允许空头入场。
2. **入场条件**
   - 当 SilverTrend 信号由空头翻为多头且 J_TPO > 0 时买入。
   - 当 SilverTrend 信号由多头翻为空头且 J_TPO < 0 时卖出。
   - 周五超过设定的截止时间不再开新仓位。
3. **离场管理**
   - 反向的 SilverTrend 信号会立即平仓。
   - 可选的初始止损和止盈以“点”为单位设置，数值为 0 表示关闭该功能。
   - 可选的追踪止损在价格达到盈利缓冲后逐步跟随。

## 参数
| 名称 | 说明 | 默认值 |
| ---- | ---- | ------ |
| `Volume` | 下单手数。 | `1` |
| `TrailingStopPoints` | 追踪止损距离（点），`0` 表示禁用。 | `0` |
| `TakeProfitPoints` | 止盈距离（点），`0` 表示禁用。 | `0` |
| `InitialStopPoints` | 初始止损距离（点），`0` 表示禁用。 | `0` |
| `FridayCutoffHour` | 周五停止开仓的小时（交易所时间）。 | `16` |
| `CandleType` | 使用的K线类型/周期。 | 1 小时K线 |

## 补充说明
- 策略始终保持单仓位，符合原始 EA 的逻辑。
- 实现基于 StockSharp 的高层 API，只处理收盘完成的K线。
- 止损、止盈和追踪止损在策略内部管理，触发后以市价平仓。

# Стратегия пробоя предыдущей свечи
[English](README.md) | [中文](README_cn.md)

Стратегия воспроизводит советник BreakOut автора Soubra2003 для MetaTrader. Алгоритм отслеживает максимум и минимум последней
завершённой свечи и при закрытии новой свечи выше/ниже этих уровней разворачивает позицию. Поддерживаются симметричные сделки
в обе стороны, а также опциональные стоп-лосс и тейк-профит, задаваемые в абсолютных ценовых шагах.

## Общая логика

- Подписка на один поток свечей (по умолчанию — часовой таймфрейм).
- После каждой завершённой свечи сохраняются её High и Low, которые становятся уровнями пробоя для следующей свечи.
- Сделки открываются только по цене закрытия свечи, что повторяет тиковую логику оригинала без обращения к данным внутри свечи.

## Правила торговли

1. **Вход и разворот по пробою**
   - Закрытие текущей свечи выше максимума предыдущей:
     - Любой открытый шорт закрывается рыночной покупкой.
     - Затем сразу открывается новая длинная позиция (разворот происходит в рамках обработки одной свечи).
   - Закрытие текущей свечи ниже минимума предыдущей:
     - Любой открытый лонг закрывается рыночной продажей.
     - Затем открывается новая короткая позиция.
2. **Защитные выходы (опционально)**
   - При ненулевом стоп-лоссе позиция закрывается, если цена закрытия отклонилась от цены входа больше чем на указанное значение
     (ниже для лонга, выше для шорта).
   - При ненулевом тейк-профите позиция закрывается, если цена закрытия ушла в прибыль на указанное количество ценовых пунктов.
3. **Обновление уровней**
   - После обработки свечи её максимум/минимум становятся эталоном для следующего шага.

## Параметры

- **Candle Type** – тип данных свечи (по умолчанию часовая). Установите тот таймфрейм, который использовался в MetaTrader для
  исходного эксперта.
- **Stop Loss** – расстояние в абсолютных ценовых единицах от цены входа до защитного стопа. Значение `0` отключает стоп-лосс.
- **Take Profit** – расстояние в абсолютных ценовых единицах до цели по прибыли. Значение `0` отключает тейк-профит.

## Примечания

- В оригинале SL/TP выставлялись брокеру. В StockSharp закрытие реализовано через рыночные ордера после фиксации условия на
  цене закрытия.
- Настройки стопа и цели задавайте с учётом минимального шага цены инструмента (например, при шаге 0.01 и стопе 20 пунктов
  укажите значение `0.20`).
- Стратегия особенно хорошо подходит для волатильных инструментов, где пробои максимумов/минимумов предыдущей свечи дают
  направленное движение.

## Источник

- **Файл**: `MQL/17306/BreakOut.mq4`
- **Автор**: https://www.mql5.com/en/users/soubra2003

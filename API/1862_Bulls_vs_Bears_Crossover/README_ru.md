# Стратегия Bulls vs Bears Crossover

## Обзор

Стратегия реализует систему на основе индикатора **Bulls vs Bears (BvsB)**. Индикатор измеряет расстояние между максимумом и минимумом свечи и скользящей средней. Когда бычье расстояние опускается ниже медвежьего, это показывает ослабление роста и открывается длинная позиция. Если же бычье расстояние поднимается выше медвежьего, открывается короткая позиция. Текущие позиции закрываются при противоположном сигнале или при достижении уровней стоп-лосса и тейк-профита.

Тип и период скользящей средней настраиваются, что позволяет адаптировать стратегию к различным рынкам и таймфреймам. Управление рисками осуществляется фиксированными уровнями стоп-лосса и тейк-профита, выраженными в шагах цены.

## Параметры

| Название | Описание |
|----------|----------|
| `MaType` | Метод расчёта скользящей средней (SMA, EMA, SMMA, WMA). |
| `MaLength` | Период скользящей средней. |
| `StopLoss` | Размер стоп-лосса в шагах цены. |
| `TakeProfit` | Размер тейк-профита в шагах цены. |
| `OpenLong` | Разрешить открытие длинных позиций при бычьем пересечении. |
| `OpenShort` | Разрешить открытие коротких позиций при медвежьем пересечении. |
| `CloseLong` | Разрешить закрытие длинных позиций при медвежьем пересечении. |
| `CloseShort` | Разрешить закрытие коротких позиций при бычьем пересечении. |
| `CandleType` | Таймфрейм обрабатываемых свечей. |

## Как это работает

1. Подписка на указанную серию свечей и расчёт скользящей средней.
2. Для каждой завершённой свечи вычисляются бычье и медвежье расстояния:
   - **Bull** = `(HighPrice - MA) / PriceStep`
   - **Bear** = `(MA - LowPrice) / PriceStep`
3. Определяются пересечения между значениями Bull и Bear.
4. Позиции открываются или закрываются в зависимости от направления пересечения и активных опций.
5. Управление рисками осуществляется с помощью настроенных уровней стоп-лосса и тейк-профита.

Этот простой и гибкий подход позволяет оценивать баланс сил между покупателями и продавцами на разных инструментах.

# Стратегия RSI MA on RSI Dual

## Общее описание

Стратегия RSI MA on RSI Dual переносит эксперта MetaTrader "RSI_MAonRSI_Dual" в экосистему StockSharp. Используются две линии RSI с разными периодами, для каждой из которых рассчитывается простое скользящее среднее. Торговые решения принимаются, когда сглаженные линии RSI пересекаются, находясь при этом по одну сторону от заданного нейтрального уровня.

Реализация сохраняет ключевую логику оригинального робота и добавляет параметры для ограничения времени торговли, выбора направления и инверсии сигналов.

## Индикаторы

- **Быстрый RSI** — RSI с настраиваемым периодом.
- **Медленный RSI** — RSI с собственным периодом.
- **Скользящее среднее по RSI** — простое скользящее среднее, вычисляемое поверх каждой серии значений RSI.

Все индикаторы используют один и тот же тип цены (по умолчанию закрытие). Сглаженные линии RSI выводятся на отдельную область графика.

## Правила входа

1. Дождитесь формирования обеих сглаженных линий RSI на завершившейся свече.
2. **Покупка**
   - Быстрая линия пересекает медленную снизу вверх (предыдущее значение ниже, текущее выше).
   - Обе сглаженные линии находятся ниже нейтрального уровня (по умолчанию 50).
3. **Продажа**
   - Быстрая линия пересекает медленную сверху вниз (предыдущее значение выше, текущее ниже).
   - Обе сглаженные линии находятся выше нейтрального уровня.
4. Параметр `ReverseSignals` позволяет поменять направления сигналов местами.
5. На одной свече открывается не более одной позиции — повторные сигналы игнорируются.

## Управление позицией

- `AllowLong` и `AllowShort` включают или отключают торговлю в соответствующем направлении.
- `CloseOpposite` закрывает противоположную позицию перед разворотом.
- `OnlyOnePosition` запрещает открывать новую сделку при наличии любой позиции.
- Рыночные заявки отправляются с объёмом, указанным в параметре `Volume` стратегии.

## Временной фильтр

Параметр `UseTimeFilter` включает фильтрацию по торговой сессии. При включенном фильтре сделки допускаются только между `SessionStart` и `SessionEnd`. Поддерживаются интервалы, пересекающие полуночь. Время берётся из таймстемпов свечей в часовом поясе торговой площадки.

## Параметры

| Параметр | Описание |
| --- | --- |
| `CandleType` | Тип свечей, используемых в анализе. |
| `FastRsiPeriod` | Период быстрого RSI. |
| `SlowRsiPeriod` | Период медленного RSI. |
| `MaPeriod` | Длина сглаживающего скользящего среднего. |
| `AppliedPrice` | Тип цены, подаваемой на расчёт RSI. |
| `NeutralLevel` | Нейтральный уровень, разделяющий бычью и медвежью зоны. |
| `AllowLong` / `AllowShort` | Разрешение торговли в длинную или короткую сторону. |
| `ReverseSignals` | Инверсия направлений сигналов. |
| `CloseOpposite` | Закрывать противоположную позицию перед входом. |
| `OnlyOnePosition` | Ограничение на одну открытую позицию. |
| `UseTimeFilter` | Включение фильтра по времени. |
| `SessionStart` / `SessionEnd` | Границы торгового окна. |

## Отличия от оригинального эксперта

- Блоки управления капиталом, стоп-лоссы и трейлинг-стопы из версии MQL5 не перенесены. В StockSharp стратегия выставляет рыночные приказы фиксированным объёмом.
- Удалены выводы в журнал и всплывающие сообщения — для диагностики следует использовать стандартные механизмы StockSharp.
- Отслеживание сделок реализовано через событийную модель заявок StockSharp.

Несмотря на перечисленные отличия, логика генерации сигналов и фильтрация направлений полностью соответствуют исходному эксперту.

# Exp Cronex AO 策略

该策略将 MetaTrader 专家顾问 **Exp_CronexAO** 移植到 StockSharp 高级 API。原始机器人通过比较 Cronex Awesome Oscillator（AO） 的两条平滑曲线来交易。本移植版本订阅可配置的 K 线序列，计算 AO，并连续执行两次移动平均平滑以重建 Cronex 曲线，当快线穿越慢线时开仓或平仓。

## 交易逻辑

1. 基于所选 K 线计算 Awesome Oscillator。
2. 对振荡器进行两次简单移动平均平滑：第一次平滑生成 Cronex 快线，第二次平滑处理快线得到信号线。
3. 回看 `SignalBar` 根已完成的 K 线，比较该根 K 线上以及再前一根 K 线上的两条 Cronex 曲线。
4. 当快线位于慢线上方并且在回看柱上发生向上交叉时产生 **买入** 信号。策略可选地先平掉空头仓位，并在允许的情况下按市价建立多头仓位。
5. **卖出** 信号与上述规则相反：快线必须位于慢线之下，并且在回看柱上完成向下交叉。策略可选地平掉多头仓位，并在允许时开立空头。
6. 每次开仓都会按交易品种的点数添加止损与止盈距离。

策略始终只保留一个净头寸。当方向发生变化时，会把平掉反向仓位所需的数量与新的下单数量合并为一笔市价单，以模拟 MetaTrader 净值账户的处理方式。

## 参数

| 参数 | 说明 |
|------|------|
| `CandleType` | 用于 Cronex AO 计算的 K 线数据类型，默认是 8 小时时间框架。 |
| `FastPeriod` | 对 AO 进行第一次平滑时使用的周期长度。 |
| `SlowPeriod` | 对快线进行第二次平滑时使用的周期长度。 |
| `SignalBar` | 回看的已完成柱数，交叉必须出现在该柱上，并会结合前一柱确认方向。 |
| `BuyOpenEnabled` / `SellOpenEnabled` | 是否允许开多或开空。 |
| `BuyCloseEnabled` / `SellCloseEnabled` | 是否允许在出现反向信号时平多或平空。 |
| `TakeProfit` | 止盈点数，大于零时在每次开仓后附加。 |
| `StopLoss` | 止损点数，大于零时在每次开仓后附加。 |

## 风险控制

止损和止盈与 MetaTrader 版本一样以点数表示，每次新建仓位时都会重新计算，使保护性订单始终匹配当前的净仓位规模。

## 与 MetaTrader 版本的差异

- 本实现为两个 Cronex 平滑阶段都使用简单移动平均。原始 XMA 类支持多种平滑方法，但其默认配置正好对应于这里复现的简单平均。
- 未移植 `TradeAlgorithms` 库中的滑点和资金管理函数。仓位规模通过策略的 `Volume` 属性配置。
- 下单依赖 StockSharp 的净头寸模式。方向反转时会发送一笔足够大的市价单，同时平仓并建立新方向，与 MT5 净值账户的行为一致。

